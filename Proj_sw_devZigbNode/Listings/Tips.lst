C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TIPS
OBJECT MODULE PLACED IN .\Output\Tips.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Usr\Tips.c OMF2 OPTIMIZE(9,SIZE) BROWSE INCDIR(.\Usr;.\Usr_lib;.\std_Lib
                    -;.\dataTrans;.\Actuator;.\Sensor;.\hwDriver) DEBUG PRINT(.\Listings\Tips.lst) OBJECT(.\Output\Tips.obj)

line level    source

   1          #include "Tips.h"
   2          
   3          #include "USART.h"
   4          
   5          #include "string.h"
   6          #include "stdio.h"
   7          
   8          #include "driver_I2C_HXD019D.h"
   9          
  10          #include "Relay.h"
  11          #include "dataManage.h"
  12          #include "timerAct.h"
  13          #include "appTimer.h"
  14          #include "usrKin.h"
  15          
  16          #include "eeprom.h"
  17          #include "delay.h"
  18          
  19          color_Attr code color_Tab[TIPS_SWBKCOLOR_TYPENUM] = { //选色表
  20          
  21                  { 0,  0,  0}, {20, 10, 31}, {31,  0,  0}, //黑0、白1、红2
  22                  {31,  0, 10}, { 8,  0, 16}, {0,  31,  0}, //粉3、紫4、绿5
  23                  {16, 31,  0}, {31, 10,  0}, {0,   0, 31}, //橙6、靛7、蓝8
  24                  { 0, 10, 31}, //冰蓝9
  25          };
  26          
  27          color_Attr xdata relay1_Tips    = {0};
  28          color_Attr xdata relay2_Tips    = {0};
  29          color_Attr xdata relay3_Tips    = {0};
  30          color_Attr xdata zigbNwk_Tips   = {0};
  31          
  32          bkLightColorInsert_paramAttr xdata devBackgroundLight_param = {0}; //背光灯索引参数缓存
  33          
  34          color_Attr code  tips_relayUnused= {0, 0, 0}; //无效继电器背景灯颜色
  35          
  36          bit     idata ifHorsingLight_running_FLAG = 1;  //跑马灯运行标志位  默认开
  37          
  38          tips_Status devTips_status              = status_Null; //系统状态指示
  39          tips_nwkZigbStatus devTips_nwkZigb = nwkZigb_Normal; //zigbee网络状态指示灯
  40          
  41          u16 xdata counter_tipsAct               = 0; //tips 调色灯调色单周期
  42          u8  xdata counter_ifTipsFree    = TIPS_SWFREELOOP_TIME; //触摸空闲释放计时变量
  43          bit idata countEN_ifTipsFree    = 0; //触摸空闲释放计时使能
  44          u8  xdata tipsTimeCount_zigNwkOpen      = 0; //zigb 网络开放tips时间计时变量
  45          u8      xdata tipsTimeCount_touchReset  = 0; //触摸IC复位tips计时变量
  46          u8      xdata tipsTimeCount_factoryRecover = 0; //恢复出厂tips倒计时变量
  47          
  48          sound_Attr xdata devTips_beep   = {0, 0, 0};
  49          enum_beeps xdata dev_statusBeeps= beepsMode_null; //状态机状态：蜂鸣器状态指示
  50          
  51          #if((SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS) && (SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFI
             -CATION_BRITISH)) //英规插座才有数码管
               enum_segTips xdata dev_segTips = segMode_init; //状态机状态：seg状态指示
               bit idata tipsSeg_INTFLG = 0; //数码管状态中断切换标志 （当前状态正在进行时被中断切换，再次回到当前状态时
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 2   

             -使状态及内部变量回到初始值）
              #endif
  55          
  56          void tipLED_pinInit(void){
  57   1      
  58   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      
                      //灌电流 --按键
                      P5M1 &= ~(0x10);
                      P5M0 &= ~(0x10);
                      
               #if(SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFICATION_BRITISH)
                      //推挽 --数码管
                      P2M1    &= ~(0xAF);
                      P2M0    |=   0xAF;
                      
               #else
                      P2M1    &= ~(0x20);
                      P2M0    |=   0x20;
                      
               #endif
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~(0x0C);
                      P2M0 |= 0x0C;
                      
              #else
  80   1              P2M1 &= ~0xF7;
  81   1              P2M0 |= 0xF7;
  82   1              
  83   1              P0M1 &= ~0x0B;
  84   1              P0M0 |= 0x0B;
  85   1              
  86   1              P5M1 &= ~0x30;
  87   1              P5M0 |= 0x30;
  88   1              
  89   1      #endif
  90   1              
  91   1              devTips_status = status_Normal;
  92   1              
  93   1              tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  94   1              tipsLED_colorSet(obj_Relay2, 0, 0, 0);
  95   1              tipsLED_colorSet(obj_Relay3, 0, 0, 0);
  96   1              tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
  97   1              
  98   1      //      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  99   1      //      tipsLED_colorSet(obj_Relay2, 0, 0, 0);
 100   1      //      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
 101   1      //      tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
 102   1      }
 103          
 104          void pinBeep_Init(void){
 105   1      
 106   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~0x01;
                      P2M0 |= 0x01;
                      
              #else
 111   1              P3M1 &= ~(0x04);
 112   1              P3M0 |= 0x04;
 113   1              
 114   1      #endif
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 3   

 115   1      }
 116          
 117          /*从内部eeprom更新tips背景灯色*/
 118          void ledBKGColorSw_Reales(void){
 119   1      
 120   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 121   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 122   1      //      
 123   1      //      if(tipsInsert_swLedBKG_ON > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_ON = TIPSBKCOLOR_DEFAULT_ON;
 124   1      //      if(tipsInsert_swLedBKG_OFF > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_OFF = TIPSBKCOLOR_DEFAULT_O
             -FF;
 125   1      //      
 126   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 127   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 128   1              
 129   1              EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, (u8 *)&devBackgroundLight_param, sizeof(bkLightColorInsert_par
             -amAttr)); //参数读取
 130   1              
 131   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS) //参数预处理
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 = 0; //黑
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 = 5; //绿
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 = 8; //蓝
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 = 2; //红
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER) //参数预处理
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press >                       (TIPS_SWBKCOLOR_TY
             -PENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press = 0; //黑
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 >         (TIPS_SWBKCOLO
             -R_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 = 5; //绿
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 > (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 = 8; //蓝
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 >       (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 = 2; //红
                      
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS) //参数预处理，无特殊，随默认
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED) //参数预处理，无特殊，随默认
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO) //参数预处理
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig > (TIPS_SWBKCOLOR_TYP
             -ENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig = 8; //蓝
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig > (TIPS_SWBKCOLOR_T
             -YPENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig = 5; //绿
              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER) //参数预处理，热水器为强制背光
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open = 2; //红
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close = 0; //黑
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay30 = 5; //绿
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay60 = 8; //蓝
              
              #else
 156   1              switch(SWITCH_TYPE){
 157   2              
 158   2                      case SWITCH_TYPE_CURTAIN:{
 159   3                      
 160   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_press > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.c
             -uertain_BKlightColorInsert_press = 8; //蓝
 161   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_bounce > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 4   

             -cuertain_BKlightColorInsert_bounce = 5; //绿
 162   3                      
 163   3                      }break;
 164   2                      
 165   2                      case SWITCH_TYPE_SWBIT1:
 166   2                      case SWITCH_TYPE_SWBIT2:
 167   2                      case SWITCH_TYPE_SWBIT3:{
 168   3                              
 169   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_open > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_B
             -KlightColorInsert_open = 8; //蓝
 170   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_close > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_
             -BKlightColorInsert_close = 5; //绿
 171   3                              
 172   3                      }break;
 173   2                      
 174   2                      default:{}break;
 175   2              }
 176   1      
 177   1      #endif
 178   1      }
 179          
 180          /*触发非阻塞beeps_Tips*/
 181          void beeps_usrActive(u8 tons, u8 time, u8 loop){ //音调 时间 次数
 182   1      
 183   1              if(!ifNightMode_sw_running_FLAG){ //非夜间模式声音有效
 184   2              
 185   2                      devTips_beep.tips_Period = tons;
 186   2                      devTips_beep.tips_time = time;
 187   2                      devTips_beep.tips_loop = loop;
 188   2                      dev_statusBeeps = beepsMode_standBy;
 189   2              }
 190   1      }
 191          
 192          void thread_tipsGetDark(u8 funSet){ //占位清色值
 193   1      
 194   1              if((funSet & 0x01) >> 0)relay1_Tips.colorGray_R = relay1_Tips.colorGray_G = relay1_Tips.colorGray_B = 0;
 195   1              if((funSet & 0x02) >> 1)relay2_Tips.colorGray_R = relay2_Tips.colorGray_G = relay2_Tips.colorGray_B = 0;
 196   1              if((funSet & 0x04) >> 2)relay3_Tips.colorGray_R = relay3_Tips.colorGray_G = relay3_Tips.colorGray_B = 0;
 197   1              if((funSet & 0x08) >> 3)zigbNwk_Tips.colorGray_R = zigbNwk_Tips.colorGray_G = zigbNwk_Tips.colorGray_B = 
             -0;
 198   1      }
 199          
 200          /*led状态指示模式切换至正常模式*/
 201          void tips_statusChangeToNormal(void){
 202   1      
 203   1              counter_ifTipsFree = TIPS_SWFREELOOP_TIME;
 204   1              devTips_status = status_Normal;
 205   1              if(!countEN_ifTipsFree)countEN_ifTipsFree = 1; //触摸释放计时使能
 206   1              if(tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_nwkOpen;
 207   1      }
 208          
 209          /*led状态指示模式切换至zigb网络开放*/
 210          void tips_statusChangeToZigbNwkOpen(u8 timeopen){
 211   1      
 212   1              beeps_usrActive(3, 40, 2);
 213   1              tipsTimeCount_zigNwkOpen = timeopen;
 214   1              devTips_status = status_tipsNwkOpen;
 215   1              devTips_nwkZigb = nwkZigb_nwkOpen;
 216   1              thread_tipsGetDark(0x0F);
 217   1      }
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 5   

 218          
 219          /*led状态指示模式切换至zigb网络加入请求*/
 220          void tips_statusChangeToZigbNwkFind(void){
 221   1      
 222   1              beeps_usrActive(3, 40, 2);
 223   1              devTips_status = status_tipsNwkFind;
 224   1              thread_tipsGetDark(0x0F);
 225   1      }
 226          
 227          /*led状态指示模式切换至触摸IC复位模式*/
 228          void tips_statusChangeToTouchReset(u8 timeHold){
 229   1      
 230   1              tipsTimeCount_touchReset = timeHold;
 231   1              devTips_status = status_touchReset;
 232   1              thread_tipsGetDark(0x0F);
 233   1              beeps_usrActive(3, 40, 2);
 234   1      }
 235          
 236          /*led状态指示模式切换至恢复出厂模式*/
 237          void tips_statusChangeToFactoryRecover(u8 timeHold){
 238   1      
 239   1              tipsTimeCount_factoryRecover = timeHold;
 240   1              devTips_status = status_sysStandBy;
 241   1              thread_tipsGetDark(0x0F);
 242   1              beeps_usrActive(3, 255, 3);
 243   1      }
 244          
 245          /*tips主线程*///状态机
 246          void thread_Tips(void){
 247   1              
 248   1              if(ifNightMode_sw_running_FLAG){ //夜间模式，背景灯tips模式强制切换
 249   2              
 250   2                      if(devTips_status == status_Normal || //其它系统级tips不受夜间模式影响
 251   2                         devTips_status == status_keyFree){
 252   3                              
 253   3                              devTips_status = status_Night;
 254   3                      }
 255   2                      
 256   2              }else{ //非夜间模式，其它花样切换开启
 257   2                      
 258   2                      if(devTips_status == status_Night)tips_statusChangeToNormal(); //当前若为夜间模式则切回正常模式
 259   2                      
 260   2                      if(devTips_status == status_keyFree){
 261   3                      
 262   3                              if(!countEN_ifTipsFree)devTips_status = status_Normal; //中断正在运行的跑马灯
 263   3                      }
 264   2              
 265   2                      if( !counter_ifTipsFree &&  //指定时间没有硬件操作，led状态指示切换至空闲模式
 266   2                          (devTips_status == status_Normal) &&  //正常模式下才可以切，其他模式不能
 267   2                              countEN_ifTipsFree && //且空闲计时使能
 268   2                              ifHorsingLight_running_FLAG ){ //标志位置位才可以切
 269   3                          
 270   3                              thread_tipsGetDark(0x0F);
 271   3                              devTips_status = status_keyFree;
 272   3                      }
 273   2              }
 274   1              
 275   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      ifHorsingLight_running_FLAG = 0; //插座不存在跑马灯
                      
                      switch(devTips_status){
                      
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 6   

                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
                                              (status_Relay)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                              
                                                                      counter_tipsAct = 1000;
                                                                      if(zigbNwk_exist_FLG)(tips_Type)?(socketTips_B = 5):(socketTips_B = 0); //重连 --本地有网络记录，重
             -连
                                                                      else socketTips_B = 0; //重连 --本地没有有网络记录，不存在重连
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 7   

                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
                                      }
                                      
                              }break;
                              
                              default:{ //插座没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      ifHorsingLight_running_FLAG = 0; //红外不存在跑马灯
                      
                      switch(devTips_status){
                      
                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 8   

                                              (infraredStatus_GET() != infraredSMStatus_free)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                                      
                                                                      counter_tipsAct = 1000;
                                                                      if(zigbNwk_exist_FLG)(tips_Type)?(socketTips_B = 5):(socketTips_B = 0); //重连 --本地有网络记录，重
             -连
                                                                      else socketTips_B = 0; //重连 --本地没有有网络记录，不存在重连
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 9   

                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
                                      }
                                      
                              }break;
                              
                              default:{ //红外没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #else
 498   1              switch(devTips_status){
 499   2              
 500   2                      case status_sysStandBy:{
 501   3                      
 502   3                              tips_sysStandBy();
 503   3                              
 504   3                      }break;
 505   2                              
 506   2                      case status_keyFree:{
 507   3                      
 508   3                              tips_sysButtonReales();
 509   3                      
 510   3                      }break;
 511   2                      
 512   2                      case status_Night:
 513   2                      case status_Normal:{
 514   3                              
 515   3                              static u16 tipsNwk_Counter = 0;
 516   3                              u16 code tipsNwk_Period = 500;
 517   3                              u8 relayStatus_tipsTemp = status_Relay;
 518   3                              
 519   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT1){ //随继电器
 520   4                              
 521   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 522   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存1处理
 523   4      
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 10  

 524   4                              }else
 525   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT2){ //随继电器
 526   4      
 527   4                                      relayStatus_tipsTemp |= status_Relay & 0x02; //显存2加载
 528   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存2处理
 529   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 530   4      
 531   4                              }else
 532   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT3){ //随继电器
 533   4      
 534   4                                      relayStatus_tipsTemp = status_Relay; //直接加载，不处理
 535   4                                      
 536   4                              }else
 537   3                              if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN || SWITCH_TYPE == SWITCH_TYPE_FANS){ //随继电器
 538   4                                      
 539   4                                      relayStatus_tipsTemp = status_Relay;
 540   4                                      
 541   4                              }else
 542   3                              if(SWITCH_TYPE == SWITCH_TYPE_dIMMER){ //随触摸
 543   4                                      
 544   4                                      relayStatus_tipsTemp = touchPadScan_oneShoot();
 545   4                              }
 546   3      
 547   3                              /*继电器状态指示*/
 548   3                              switch(SWITCH_TYPE){
 549   4                                      
 550   4      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)                           
                                              case SWITCH_TYPE_FANS:{
                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                                      
                                                              case 0x01:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 11  

                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                                      
                                                              case 0x03:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                              
                                                              case 0x00:
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                      }
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 12  

                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)               
                                              case SWITCH_TYPE_dIMMER:{
                                                      
                                                      u8 idata TIPSBKCOLOR_USRDEF_PRESS       = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColo
             -rInsert_press; //按下色缓存
                                                      u8 idata TIPSBKCOLOR_USRDEF_UP          = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorI
             -nsert_brightness0; //弹起色缓存
                                                      
                                                      if(!status_Relay)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlight
             -ColorInsert_brightness0; //亮度为0时弹起色
                                                      else if(status_Relay == 100)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dim
             -mer_BKlightColorInsert_brightness100; //亮度为100时弹起色
                                                      else TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_
             -brightness1to99; //亮度为1-99时弹起色
                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                      
                                                              case 0x01:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case 0x04:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                      
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 13  

                                                              }break;
                                                      }
                                              
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
                                              case SWITCH_TYPE_SCENARIO:{
                                              
                                                      u16 code tipsCounter_scenarioKeepTrigForce = 500; //场景触发强制间隔时，tips闪烁相关周期
                                                      static bit tipsFlash_flg = 0;
                                                      
                                                      if(!counter_tipsAct){
                                                      
                                                              counter_tipsAct = tipsCounter_scenarioKeepTrigForce;
                                                              tipsFlash_flg = !tipsFlash_flg;
                                                      }
                                              
                                                      switch(scenario_ActParam.scenarioKey_currentTrig){
                                                      
                                                              case scenarioKey_current_S1:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 14  

                                                                      
                                                              case scenarioKey_current_S2:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              case scenarioKey_current_S3:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 15  

                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                              }break;
                                                      }
                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)       
                                              case SWITCH_TYPE_HEATER:{
                                                      
                                                      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
                                                      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
                                              
                                                      switch(heater_ActParam.heater_currentActMode){
                                                      
                                                              case heaterActMode_swClose:{
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 16  

                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_close].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swKeepOpen:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_open].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
             -orGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
             -orGray_B);
                                                                      
                                                              }break;
                                                                      
                                                              case heaterActMode_swCloseDelay30min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay30].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swCloseDelay60min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay60].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              default:{}break;
                                                      }
                                                              
                                              }break;
                                              
              #else                   
 823   4                                      case SWITCH_TYPE_CURTAIN:{
 824   5                                      
 825   5                                              switch(relayStatus_tipsTemp){ //非占位指示
 826   6                                              
 827   6                                              #if(CURTAIN_RELAY_UPSIDE_DOWN)
 828   6                                                      case 0x04:{
 829   7                                              #else
                                                              case 0x01:{
                                                      #endif
 832   7                                                      
 833   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 834   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 17  

             -tain_BKlightColorInsert_bounce].colorGray_G, 
 835   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 836   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 837   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 838   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 839   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 840   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 841   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 842   7                                                      
 843   7                                                      }break;
 844   6                                                              
 845   6                                              #if(CURTAIN_RELAY_UPSIDE_DOWN)
 846   6                                                      case 0x01:{
 847   7                                              #else
                                                              case 0x04:{
                                                      #endif
 850   7                                                      
 851   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 852   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 853   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 854   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 855   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 856   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 857   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 858   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 859   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 860   7                                                      
 861   7                                                      }break;
 862   6                                                      
 863   6                                                      default:{
 864   7                                                      
 865   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 866   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 867   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 868   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 869   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 870   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 871   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 872   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 18  

             -tain_BKlightColorInsert_bounce].colorGray_G, 
 873   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 874   7                                                      
 875   7                                                      }break;
 876   6                                              }
 877   5                                      
 878   5                                      }break;
 879   4                                      
 880   4                                      case SWITCH_TYPE_SWBIT1:
 881   4                                      case SWITCH_TYPE_SWBIT2:
 882   4                                      case SWITCH_TYPE_SWBIT3:
 883   4                                      default:{ //占位指示
 884   5                                              
 885   5                                              (DEV_actReserve & 0x01)?\
 886   5                                                      ((relayStatus_tipsTemp & 0x01)?\
 887   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 888   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 889   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 890   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 891   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 892   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 893   5                                                      (tipsLED_colorSet(obj_Relay1, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B));
 894   5                                              
 895   5                                              (DEV_actReserve & 0x02)?\
 896   5                                                      ((relayStatus_tipsTemp & 0x02)?\
 897   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 898   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 899   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 900   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 901   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 902   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 903   5                                                      (tipsLED_colorSet(obj_Relay2, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 904   5                                              
 905   5                                              (DEV_actReserve & 0x04)?\
 906   5                                                      ((relayStatus_tipsTemp & 0x04)?\
 907   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 908   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 909   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 910   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 911   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 912   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 19  

 913   5                                                      (tipsLED_colorSet(obj_Relay3, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 914   5                                              
 915   5                                      }break;
 916   4                                      
 917   4      #endif
 918   4                              }
 919   3                              
 920   3                              /*过期tips处理*/
 921   3                              {
 922   4                              
 923   4                                      if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal;
             - //网络开放后台tips过期恢复
 924   4                              }
 925   3                              
 926   3                              /*zigb网络状态指示*/
 927   3                              {
 928   4                                      static bit tips_Type = 0;
 929   4                                      
 930   4                                      if(tipsNwk_Counter < tipsNwk_Period)tipsNwk_Counter ++;
 931   4                                      else{
 932   5                                      
 933   5                                              tips_Type = !tips_Type;
 934   5                                              tipsNwk_Counter = 0;
 935   5                                              
 936   5                                              switch(devTips_nwkZigb){
 937   6                                              
 938   6                                                      case nwkZigb_Normal:{
 939   7                                                      
 940   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)); //
             -常绿
 941   7                                                      
 942   7                                                      }break;
 943   6                                                      
 944   6                                                      case nwkZigb_nwkOpen:{
 945   7                                                      
 946   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -躺
 947   7                                                              
 948   7                                                      }break;
 949   6                                                      
 950   6                                                      case nwkZigb_outLine:{
 951   7                                                      
 952   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)); //
             -常红
 953   7                                                      
 954   7                                                      }break;
 955   6                                                      
 956   6                                                      case nwkZigb_reConfig:{
 957   7                                                              
 958   7                                                              if(zigbNwk_exist_FLG){ //网络存在
 959   8                                                              
 960   8                                                                      if(devZigbNwk_startUp_delayCounter)(tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_
             -colorSet(obj_zigbNwk, 0, 0, 0)); //红闪
 961   8                                                                      else tipsLED_colorSet(obj_zigbNwk, 30, 10, 0); //常黄 --有网络记录，重连中
 962   8                                                              
 963   8                                                              }else{ //网络不存在
 964   8                                                                      
 965   8                                                                      tipsLED_colorSet(obj_zigbNwk, 0, 0, 0); //常黑 --本身没有网络记录
 966   8                                                              }
 967   7                                                              
 968   7                                                      }break;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 20  

 969   6                                                      
 970   6                                                      case nwkZigb_nwkREQ:{
 971   7                                                      
 972   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 10, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -黄闪
 973   7                                                      
 974   7                                                      }break;
 975   6                                                      
 976   6                                                      case nwkZigb_hold:{
 977   7                                                      
 978   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -焐
 979   7                                                              
 980   7                                                      }break;
 981   6                                                      
 982   6                                                      default:{
 983   7                                                      
 984   7                                                              devTips_nwkZigb = nwkZigb_Normal;
 985   7                                                      
 986   7                                                      }break;
 987   6                                              }
 988   5                                      }
 989   4                              }
 990   3                              
 991   3                      }break;
 992   2                      
 993   2                      case status_tipsNwkOpen:{
 994   3                              
 995   3                              if(tipsTimeCount_zigNwkOpen)tips_specified(1);
 996   3                              else{
 997   4      
 998   4                                      tips_statusChangeToNormal();
 999   4      #if(DEBUG_LOGOUT_EN == 1)
                                              { //输出打印，谨记 用后注释，否则占用大量代码空间
                                                      memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
                                                      sprintf(log_buf, "zigbNwk Close.\n");
                                                      PrintString1_logOut(log_buf);
                                              }                       
              #endif  
1006   4                              }
1007   3                              
1008   3                      }break;
1009   2                      
1010   2                      case status_tipsNwkFind:{
1011   3                      
1012   3                              tips_specified(0);
1013   3                      
1014   3                      }break;
1015   2                      
1016   2                      case status_devHold:{
1017   3                      
1018   3                              tips_warning();
1019   3                              
1020   3                      }break;
1021   2                      
1022   2                      case status_touchReset:{
1023   3                      
1024   3                              if(tipsTimeCount_touchReset)tips_sysTouchReset();
1025   3                              else{
1026   4                              
1027   4                                      tips_statusChangeToNormal();
1028   4      #if(DEBUG_LOGOUT_EN == 1)
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 21  

                                              { //输出打印，谨记 用后注释，否则占用大量代码空间
                                                      memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
                                                      sprintf(log_buf, "touch reset complete.\n");
                                                      PrintString1_logOut(log_buf);
                                              }                       
              #endif  
1035   4                              }
1036   3                              
1037   3                      }break;
1038   2                              
1039   2                      default:{
1040   3                      
1041   3                              devTips_status = status_Normal;
1042   3                              
1043   3                      }break;
1044   2              }
1045   1      #endif
1046   1      }
1047                          
1048          #if((SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS) && (SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFI
             -CATION_BRITISH)) //英规插座才有数码管
              void powerTips(float tips_val){
              
                      P2 |= 0x8F;
                      if(tips_val > 15.0F) P20 = 0;
                      if(tips_val > 100.0F)P21 = 0;
                      if(tips_val > 200.0F)P22 = 0;
                      if(tips_val > 300.0F)P23 = 0;
                      if(tips_val > 400.0F)P27 = 0;
              }
              
              void seg_tipsShow(u8 dats){
              
                      (dats & 0x01)?(P20 = 0):(P20 = 1);
                      (dats & 0x02)?(P21 = 0):(P21 = 1);
                      (dats & 0x04)?(P22 = 0):(P22 = 1);
                      (dats & 0x08)?(P23 = 0):(P23 = 1);
                      (dats & 0x10)?(P27 = 0):(P27 = 1);
              }
              
              void segTips_Init(void){
              
                      static xdata u8 tips_data = 0;
                      static xdata u8 loop = 0;
                      static idata bit tips_flg = 0;
                      
                      if(loop > 6){loop = 0; tips_flg = !tips_flg;}
                      else{
                      
                              loop ++;
                              
                              if(!tips_flg)tips_data |= 1;
              
                              seg_tipsShow(tips_data);
                              
                              tips_data <<= 1;
                      }
              }
              
              void segTips_InitCmp(void){
              
                      static xdata u8 loop = 0;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 22  

                      static bit tips_flg = 0;
                      
                      if(loop > 16){
                      
                              loop = 0;
                              seg_tipsShow(0x00);
                              dev_segTips = segMode_elecDetect;
                      }
                      else{
                      
                              loop ++;
                              
                              if((loop % 2) == 0)tips_flg = !tips_flg;
                              (tips_flg)?(seg_tipsShow(0x00)):(seg_tipsShow(0xFF));
                      }
              }
              
              void segTips_detectStandBy(void){
              
                      static xdata u8 tips_data = 0;
                      static xdata u8 loop = 0;
                      static idata bit tips_flg = 0;
                      
                      if(tipsSeg_INTFLG){
                      
                              tipsSeg_INTFLG = 0;
                              
                              loop = 0;
                              tips_flg = 0;
                              tips_data = 0;
                      }
                      
                      if(loop > 6){loop = 0; tips_flg = !tips_flg;}
                      else{
                      
                              loop ++;
                              
                              seg_tipsShow(tips_data);
                              
                              if(!tips_flg){
                              
                                      tips_data <<= 1;
                                      tips_data |= 1;
                                      
                              }else{
                                      
                                      tips_data >>= 1;
                              }
                      }
              }
              
              void segTips_touchOpen(void){
              
                      static xdata u8 tips_data = 0;
                      static xdata u8 loop = 0;
                      
                      if(tipsSeg_INTFLG){
                      
                              tipsSeg_INTFLG = 0;
                              
                              loop = 0;
                              tips_data = 0;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 23  

                      }
                      
                      if(loop > 6){
                              
                              loop = 0; 
                              dev_segTips = segMode_elecDetect;
                              seg_tipsShow(0);
                              
                      }
                      else{
                              
                              loop ++;
                              
                              seg_tipsShow(tips_data);
                              tips_data <<= 1;
                              tips_data |= 1;
                      }
              }
              
              void segTips_touchClose(void){
              
                      static xdata u8 tips_data = 0x1f;
                      static xdata u8 loop = 0;
                      
                      if(tipsSeg_INTFLG){
                      
                              tipsSeg_INTFLG = 0;
                              
                              loop = 0;
                              tips_data = 0x1f;
                      }
                      
                      if(loop > 6){
                              
                              loop = 0; 
                              seg_tipsShow(0);
                      }
                      else{
                              
                              loop ++;
                              
                              seg_tipsShow(tips_data);
                              tips_data >>= 1;
                      }
              }
              
              void segTips_allDark(void){
              
                      seg_tipsShow(0);
              }
              
              #endif
1204          
1205          void tipsLED_colorSet(tipsLED_Obj obj, u8 gray_R, u8 gray_G, u8 gray_B){
1206   1      
1207   1              if((devTips_status == status_Normal) ||
1208   1                 (devTips_status == status_Night)){
1209   2                         
1210   2                      if(devTips_status == status_Night){     //夜间模式，背光亮度调整
1211   3                              
1212   3                              u8 code bright_coef = 4;
1213   3                      
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 24  

1214   3                              gray_R /= bright_coef;
1215   3                              gray_G /= bright_coef;
1216   3                              gray_B /= bright_coef;
1217   3                      }
1218   2              
1219   2                      switch(obj){
1220   3                      
1221   3                              case obj_Relay1:{
1222   4                              
1223   4                                      relay1_Tips.colorGray_R = gray_R;
1224   4                                      relay1_Tips.colorGray_G = gray_G;
1225   4                                      relay1_Tips.colorGray_B = gray_B;
1226   4                                      
1227   4                              }break;
1228   3                              
1229   3                              case obj_Relay2:{
1230   4                              
1231   4                                      relay2_Tips.colorGray_R = gray_R;
1232   4                                      relay2_Tips.colorGray_G = gray_G;
1233   4                                      relay2_Tips.colorGray_B = gray_B;
1234   4                                      
1235   4                              }break;
1236   3                              
1237   3                              case obj_Relay3:{
1238   4                              
1239   4                                      relay3_Tips.colorGray_R = gray_R;
1240   4                                      relay3_Tips.colorGray_G = gray_G;
1241   4                                      relay3_Tips.colorGray_B = gray_B;
1242   4                                      
1243   4                              }break;
1244   3                                              
1245   3                              case obj_zigbNwk:{
1246   4                              
1247   4                                      zigbNwk_Tips.colorGray_R = gray_R;
1248   4                                      zigbNwk_Tips.colorGray_G = gray_G;
1249   4                                      zigbNwk_Tips.colorGray_B = gray_B;
1250   4                                      
1251   4                              }break;
1252   3                              
1253   3                              default:break;
1254   3                      }
1255   2              }
1256   1      }
1257          
1258          void tips_warning(void){
1259   1      
1260   1              static u8 xdata tipsStep = 0;
1261   1              
1262   1              switch(tipsStep){
1263   2              
1264   2                      case 0:{
1265   3                      
1266   3                              counter_tipsAct = 1000;
1267   3                              tipsStep = 1;
1268   3                      
1269   3                      }break;
1270   2                      
1271   2                      case 1:{
1272   3                      
1273   3                              if(counter_tipsAct){
1274   4                                      
1275   4                                      if(counter_tipsAct % 199 > 99){
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 25  

1276   5                                      
1277   5                                              zigbNwk_Tips.colorGray_R = \
1278   5                                              relay3_Tips.colorGray_R = \
1279   5                                              relay2_Tips.colorGray_R = \
1280   5                                              relay1_Tips.colorGray_R = 31;
1281   5                                      
1282   5                                      }else{
1283   5                                      
1284   5                                              zigbNwk_Tips.colorGray_R = \
1285   5                                              relay3_Tips.colorGray_R = \
1286   5                                              relay2_Tips.colorGray_R = \
1287   5                                              relay1_Tips.colorGray_R = 0;
1288   5                                      }
1289   4                              
1290   4                              }else{
1291   4                              
1292   4                                      counter_tipsAct = 600;
1293   4                                      thread_tipsGetDark(0x0F);
1294   4                                      tipsStep = 2;
1295   4                              }
1296   3                      
1297   3                      }break;
1298   2                      
1299   2                      
1300   2                      case 2:{
1301   3                      
1302   3                              if(!counter_tipsAct)tipsStep = 0;
1303   3                              
1304   3                      }break;
1305   2                      
1306   2                      default:{
1307   3                      
1308   3                              tipsStep = 0;
1309   3                      
1310   3                      }break;
1311   2              }
1312   1      }
1313          
1314          void tips_breath(void){
1315   1      
1316   1              static u8       localTips_Count = COLORGRAY_MAX - 1; //步骤中期切换初始值
1317   1              static bit      count_FLG = 1;
1318   1              static u8       tipsStep = 0;
1319   1      
1320   1              u8 code speed = 3;
1321   1              u8 code step_period = 3;
1322   1              
1323   1      //      if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期
             - 切换到下一步骤
1324   1              if(!localTips_Count)count_FLG = 1;
1325   1              else 
1326   1              if(localTips_Count >= (COLORGRAY_MAX - 1)){
1327   2                      
1328   2                      count_FLG = 0;
1329   2                      
1330   2                      localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1331   2                      (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1332   2              }
1333   1              
1334   1              if(!counter_tipsAct){
1335   2              
1336   2                      (!count_FLG)?(counter_tipsAct = speed * (localTips_Count --)):(counter_tipsAct = speed * (localTips_Coun
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 26  

             -t ++)); //更新单周期时间
1337   2              }       
1338   1              
1339   1              switch(tipsStep){
1340   2              
1341   2                      case 0:{
1342   3                      
1343   3                              zigbNwk_Tips.colorGray_G = 31 - localTips_Count;
1344   3                              
1345   3                      }break;
1346   2                      
1347   2                      case 2:{
1348   3                      
1349   3                              relay3_Tips.colorGray_R = 31 - localTips_Count;
1350   3                              
1351   3                      }break;
1352   2                      
1353   2                      default:break;
1354   2              }
1355   1      }
1356          
1357          void tips_fadeOut(void){
1358   1      
1359   1              static u8       localTips_Count = 0; //步骤初期切换初始值
1360   1              static bit      count_FLG = 1;
1361   1              static u8       tipsStep = 0;
1362   1              static u8       pwmType_A = 0,
1363   1                                      pwmType_B = 0,
1364   1                                      pwmType_C = 0,
1365   1                                      pwmType_D = 0;
1366   1              
1367   1              u8 code speed = 3;
1368   1              u8 code step_period = 1;
1369   1              
1370   1              if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期期 
             -切换到下一步骤
1371   1              if(!localTips_Count)count_FLG = 1;
1372   1              else 
1373   1              if(localTips_Count > (COLORGRAY_MAX * 4)){
1374   2              
1375   2                      count_FLG = 0;
1376   2                      
1377   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1378   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1379   2              }
1380   1              
1381   1              if(!counter_tipsAct){
1382   2              
1383   2                      (!count_FLG)?(counter_tipsAct = speed * ((localTips_Count --) % COLORGRAY_MAX)):(counter_tipsAct = speed
             - * ((localTips_Count ++) % COLORGRAY_MAX)); //更新单周期时间
1384   2                      
1385   2                      if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1386   2                      if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1387   2                      if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1388   2                      if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1389   2              }
1390   1              
1391   1              switch(tipsStep){
1392   2              
1393   2                      case 0:{
1394   3                              
1395   3                              if(count_FLG){ 
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 27  

1396   4                                      
1397   4                                      zigbNwk_Tips.colorGray_B = pwmType_A;
1398   4                                      relay3_Tips.colorGray_B = pwmType_B;
1399   4                                      relay2_Tips.colorGray_B = pwmType_C;
1400   4                                      relay1_Tips.colorGray_B = pwmType_D;
1401   4                                      
1402   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1403   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1404   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
1405   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1406   4                                      
1407   4                              }else{ 
1408   4                                      
1409   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1410   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1411   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1412   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1413   4                                      
1414   4                                      zigbNwk_Tips.colorGray_B = pwmType_D;
1415   4                                      relay3_Tips.colorGray_B = pwmType_C;
1416   4                                      relay2_Tips.colorGray_B = pwmType_B;
1417   4                                      relay1_Tips.colorGray_B = pwmType_A;
1418   4                              }
1419   3                              
1420   3                      }break;
1421   2                              
1422   2                      case 1:{
1423   3                              
1424   3                              if(count_FLG){ 
1425   4                                      
1426   4                                      zigbNwk_Tips.colorGray_G = pwmType_A / 4;
1427   4                                      relay3_Tips.colorGray_G = pwmType_B / 4;
1428   4                                      relay2_Tips.colorGray_G = pwmType_C / 4;
1429   4                                      relay1_Tips.colorGray_G = pwmType_D / 4;
1430   4                                      
1431   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1432   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1433   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
1434   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1435   4                                      
1436   4                              }else{ 
1437   4                                      
1438   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1439   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1440   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1441   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1442   4                                      
1443   4                                      zigbNwk_Tips.colorGray_G = pwmType_D / 4;
1444   4                                      relay3_Tips.colorGray_G = pwmType_C / 4;
1445   4                                      relay2_Tips.colorGray_G = pwmType_B / 4;
1446   4                                      relay1_Tips.colorGray_G = pwmType_A / 4;
1447   4                              }
1448   3                              
1449   3                      }break;
1450   2                              
1451   2                      default:break;
1452   2              }
1453   1      }
1454          
1455          void tips_specified(u8 tips_Type){ //tips类别
1456   1      
1457   1              static u8       localTips_Count = 0; //步骤初期切换初始值
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 28  

1458   1              static bit      count_FLG = 1;
1459   1              static u8       tipsStep = 0;
1460   1              static u8       pwmType_A = 0,
1461   1                                      pwmType_B = 0,
1462   1                                      pwmType_C = 0,
1463   1                                      pwmType_D = 0;
1464   1              
1465   1              u8 code speed_Mol = 5,
1466   1                      speed_Den = 4;
1467   1              u8 code step_period = 0;
1468   1              
1469   1              if(!localTips_Count && !count_FLG){
1470   2              
1471   2                      if(tipsStep < step_period)tipsStep ++; //步骤初始期期 切换到下一步骤
1472   2                      else{
1473   3                      
1474   3                              tipsStep = 0;
1475   3                              
1476   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1477   3                      }
1478   2              }
1479   1              if(!localTips_Count)count_FLG = 1;
1480   1              else 
1481   1              if(localTips_Count > 80){
1482   2              
1483   2                      count_FLG = 0;
1484   2                      
1485   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1486   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1487   2              }
1488   1              
1489   1              if(!counter_tipsAct){
1490   2              
1491   2                      (!count_FLG)?(counter_tipsAct = ((localTips_Count --) % COLORGRAY_MAX) / speed_Mol * speed_Den):(counter
             -_tipsAct = ((localTips_Count ++) % COLORGRAY_MAX) / speed_Mol * speed_Den); //更新单周期时间
1492   2                      
1493   2                      if(localTips_Count >= 00 && localTips_Count < 32)pwmType_A = localTips_Count - 0; 
1494   2                      if(localTips_Count >= 16 && localTips_Count < 48)pwmType_B = localTips_Count - 16;
1495   2                      if(localTips_Count >= 32 && localTips_Count < 64)pwmType_C = localTips_Count - 32;
1496   2                      if(localTips_Count >= 48 && localTips_Count < 80)pwmType_D = localTips_Count - 48;
1497   2              }
1498   1              
1499   1              switch(tips_Type){
1500   2              
1501   2                      case 0:{
1502   3                      
1503   3                              switch(tipsStep){
1504   4                              
1505   4                                      case 0:{
1506   5                                              
1507   5                                              if(count_FLG){ 
1508   6                                                      
1509   6                                                      if(localTips_Count < 46){
1510   7                                                      
1511   7                                                              if(localTips_Count % 15 > 10){
1512   8                                                              
1513   8                                                                      zigbNwk_Tips.colorGray_R = 31;
1514   8                                                                      zigbNwk_Tips.colorGray_G = 10;
1515   8                                                                      
1516   8                                                              }else{
1517   8                                                              
1518   8                                                                      zigbNwk_Tips.colorGray_R = 0;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 29  

1519   8                                                                      zigbNwk_Tips.colorGray_G = 0;
1520   8                                                              }
1521   7                                                      
1522   7                                                      }else{
1523   7                                                      
1524   7                                                              if(localTips_Count > 45){zigbNwk_Tips.colorGray_R = 31; zigbNwk_Tips.colorGray_G = 10;}
1525   7                                                              if(localTips_Count > 50){relay3_Tips.colorGray_R = 31; relay3_Tips.colorGray_G = 10;}
1526   7                                                              if(localTips_Count > 60){relay2_Tips.colorGray_R = 31; relay2_Tips.colorGray_G = 10;}
1527   7                                                              if(localTips_Count > 70){relay1_Tips.colorGray_R = 31; relay1_Tips.colorGray_G = 10;}
1528   7                                                      }
1529   6                                                      
1530   6                                              }else{ 
1531   6                                                      
1532   6                                                      zigbNwk_Tips.colorGray_R = pwmType_D;
1533   6                                                      relay3_Tips.colorGray_R = pwmType_C;
1534   6                                                      relay2_Tips.colorGray_R = pwmType_B;
1535   6                                                      relay1_Tips.colorGray_R = pwmType_A;
1536   6                                                      
1537   6                                                      zigbNwk_Tips.colorGray_G = pwmType_D / 3;
1538   6                                                      relay3_Tips.colorGray_G = pwmType_C / 3;
1539   6                                                      relay2_Tips.colorGray_G = pwmType_B / 3;
1540   6                                                      relay1_Tips.colorGray_G = pwmType_A / 3;
1541   6                                              }
1542   5                                              
1543   5                                      }break;
1544   4                                              
1545   4                                      default:break;
1546   4                              }
1547   3                              
1548   3                      }break;
1549   2                      
1550   2                      case 1:{
1551   3                      
1552   3                              switch(tipsStep){
1553   4                              
1554   4                                      case 0:{
1555   5                                              
1556   5                                              if(count_FLG){ 
1557   6                                                      
1558   6                                                      if(localTips_Count < 46){
1559   7                                                      
1560   7      //                                                      if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_B = 31;else zigbNwk_Tips.colorGray_B = 0;
1561   7                                                              if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_G = 31;else zigbNwk_Tips.colorGray_G = 0;
1562   7                                                      
1563   7                                                      }else{
1564   7                                                      
1565   7      //                                                      if(localTips_Count > 45)relay1_Tips.colorGray_B = 31;
1566   7      //                                                      if(localTips_Count > 50)relay2_Tips.colorGray_B = 31;
1567   7      //                                                      if(localTips_Count > 60)relay3_Tips.colorGray_B = 31;
1568   7      //                                                      if(localTips_Count > 70)zigbNwk_Tips.colorGray_B = 31;
1569   7                                                              
1570   7                                                              if(localTips_Count > 45)relay1_Tips.colorGray_G = 31;
1571   7                                                              if(localTips_Count > 50)relay2_Tips.colorGray_G = 31;
1572   7                                                              if(localTips_Count > 60)relay3_Tips.colorGray_G = 31;
1573   7                                                              if(localTips_Count > 70)zigbNwk_Tips.colorGray_G = 31;
1574   7                                                      }
1575   6                                                      
1576   6                                              }else{ 
1577   6                                                      
1578   6      //                                              relay1_Tips.colorGray_B = pwmType_D;
1579   6      //                                              relay2_Tips.colorGray_B = pwmType_C;
1580   6      //                                              relay3_Tips.colorGray_B = pwmType_B;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 30  

1581   6      //                                              zigbNwk_Tips.colorGray_B = pwmType_A;
1582   6                                                      
1583   6                                                      relay1_Tips.colorGray_G = pwmType_D;
1584   6                                                      relay2_Tips.colorGray_G = pwmType_C;
1585   6                                                      relay3_Tips.colorGray_G = pwmType_B;
1586   6                                                      zigbNwk_Tips.colorGray_G = pwmType_A;
1587   6                                              }
1588   5                                              
1589   5                                      }break;
1590   4                                              
1591   4                                      default:break;
1592   4                              }
1593   3                              
1594   3                      }break;
1595   2                      
1596   2                      default:break;
1597   2              }
1598   1      }
1599          
1600          void tips_sysTouchReset(void){
1601   1              
1602   1              static bit tipsStep = 0;
1603   1      
1604   1              if(counter_tipsAct){
1605   2              
1606   2                      if(tipsStep){
1607   3                      
1608   3                              zigbNwk_Tips.colorGray_R = 0;
1609   3                              relay1_Tips.colorGray_R = 0;
1610   3                              relay2_Tips.colorGray_R = 0;
1611   3                              relay3_Tips.colorGray_R = 0;
1612   3                              
1613   3                      }else{
1614   3                      
1615   3                              zigbNwk_Tips.colorGray_R = 31;
1616   3                              relay1_Tips.colorGray_R = 31;
1617   3                              relay2_Tips.colorGray_R = 31;
1618   3                              relay3_Tips.colorGray_R = 31;
1619   3                      }
1620   2                      
1621   2              }else{
1622   2              
1623   2                      counter_tipsAct = 400;
1624   2                      tipsStep = !tipsStep;
1625   2              }
1626   1      }
1627          
1628          void tips_sysStandBy(void){
1629   1      
1630   1              zigbNwk_Tips.colorGray_R = 31;
1631   1              relay1_Tips.colorGray_R = 31;
1632   1              relay2_Tips.colorGray_R = 31;
1633   1              relay3_Tips.colorGray_R = 31;
1634   1      }
1635          
1636          void tips_sysButtonReales(void){
1637   1      
1638   1      //      u8 code timUnit_period = 0;
1639   1      //      static u8 timUnit_count = 0;
1640   1              
1641   1              static u8 localTips_Count = 0;
1642   1              u8 code localTips_Period = 128;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 31  

1643   1              static u8 tipsStep = 0;
1644   1              static u8 pwmType_A = 0,
1645   1                            pwmType_B = 0,
1646   1                                pwmType_C = 0,
1647   1                                pwmType_D = 0;
1648   1              
1649   1              if(!counter_tipsAct){
1650   2                      
1651   2                      counter_tipsAct = 12; //更新单周期时间(@50us中断，中断频率为网关主机两倍)
1652   2              
1653   2                      if(localTips_Count > localTips_Period){
1654   3                      
1655   3                              localTips_Count = 0;
1656   3                              (tipsStep > 7)?(tipsStep = 0):(tipsStep ++);
1657   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1658   3                      }
1659   2                      else{
1660   3                      
1661   3                              localTips_Count ++;
1662   3                              
1663   3                              if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1664   3                              if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1665   3                              if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1666   3                              if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1667   3                      }
1668   2              }
1669   1              
1670   1              switch(tipsStep){
1671   2                      
1672   2      //              case 0:{
1673   2      //              
1674   2      //                      zigbNwk_Tips.colorGray_R        = pwmType_A / 3;
1675   2      //                      relay3_Tips.colorGray_R         = pwmType_B / 3;
1676   2      //                      relay2_Tips.colorGray_R         = pwmType_C / 3;
1677   2      //                      relay1_Tips.colorGray_R         = pwmType_D / 3;
1678   2      //                      
1679   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1680   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
1681   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1682   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1683   2      //                      
1684   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 2;
1685   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 2;
1686   2      //                      relay2_Tips.colorGray_B         = pwmType_C / 2;
1687   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 2;
1688   2      //              
1689   2      //              }break;
1690   2      //              
1691   2      //              case 1:{
1692   2      //              
1693   2      //                      zigbNwk_Tips.colorGray_R        = 5 + (pwmType_A - 5);
1694   2      //                      relay3_Tips.colorGray_R         = 5 + (pwmType_B - 5);
1695   2      //                      relay2_Tips.colorGray_R         = 5 + (pwmType_C - 5);
1696   2      //                      relay1_Tips.colorGray_R         = 5 + (pwmType_D - 5);
1697   2      //                      
1698   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1699   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1700   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1701   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
1702   2      //                      
1703   2      //                      zigbNwk_Tips.colorGray_B        = 7 - pwmType_A / 2;
1704   2      //                      relay3_Tips.colorGray_B         = 7 - pwmType_B / 2;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 32  

1705   2      //                      relay2_Tips.colorGray_B         = 7 - pwmType_C / 2;
1706   2      //                      relay1_Tips.colorGray_B         = 7 - pwmType_D / 2;
1707   2      //              
1708   2      //              }break;
1709   2      //              
1710   2      //              case 2:{
1711   2      //                      
1712   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1713   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
1714   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1715   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1716   2      //              
1717   2      //              }break;
1718   2      //                      
1719   2      //              case 3:{
1720   2      //              
1721   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1722   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1723   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1724   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
1725   2      //                      
1726   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 5;
1727   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 5;
1728   2      //                      relay2_Tips.colorGray_B         = pwmType_C /5;
1729   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 5;
1730   2      //              
1731   2      //              }break;
1732   2      //                      
1733   2      //              case 4:{
1734   2      //                      
1735   2      //                      zigbNwk_Tips.colorGray_R        = 15 - pwmType_A;
1736   2      //                      relay3_Tips.colorGray_R         = 15 - pwmType_B;
1737   2      //                      relay2_Tips.colorGray_R         = 15 - pwmType_C;
1738   2      //                      relay1_Tips.colorGray_R         = 15 - pwmType_D;
1739   2      
1740   2      //                      zigbNwk_Tips.colorGray_B        = 3 + (pwmType_A - 3);
1741   2      //                      relay3_Tips.colorGray_B         = 3 + (pwmType_B - 3);
1742   2      //                      relay2_Tips.colorGray_B         = 3 + (pwmType_C - 3);
1743   2      //                      relay1_Tips.colorGray_B         = 3 + (pwmType_D - 3);
1744   2      //                      
1745   2      //              }break;
1746   2      //                      
1747   2      //              case 5:{
1748   2      
1749   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1750   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1751   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1752   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1753   2      //                      
1754   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A;
1755   2      //                      relay3_Tips.colorGray_G         = pwmType_B;
1756   2      //                      relay2_Tips.colorGray_G         = pwmType_C;
1757   2      //                      relay1_Tips.colorGray_G         = pwmType_D;
1758   2      //                      
1759   2      //              }break;
1760   2      //                      
1761   2      //              case 6:{
1762   2      //              
1763   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A;
1764   2      //                      relay3_Tips.colorGray_B         = pwmType_B;
1765   2      //                      relay2_Tips.colorGray_B         = pwmType_C;
1766   2      //                      relay1_Tips.colorGray_B         = pwmType_D;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 33  

1767   2      //                      
1768   2      //                      zigbNwk_Tips.colorGray_G        = 15 - pwmType_A + 3;
1769   2      //                      relay3_Tips.colorGray_G         = 15 - pwmType_B + 3;
1770   2      //                      relay2_Tips.colorGray_G         = 15 - pwmType_C + 3;
1771   2      //                      relay1_Tips.colorGray_G         = 15 - pwmType_D + 3;
1772   2      //              
1773   2      //              }break;
1774   2      //              
1775   2      //              case 7:{
1776   2      //              
1777   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1778   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1779   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1780   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1781   2      //                      
1782   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1783   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_A / 5;
1784   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_A / 5;
1785   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_A / 5;
1786   2      //                      
1787   2      //              }break;
1788   2              
1789   2                      case 0:{ /*绿*///绿起
1790   3                              
1791   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 5;
1792   3                              relay3_Tips.colorGray_G = pwmType_B / 5;
1793   3                              relay2_Tips.colorGray_G = pwmType_C / 5;
1794   3                              relay1_Tips.colorGray_G = pwmType_D / 5;
1795   3                              
1796   3                      }break;
1797   2                      
1798   2                      case 1:{ /*黄*///红起
1799   3                              
1800   3                              zigbNwk_Tips.colorGray_R = pwmType_A;
1801   3                              relay3_Tips.colorGray_R = pwmType_B;
1802   3                              relay2_Tips.colorGray_R = pwmType_C;
1803   3                              relay1_Tips.colorGray_R = pwmType_D;
1804   3                              
1805   3                      }break;
1806   2                      
1807   2                      case 2:{ /*红*///绿消
1808   3                              
1809   3                              zigbNwk_Tips.colorGray_G = 6 - pwmType_A / 5;
1810   3                              relay3_Tips.colorGray_G = 6 - pwmType_B / 5;
1811   3                              relay2_Tips.colorGray_G = 6 - pwmType_C / 5;
1812   3                              relay1_Tips.colorGray_G = 6 - pwmType_D / 5;
1813   3                              
1814   3                      }break;
1815   2                      
1816   2                      case 3:{ /*粉*///蓝起
1817   3                              
1818   3                              zigbNwk_Tips.colorGray_B = pwmType_A / 2;
1819   3                              relay3_Tips.colorGray_B = pwmType_B / 2;
1820   3                              relay2_Tips.colorGray_B = pwmType_C / 2;
1821   3                              relay1_Tips.colorGray_B = pwmType_D / 2;
1822   3                              
1823   3                      }break;
1824   2                      
1825   2                      case 4:{ /*蓝*///红消
1826   3                      
1827   3                              zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1828   3                              relay3_Tips.colorGray_R = 31 - pwmType_B;
C51 COMPILER V9.54   TIPS                                                                  05/13/2019 08:24:10 PAGE 34  

1829   3                              relay2_Tips.colorGray_R = 31 - pwmType_C;
1830   3                              relay1_Tips.colorGray_R = 31 - pwmType_D;
1831   3                              
1832   3                      }break;
1833   2                      
1834   2                      case 5:{ /*白*///绿起红起
1835   3                      
1836   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 3;
1837   3                              relay3_Tips.colorGray_G = pwmType_B / 3;
1838   3                              relay2_Tips.colorGray_G = pwmType_C / 3;
1839   3                              relay1_Tips.colorGray_G = pwmType_D / 3;
1840   3                              
1841   3                              zigbNwk_Tips.colorGray_R = pwmType_A / 2;
1842   3                              relay3_Tips.colorGray_R = pwmType_B / 2;
1843   3                              relay2_Tips.colorGray_R = pwmType_C / 2;
1844   3                              relay1_Tips.colorGray_R = pwmType_D / 2;
1845   3                              
1846   3                      }break;
1847   2                      
1848   2                      case 6:{ /*dark*///全消
1849   3                      
1850   3                              zigbNwk_Tips.colorGray_B = 15 - pwmType_A / 2;
1851   3                              relay3_Tips.colorGray_B = 15 - pwmType_B / 2;
1852   3                              relay2_Tips.colorGray_B = 15 - pwmType_C / 2;
1853   3                              relay1_Tips.colorGray_B = 15 - pwmType_D / 2;
1854   3                              
1855   3                              zigbNwk_Tips.colorGray_G = 10 - pwmType_A / 3;
1856   3                              relay3_Tips.colorGray_G = 10 - pwmType_B / 3;
1857   3                              relay2_Tips.colorGray_G = 10 - pwmType_C / 3;
1858   3                              relay1_Tips.colorGray_G = 10 - pwmType_D / 3;
1859   3                              
1860   3                              zigbNwk_Tips.colorGray_R = 15 - pwmType_A / 2;
1861   3                              relay3_Tips.colorGray_R = 15 - pwmType_B / 2;
1862   3                              relay2_Tips.colorGray_R = 15 - pwmType_C / 2;
1863   3                              relay1_Tips.colorGray_R = 15 - pwmType_D / 2;
1864   3                              
1865   3                      }break;
1866   2                      
1867   2                      default:{}break;
1868   2              }
1869   1      }
1870          
1871          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3409    ----
   CONSTANT SIZE    =     44    ----
   XDATA SIZE       =     25    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      7    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
