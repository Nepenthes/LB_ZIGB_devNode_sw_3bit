C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TIPS
OBJECT MODULE PLACED IN .\Output\Tips.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Usr\Tips.c OMF2 OPTIMIZE(9,SPEED) BROWSE INCDIR(.\Usr;.\Usr_lib;.\std_Li
                    -b;.\dataTrans;.\Actuator;.\Sensor;.\hwDriver) DEBUG PRINT(.\Listings\Tips.lst) OBJECT(.\Output\Tips.obj)

line level    source

   1          #include "Tips.h"
   2          
   3          #include "USART.h"
   4          
   5          #include "string.h"
   6          #include "stdio.h"
   7          
   8          #include "driver_I2C_HXD019D.h"
   9          
  10          #include "Relay.h"
  11          #include "dataManage.h"
  12          #include "timerAct.h"
  13          #include "appTimer.h"
  14          #include "usrKin.h"
  15          
  16          #include "eeprom.h"
  17          #include "delay.h"
  18          
  19          color_Attr code color_Tab[TIPS_SWBKCOLOR_TYPENUM] = { //选色表
  20          
  21                  { 0,  0,  0}, {20, 10, 31}, {31,  0,  0}, //黑0、白1、红2
  22                  {31,  0, 10}, { 8,  0, 16}, {0,  31,  0}, //粉3、紫4、绿5
  23                  {16, 31,  0}, {31, 10,  0}, {0,   0, 31}, //橙6、靛7、蓝8
  24                  { 0, 10, 31}, //冰蓝9
  25          };
  26          
  27          color_Attr xdata relay1_Tips    = {0};
  28          color_Attr xdata relay2_Tips    = {0};
  29          color_Attr xdata relay3_Tips    = {0};
  30          color_Attr xdata zigbNwk_Tips   = {0};
  31          
  32          bkLightColorInsert_paramAttr xdata devBackgroundLight_param = {0}; //背光灯索引参数缓存
  33          
  34          color_Attr code  tips_relayUnused= {0, 0, 0}; //无效继电器背景灯颜色
  35          
  36          bit     idata ifHorsingLight_running_FLAG = 1;  //跑马灯运行标志位  默认开
  37          
  38          tips_Status devTips_status              = status_Null; //系统状态指示
  39          tips_nwkZigbStatus devTips_nwkZigb = nwkZigb_Normal; //zigbee网络状态指示灯
  40          
  41          u16 xdata counter_tipsAct               = 0; //tips 调色灯调色单周期
  42          u8  xdata counter_ifTipsFree    = TIPS_SWFREELOOP_TIME; //触摸空闲释放计时变量
  43          bit idata countEN_ifTipsFree    = 0; //触摸空闲释放计时使能
  44          u8  xdata tipsTimeCount_zigNwkOpen      = 0; //zigb 网络开放tips时间计时变量
  45          u8      xdata tipsTimeCount_touchReset  = 0; //触摸IC复位tips计时变量
  46          u8      xdata tipsTimeCount_factoryRecover = 0; //恢复出厂tips倒计时变量
  47          
  48          sound_Attr xdata devTips_beep   = {0, 0, 0};
  49          enum_beeps xdata dev_statusBeeps= beepsMode_null; //状态机状态：蜂鸣器状态指示
  50          
  51          void tipLED_pinInit(void){
  52   1      
  53   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      P5M1 &= ~(0x10);
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 2   

                      P5M0 |= 0x10;
                      
                      P2M1 &= ~(0x20);
                      P2M0 |= 0x20;
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~(0x0C);
                      P2M0 |= 0x0C;
                      
              #else
  65   1              P2M1 &= ~0xF7;
  66   1              P2M0 |= 0xF7;
  67   1              
  68   1              P0M1 &= ~0x0B;
  69   1              P0M0 |= 0x0B;
  70   1              
  71   1              P5M1 &= ~0x30;
  72   1              P5M0 |= 0x30;
  73   1              
  74   1      #endif
  75   1              
  76   1              devTips_status = status_Normal;
  77   1              
  78   1              tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  79   1              tipsLED_colorSet(obj_Relay2, 0, 0, 0);
  80   1              tipsLED_colorSet(obj_Relay3, 0, 0, 0);
  81   1              tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
  82   1              
  83   1      //      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  84   1      //      tipsLED_colorSet(obj_Relay2, 0, 0, 0);
  85   1      //      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
  86   1      //      tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
  87   1      }
  88          
  89          void pinBeep_Init(void){
  90   1      
  91   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~0x01;
                      P2M0 |= 0x01;
                      
              #else
  96   1              P3M1 &= ~(0x04);
  97   1              P3M0 |= 0x04;
  98   1              
  99   1      #endif
 100   1      }
 101          
 102          /*从内部eeprom更新tips背景灯色*/
 103          void ledBKGColorSw_Reales(void){
 104   1      
 105   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 106   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 107   1      //      
 108   1      //      if(tipsInsert_swLedBKG_ON > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_ON = TIPSBKCOLOR_DEFAULT_ON;
 109   1      //      if(tipsInsert_swLedBKG_OFF > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_OFF = TIPSBKCOLOR_DEFAULT_O
             -FF;
 110   1      //      
 111   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 112   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 113   1              
 114   1              EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, (u8 *)&devBackgroundLight_param, sizeof(bkLightColorInsert_par
             -amAttr)); //参数读取
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 3   

 115   1              
 116   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS) //参数预处理
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 = 0; //黑
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 = 5; //绿
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 = 8; //蓝
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 = 2; //红
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER) //参数预处理
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press >                       (TIPS_SWBKCOLOR_TY
             -PENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press = 0; //黑
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 >         (TIPS_SWBKCOLO
             -R_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 = 5; //绿
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 > (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 = 8; //蓝
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 >       (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 = 2; //红
                      
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS) //参数预处理，无特殊，随默认
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED) //参数预处理，无特殊，随默认
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO) //参数预处理
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig > (TIPS_SWBKCOLOR_TYP
             -ENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig = 5; //绿
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig > (TIPS_SWBKCOLOR_T
             -YPENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig = 8; //蓝
              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER) //参数预处理，热水器为强制背光
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open = 5; //绿
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close = 0; //黑
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay30 = 8; //蓝
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay60 = 2; //红
              
              #else
 141   1              switch(SWITCH_TYPE){
 142   2              
 143   2                      case SWITCH_TYPE_CURTAIN:{
 144   3                      
 145   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_press > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.c
             -uertain_BKlightColorInsert_press = 8; //蓝
 146   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_bounce > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.
             -cuertain_BKlightColorInsert_bounce = 5; //绿
 147   3                      
 148   3                      }break;
 149   2                      
 150   2                      case SWITCH_TYPE_SWBIT1:
 151   2                      case SWITCH_TYPE_SWBIT2:
 152   2                      case SWITCH_TYPE_SWBIT3:{
 153   3                              
 154   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_open > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_B
             -KlightColorInsert_open = 8; //蓝
 155   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_close > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_
             -BKlightColorInsert_close = 5; //绿
 156   3                              
 157   3                      }break;
 158   2                      
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 4   

 159   2                      default:{}break;
 160   2              }
 161   1      
 162   1      #endif
 163   1      }
 164          
 165          /*触发非阻塞beeps_Tips*/
 166          void beeps_usrActive(u8 tons, u8 time, u8 loop){ //音调 时间 次数
 167   1      
 168   1              if(!ifNightMode_sw_running_FLAG){ //非夜间模式声音有效
 169   2              
 170   2                      devTips_beep.tips_Period = tons;
 171   2                      devTips_beep.tips_time = time;
 172   2                      devTips_beep.tips_loop = loop;
 173   2                      dev_statusBeeps = beepsMode_standBy;
 174   2              }
 175   1      }
 176          
 177          void thread_tipsGetDark(u8 funSet){ //占位清色值
 178   1      
 179   1              if((funSet & 0x01) >> 0)relay1_Tips.colorGray_R = relay1_Tips.colorGray_G = relay1_Tips.colorGray_B = 0;
 180   1              if((funSet & 0x02) >> 1)relay2_Tips.colorGray_R = relay2_Tips.colorGray_G = relay2_Tips.colorGray_B = 0;
 181   1              if((funSet & 0x04) >> 2)relay3_Tips.colorGray_R = relay3_Tips.colorGray_G = relay3_Tips.colorGray_B = 0;
 182   1              if((funSet & 0x08) >> 3)zigbNwk_Tips.colorGray_R = zigbNwk_Tips.colorGray_G = zigbNwk_Tips.colorGray_B = 
             -0;
 183   1      }
 184          
 185          /*led状态指示模式切换至正常模式*/
 186          void tips_statusChangeToNormal(void){
 187   1      
 188   1              counter_ifTipsFree = TIPS_SWFREELOOP_TIME;
 189   1              devTips_status = status_Normal;
 190   1              if(!countEN_ifTipsFree)countEN_ifTipsFree = 1; //触摸释放计时使能
 191   1              if(tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_nwkOpen;
 192   1      }
 193          
 194          /*led状态指示模式切换至zigb网络开放*/
 195          void tips_statusChangeToZigbNwkOpen(u8 timeopen){
 196   1      
 197   1              beeps_usrActive(3, 40, 2);
 198   1              tipsTimeCount_zigNwkOpen = timeopen;
 199   1              devTips_status = status_tipsNwkOpen;
 200   1              devTips_nwkZigb = nwkZigb_nwkOpen;
 201   1              thread_tipsGetDark(0x0F);
 202   1      }
 203          
 204          /*led状态指示模式切换至zigb网络加入请求*/
 205          void tips_statusChangeToZigbNwkFind(void){
 206   1      
 207   1              beeps_usrActive(3, 40, 2);
 208   1              devTips_status = status_tipsNwkFind;
 209   1              thread_tipsGetDark(0x0F);
 210   1      }
 211          
 212          /*led状态指示模式切换至触摸IC复位模式*/
 213          void tips_statusChangeToTouchReset(u8 timeHold){
 214   1      
 215   1              tipsTimeCount_touchReset = timeHold;
 216   1              devTips_status = status_touchReset;
 217   1              thread_tipsGetDark(0x0F);
 218   1              beeps_usrActive(3, 40, 2);
 219   1      }
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 5   

 220          
 221          /*led状态指示模式切换至恢复出厂模式*/
 222          void tips_statusChangeToFactoryRecover(u8 timeHold){
 223   1      
 224   1              tipsTimeCount_factoryRecover = timeHold;
 225   1              devTips_status = status_sysStandBy;
 226   1              thread_tipsGetDark(0x0F);
 227   1              beeps_usrActive(3, 255, 3);
 228   1      }
 229          
 230          /*tips主线程*///状态机
 231          void thread_Tips(void){
 232   1              
 233   1              if(ifNightMode_sw_running_FLAG){ //夜间模式，背景灯tips模式强制切换
 234   2              
 235   2                      if(devTips_status == status_Normal || //其它系统级tips不受夜间模式影响
 236   2                         devTips_status == status_keyFree){
 237   3                              
 238   3                              devTips_status = status_Night;
 239   3                      }
 240   2                      
 241   2              }else{ //非夜间模式，其它花样切换开启
 242   2                      
 243   2                      if(devTips_status == status_Night)tips_statusChangeToNormal(); //当前若为夜间模式则切回正常模式
 244   2                      
 245   2                      if(devTips_status == status_keyFree){
 246   3                      
 247   3                              if(!countEN_ifTipsFree)devTips_status = status_Normal; //中断正在运行的跑马灯
 248   3                      }
 249   2              
 250   2                      if( !counter_ifTipsFree &&  //指定时间没有硬件操作，led状态指示切换至空闲模式
 251   2                          (devTips_status == status_Normal) &&  //正常模式下才可以切，其他模式不能
 252   2                              countEN_ifTipsFree && //且空闲计时使能
 253   2                              ifHorsingLight_running_FLAG ){ //标志位置位才可以切
 254   3                          
 255   3                              thread_tipsGetDark(0x0F);
 256   3                              devTips_status = status_keyFree;
 257   3                      }
 258   2              }
 259   1              
 260   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      ifHorsingLight_running_FLAG = 0; //插座不存在跑马灯
                      
                      switch(devTips_status){
                      
                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
                                              (status_Relay)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 6   

                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                              
                                                                      counter_tipsAct = 1000;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 7   

                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
                                      }
                                      
                              }break;
                              
                              default:{ //插座没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      ifHorsingLight_running_FLAG = 0; //红外不存在跑马灯
                      
                      switch(devTips_status){
                      
                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
                                              (infraredStatus_GET() != infraredSMStatus_free)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
                                                                      
                                                                              tipsEn_Loop ++;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 8   

                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                              
                                                                      counter_tipsAct = 1000;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
                                      }
                                      
                              }break;
                              
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 9   

                              default:{ //插座没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #else
 481   1              switch(devTips_status){
 482   2              
 483   2                      case status_sysStandBy:{
 484   3                      
 485   3                              tips_sysStandBy();
 486   3                              
 487   3                      }break;
 488   2                              
 489   2                      case status_keyFree:{
 490   3                      
 491   3                              tips_sysButtonReales();
 492   3                      
 493   3                      }break;
 494   2                      
 495   2                      case status_Night:
 496   2                      case status_Normal:{
 497   3                              
 498   3                              static u16 tipsNwk_Counter = 0;
 499   3                              u16 code tipsNwk_Period = 500;
 500   3                              u8 relayStatus_tipsTemp = status_Relay;
 501   3                              
 502   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT1){ //随继电器
 503   4                              
 504   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 505   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存1处理
 506   4      
 507   4                              }else
 508   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT2){ //随继电器
 509   4      
 510   4                                      relayStatus_tipsTemp |= status_Relay & 0x02; //显存2加载
 511   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存2处理
 512   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 513   4      
 514   4                              }else
 515   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT3){ //随继电器
 516   4      
 517   4                                      relayStatus_tipsTemp = status_Relay; //直接加载，不处理
 518   4                                      
 519   4                              }else
 520   3                              if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN || SWITCH_TYPE == SWITCH_TYPE_FANS){ //随继电器
 521   4                                      
 522   4                                      relayStatus_tipsTemp = status_Relay;
 523   4                                      
 524   4                              }else
 525   3                              if(SWITCH_TYPE == SWITCH_TYPE_dIMMER){ //随触摸
 526   4                                      
 527   4                                      relayStatus_tipsTemp = touchPadScan_oneShoot();
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 10  

 528   4                              }
 529   3      
 530   3                              /*继电器状态指示*/
 531   3                              switch(SWITCH_TYPE){
 532   4                                      
 533   4      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)                           
                                              case SWITCH_TYPE_FANS:{
                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                                      
                                                              case 0x01:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                                      
                                                              case 0x03:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 11  

                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                              
                                                              case 0x00:
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                      }
                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)               
                                              case SWITCH_TYPE_dIMMER:{
                                                      
                                                      u8 idata TIPSBKCOLOR_USRDEF_PRESS       = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColo
             -rInsert_press; //按下色缓存
                                                      u8 idata TIPSBKCOLOR_USRDEF_UP          = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorI
             -nsert_brightness0; //弹起色缓存
                                                      
                                                      if(!status_Relay)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlight
             -ColorInsert_brightness0; //亮度为0时弹起色
                                                      else if(status_Relay == 100)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dim
             -mer_BKlightColorInsert_brightness100; //亮度为100时弹起色
                                                      else TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_
             -brightness1to99; //亮度为1-99时弹起色
                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                      
                                                              case 0x01:{
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 12  

                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case 0x04:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                      
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      
                                                              }break;
                                                      }
                                              
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
                                              case SWITCH_TYPE_SCENARIO:{
                                              
                                                      u16 code tipsCounter_scenarioKeepTrigForce = 500; //场景触发强制间隔时，tips闪烁相关周期
                                                      static bit tipsFlash_flg = 0;
                                                      
                                                      if(!counter_tipsAct){
                                                      
                                                              counter_tipsAct = tipsCounter_scenarioKeepTrigForce;
                                                              tipsFlash_flg = !tipsFlash_flg;
                                                      }
                                              
                                                      switch(scenario_ActParam.scenarioKey_currentTrig){
                                                      
                                                              case scenarioKey_current_S1:{
                                                              
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 13  

                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                                      
                                                              case scenarioKey_current_S2:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 14  

             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              case scenarioKey_current_S3:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 15  

                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                              }break;
                                                      }
                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)       
                                              case SWITCH_TYPE_HEATER:{
                                                      
                                                      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
                                                      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
                                              
                                                      switch(heater_ActParam.heater_currentActMode){
                                                      
                                                              case heaterActMode_swClose:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_close].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swKeepOpen:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_open].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
             -orGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
             -orGray_B);
                                                                      
                                                              }break;
                                                                      
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 16  

                                                              case heaterActMode_swCloseDelay30min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay30].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swCloseDelay60min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay60].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              default:{}break;
                                                      }
                                                              
                                              }break;
                                              
              #else                   
 806   4                                      case SWITCH_TYPE_CURTAIN:{
 807   5                                      
 808   5                                              switch(relayStatus_tipsTemp){ //非占位指示
 809   6                                              
 810   6                                                      case 0x01:{
 811   7                                                      
 812   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 813   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 814   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 815   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 816   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 817   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 818   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 819   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 820   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 821   7                                                      
 822   7                                                      }break;
 823   6                                                              
 824   6                                                      case 0x04:{
 825   7                                                      
 826   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 827   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 828   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 17  

             -tain_BKlightColorInsert_press].colorGray_B);
 829   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 830   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 831   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 832   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 833   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 834   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 835   7                                                      
 836   7                                                      }break;
 837   6                                                      
 838   6                                                      default:{
 839   7                                                      
 840   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 841   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 842   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 843   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 844   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 845   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 846   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 847   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 848   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 849   7                                                      
 850   7                                                      }break;
 851   6                                              }
 852   5                                      
 853   5                                      }break;
 854   4                                      
 855   4                                      case SWITCH_TYPE_SWBIT1:
 856   4                                      case SWITCH_TYPE_SWBIT2:
 857   4                                      case SWITCH_TYPE_SWBIT3:
 858   4                                      default:{ //占位指示
 859   5                                              
 860   5                                              (DEV_actReserve & 0x01)?\
 861   5                                                      ((relayStatus_tipsTemp & 0x01)?\
 862   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 863   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 864   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 865   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 866   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 867   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 868   5                                                      (tipsLED_colorSet(obj_Relay1, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 18  

             -Unused.colorGray_B));
 869   5                                              
 870   5                                              (DEV_actReserve & 0x02)?\
 871   5                                                      ((relayStatus_tipsTemp & 0x02)?\
 872   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 873   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 874   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 875   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 876   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 877   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 878   5                                                      (tipsLED_colorSet(obj_Relay2, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 879   5                                              
 880   5                                              (DEV_actReserve & 0x04)?\
 881   5                                                      ((relayStatus_tipsTemp & 0x04)?\
 882   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 883   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 884   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 885   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 886   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 887   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 888   5                                                      (tipsLED_colorSet(obj_Relay3, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 889   5                                              
 890   5                                      }break;
 891   4                                      
 892   4      #endif
 893   4                              }
 894   3                              
 895   3                              /*过期tips处理*/
 896   3                              {
 897   4                              
 898   4                                      if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal;
             - //网络开放后台tips过期恢复
 899   4                              }
 900   3                              
 901   3                              /*zigb网络状态指示*/
 902   3                              {
 903   4                                      static bit tips_Type = 0;
 904   4                                      
 905   4                                      if(tipsNwk_Counter < tipsNwk_Period)tipsNwk_Counter ++;
 906   4                                      else{
 907   5                                      
 908   5                                              tips_Type = !tips_Type;
 909   5                                              tipsNwk_Counter = 0;
 910   5                                              
 911   5                                              switch(devTips_nwkZigb){
 912   6                                              
 913   6                                                      case nwkZigb_Normal:{
 914   7                                                      
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 19  

 915   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)); //
             -常绿
 916   7                                                      
 917   7                                                      }break;
 918   6                                                      
 919   6                                                      case nwkZigb_nwkOpen:{
 920   7                                                      
 921   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -躺
 922   7                                                              
 923   7                                                      }break;
 924   6                                                      
 925   6                                                      case nwkZigb_outLine:{
 926   7                                                      
 927   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)); //
             -常红
 928   7                                                      
 929   7                                                      }break;
 930   6                                                      
 931   6                                                      case nwkZigb_reConfig:{
 932   7                                                      
 933   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 10, 0)):(tipsLED_colorSet(obj_zigbNwk, 30, 10, 0)); 
             -//常黄
 934   7                                                              
 935   7                                                      }break;
 936   6                                                      
 937   6                                                      case nwkZigb_nwkREQ:{
 938   7                                                      
 939   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 10, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -黄闪
 940   7                                                      
 941   7                                                      }break;
 942   6                                                      
 943   6                                                      case nwkZigb_hold:{
 944   7                                                      
 945   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -焐
 946   7                                                              
 947   7                                                      }break;
 948   6                                                      
 949   6                                                      default:{
 950   7                                                      
 951   7                                                              devTips_nwkZigb = nwkZigb_Normal;
 952   7                                                      
 953   7                                                      }break;
 954   6                                              }
 955   5                                      }
 956   4                              }
 957   3                              
 958   3                      }break;
 959   2                      
 960   2                      case status_tipsNwkOpen:{
 961   3                              
 962   3                              if(tipsTimeCount_zigNwkOpen)tips_specified(1);
 963   3                              else{
 964   4      
 965   4                                      tips_statusChangeToNormal();
 966   4      #if(DEBUG_LOGOUT_EN == 1)
 967   4                                      { //输出打印，谨记 用后注释，否则占用大量代码空间
 968   5                                              memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
 969   5                                              sprintf(log_buf, "zigbNwk Close.\n");
 970   5                                              PrintString1_logOut(log_buf);
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 20  

 971   5                                      }                       
 972   4      #endif  
 973   4                              }
 974   3                              
 975   3                      }break;
 976   2                      
 977   2                      case status_tipsNwkFind:{
 978   3                      
 979   3                              tips_specified(0);
 980   3                      
 981   3                      }break;
 982   2                      
 983   2                      case status_devHold:{
 984   3                      
 985   3                              tips_warning();
 986   3                              
 987   3                      }break;
 988   2                      
 989   2                      case status_touchReset:{
 990   3                      
 991   3                              if(tipsTimeCount_touchReset)tips_sysTouchReset();
 992   3                              else{
 993   4                              
 994   4                                      tips_statusChangeToNormal();
 995   4      #if(DEBUG_LOGOUT_EN == 1)
 996   4                                      { //输出打印，谨记 用后注释，否则占用大量代码空间
 997   5                                              memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
 998   5                                              sprintf(log_buf, "touch reset complete.\n");
 999   5                                              PrintString1_logOut(log_buf);
1000   5                                      }                       
1001   4      #endif  
1002   4                              }
1003   3                              
1004   3                      }break;
1005   2                              
1006   2                      default:{
1007   3                      
1008   3                              devTips_status = status_Normal;
1009   3                              
1010   3                      }break;
1011   2              }
1012   1      #endif
1013   1      }
1014          
1015          void tipsLED_colorSet(tipsLED_Obj obj, u8 gray_R, u8 gray_G, u8 gray_B){
1016   1      
1017   1              if((devTips_status == status_Normal) ||
1018   1                 (devTips_status == status_Night)){
1019   2                         
1020   2                      if(devTips_status == status_Night){     //夜间模式，背光亮度调整
1021   3                              
1022   3                              u8 code bright_coef = 4;
1023   3                      
1024   3                              gray_R /= bright_coef;
1025   3                              gray_G /= bright_coef;
1026   3                              gray_B /= bright_coef;
1027   3                      }
1028   2              
1029   2                      switch(obj){
1030   3                      
1031   3                              case obj_Relay1:{
1032   4                              
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 21  

1033   4                                      relay1_Tips.colorGray_R = gray_R;
1034   4                                      relay1_Tips.colorGray_G = gray_G;
1035   4                                      relay1_Tips.colorGray_B = gray_B;
1036   4                                      
1037   4                              }break;
1038   3                              
1039   3                              case obj_Relay2:{
1040   4                              
1041   4                                      relay2_Tips.colorGray_R = gray_R;
1042   4                                      relay2_Tips.colorGray_G = gray_G;
1043   4                                      relay2_Tips.colorGray_B = gray_B;
1044   4                                      
1045   4                              }break;
1046   3                              
1047   3                              case obj_Relay3:{
1048   4                              
1049   4                                      relay3_Tips.colorGray_R = gray_R;
1050   4                                      relay3_Tips.colorGray_G = gray_G;
1051   4                                      relay3_Tips.colorGray_B = gray_B;
1052   4                                      
1053   4                              }break;
1054   3                                              
1055   3                              case obj_zigbNwk:{
1056   4                              
1057   4                                      zigbNwk_Tips.colorGray_R = gray_R;
1058   4                                      zigbNwk_Tips.colorGray_G = gray_G;
1059   4                                      zigbNwk_Tips.colorGray_B = gray_B;
1060   4                                      
1061   4                              }break;
1062   3                              
1063   3                              default:break;
1064   3                      }
1065   2              }
1066   1      }
1067          
1068          void tips_warning(void){
1069   1      
1070   1              static u8 xdata tipsStep = 0;
1071   1              
1072   1              switch(tipsStep){
1073   2              
1074   2                      case 0:{
1075   3                      
1076   3                              counter_tipsAct = 1000;
1077   3                              tipsStep = 1;
1078   3                      
1079   3                      }break;
1080   2                      
1081   2                      case 1:{
1082   3                      
1083   3                              if(counter_tipsAct){
1084   4                                      
1085   4                                      if(counter_tipsAct % 199 > 99){
1086   5                                      
1087   5                                              zigbNwk_Tips.colorGray_R = \
1088   5                                              relay3_Tips.colorGray_R = \
1089   5                                              relay2_Tips.colorGray_R = \
1090   5                                              relay1_Tips.colorGray_R = 31;
1091   5                                      
1092   5                                      }else{
1093   5                                      
1094   5                                              zigbNwk_Tips.colorGray_R = \
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 22  

1095   5                                              relay3_Tips.colorGray_R = \
1096   5                                              relay2_Tips.colorGray_R = \
1097   5                                              relay1_Tips.colorGray_R = 0;
1098   5                                      }
1099   4                              
1100   4                              }else{
1101   4                              
1102   4                                      counter_tipsAct = 600;
1103   4                                      thread_tipsGetDark(0x0F);
1104   4                                      tipsStep = 2;
1105   4                              }
1106   3                      
1107   3                      }break;
1108   2                      
1109   2                      
1110   2                      case 2:{
1111   3                      
1112   3                              if(!counter_tipsAct)tipsStep = 0;
1113   3                              
1114   3                      }break;
1115   2                      
1116   2                      default:{
1117   3                      
1118   3                              tipsStep = 0;
1119   3                      
1120   3                      }break;
1121   2              }
1122   1      }
1123          
1124          void tips_breath(void){
1125   1      
1126   1              static u8       localTips_Count = COLORGRAY_MAX - 1; //步骤中期切换初始值
1127   1              static bit      count_FLG = 1;
1128   1              static u8       tipsStep = 0;
1129   1      
1130   1              u8 code speed = 3;
1131   1              u8 code step_period = 3;
1132   1              
1133   1      //      if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期
             - 切换到下一步骤
1134   1              if(!localTips_Count)count_FLG = 1;
1135   1              else 
1136   1              if(localTips_Count >= (COLORGRAY_MAX - 1)){
1137   2                      
1138   2                      count_FLG = 0;
1139   2                      
1140   2                      localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1141   2                      (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1142   2              }
1143   1              
1144   1              if(!counter_tipsAct){
1145   2              
1146   2                      (!count_FLG)?(counter_tipsAct = speed * (localTips_Count --)):(counter_tipsAct = speed * (localTips_Coun
             -t ++)); //更新单周期时间
1147   2              }       
1148   1              
1149   1              switch(tipsStep){
1150   2              
1151   2                      case 0:{
1152   3                      
1153   3                              zigbNwk_Tips.colorGray_G = 31 - localTips_Count;
1154   3                              
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 23  

1155   3                      }break;
1156   2                      
1157   2                      case 2:{
1158   3                      
1159   3                              relay3_Tips.colorGray_R = 31 - localTips_Count;
1160   3                              
1161   3                      }break;
1162   2                      
1163   2                      default:break;
1164   2              }
1165   1      }
1166          
1167          void tips_fadeOut(void){
1168   1      
1169   1              static u8       localTips_Count = 0; //步骤初期切换初始值
1170   1              static bit      count_FLG = 1;
1171   1              static u8       tipsStep = 0;
1172   1              static u8       pwmType_A = 0,
1173   1                                      pwmType_B = 0,
1174   1                                      pwmType_C = 0,
1175   1                                      pwmType_D = 0;
1176   1              
1177   1              u8 code speed = 3;
1178   1              u8 code step_period = 1;
1179   1              
1180   1              if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期期 
             -切换到下一步骤
1181   1              if(!localTips_Count)count_FLG = 1;
1182   1              else 
1183   1              if(localTips_Count > (COLORGRAY_MAX * 4)){
1184   2              
1185   2                      count_FLG = 0;
1186   2                      
1187   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1188   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1189   2              }
1190   1              
1191   1              if(!counter_tipsAct){
1192   2              
1193   2                      (!count_FLG)?(counter_tipsAct = speed * ((localTips_Count --) % COLORGRAY_MAX)):(counter_tipsAct = speed
             - * ((localTips_Count ++) % COLORGRAY_MAX)); //更新单周期时间
1194   2                      
1195   2                      if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1196   2                      if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1197   2                      if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1198   2                      if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1199   2              }
1200   1              
1201   1              switch(tipsStep){
1202   2              
1203   2                      case 0:{
1204   3                              
1205   3                              if(count_FLG){ 
1206   4                                      
1207   4                                      zigbNwk_Tips.colorGray_B = pwmType_A;
1208   4                                      relay3_Tips.colorGray_B = pwmType_B;
1209   4                                      relay2_Tips.colorGray_B = pwmType_C;
1210   4                                      relay1_Tips.colorGray_B = pwmType_D;
1211   4                                      
1212   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1213   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1214   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 24  

1215   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1216   4                                      
1217   4                              }else{ 
1218   4                                      
1219   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1220   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1221   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1222   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1223   4                                      
1224   4                                      zigbNwk_Tips.colorGray_B = pwmType_D;
1225   4                                      relay3_Tips.colorGray_B = pwmType_C;
1226   4                                      relay2_Tips.colorGray_B = pwmType_B;
1227   4                                      relay1_Tips.colorGray_B = pwmType_A;
1228   4                              }
1229   3                              
1230   3                      }break;
1231   2                              
1232   2                      case 1:{
1233   3                              
1234   3                              if(count_FLG){ 
1235   4                                      
1236   4                                      zigbNwk_Tips.colorGray_G = pwmType_A / 4;
1237   4                                      relay3_Tips.colorGray_G = pwmType_B / 4;
1238   4                                      relay2_Tips.colorGray_G = pwmType_C / 4;
1239   4                                      relay1_Tips.colorGray_G = pwmType_D / 4;
1240   4                                      
1241   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1242   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1243   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
1244   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1245   4                                      
1246   4                              }else{ 
1247   4                                      
1248   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1249   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1250   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1251   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1252   4                                      
1253   4                                      zigbNwk_Tips.colorGray_G = pwmType_D / 4;
1254   4                                      relay3_Tips.colorGray_G = pwmType_C / 4;
1255   4                                      relay2_Tips.colorGray_G = pwmType_B / 4;
1256   4                                      relay1_Tips.colorGray_G = pwmType_A / 4;
1257   4                              }
1258   3                              
1259   3                      }break;
1260   2                              
1261   2                      default:break;
1262   2              }
1263   1      }
1264          
1265          void tips_specified(u8 tips_Type){ //tips类别
1266   1      
1267   1              static u8       localTips_Count = 0; //步骤初期切换初始值
1268   1              static bit      count_FLG = 1;
1269   1              static u8       tipsStep = 0;
1270   1              static u8       pwmType_A = 0,
1271   1                                      pwmType_B = 0,
1272   1                                      pwmType_C = 0,
1273   1                                      pwmType_D = 0;
1274   1              
1275   1              u8 code speed_Mol = 5,
1276   1                      speed_Den = 4;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 25  

1277   1              u8 code step_period = 0;
1278   1              
1279   1              if(!localTips_Count && !count_FLG){
1280   2              
1281   2                      if(tipsStep < step_period)tipsStep ++; //步骤初始期期 切换到下一步骤
1282   2                      else{
1283   3                      
1284   3                              tipsStep = 0;
1285   3                              
1286   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1287   3                      }
1288   2              }
1289   1              if(!localTips_Count)count_FLG = 1;
1290   1              else 
1291   1              if(localTips_Count > 80){
1292   2              
1293   2                      count_FLG = 0;
1294   2                      
1295   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1296   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1297   2              }
1298   1              
1299   1              if(!counter_tipsAct){
1300   2              
1301   2                      (!count_FLG)?(counter_tipsAct = ((localTips_Count --) % COLORGRAY_MAX) / speed_Mol * speed_Den):(counter
             -_tipsAct = ((localTips_Count ++) % COLORGRAY_MAX) / speed_Mol * speed_Den); //更新单周期时间
1302   2                      
1303   2                      if(localTips_Count >= 00 && localTips_Count < 32)pwmType_A = localTips_Count - 0; 
1304   2                      if(localTips_Count >= 16 && localTips_Count < 48)pwmType_B = localTips_Count - 16;
1305   2                      if(localTips_Count >= 32 && localTips_Count < 64)pwmType_C = localTips_Count - 32;
1306   2                      if(localTips_Count >= 48 && localTips_Count < 80)pwmType_D = localTips_Count - 48;
1307   2              }
1308   1              
1309   1              switch(tips_Type){
1310   2              
1311   2                      case 0:{
1312   3                      
1313   3                              switch(tipsStep){
1314   4                              
1315   4                                      case 0:{
1316   5                                              
1317   5                                              if(count_FLG){ 
1318   6                                                      
1319   6                                                      if(localTips_Count < 46){
1320   7                                                      
1321   7                                                              if(localTips_Count % 15 > 10){
1322   8                                                              
1323   8                                                                      zigbNwk_Tips.colorGray_R = 31;
1324   8                                                                      zigbNwk_Tips.colorGray_G = 10;
1325   8                                                                      
1326   8                                                              }else{
1327   8                                                              
1328   8                                                                      zigbNwk_Tips.colorGray_R = 0;
1329   8                                                                      zigbNwk_Tips.colorGray_G = 0;
1330   8                                                              }
1331   7                                                      
1332   7                                                      }else{
1333   7                                                      
1334   7                                                              if(localTips_Count > 45){zigbNwk_Tips.colorGray_R = 31; zigbNwk_Tips.colorGray_G = 10;}
1335   7                                                              if(localTips_Count > 50){relay3_Tips.colorGray_R = 31; relay3_Tips.colorGray_G = 10;}
1336   7                                                              if(localTips_Count > 60){relay2_Tips.colorGray_R = 31; relay2_Tips.colorGray_G = 10;}
1337   7                                                              if(localTips_Count > 70){relay1_Tips.colorGray_R = 31; relay1_Tips.colorGray_G = 10;}
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 26  

1338   7                                                      }
1339   6                                                      
1340   6                                              }else{ 
1341   6                                                      
1342   6                                                      zigbNwk_Tips.colorGray_R = pwmType_D;
1343   6                                                      relay3_Tips.colorGray_R = pwmType_C;
1344   6                                                      relay2_Tips.colorGray_R = pwmType_B;
1345   6                                                      relay1_Tips.colorGray_R = pwmType_A;
1346   6                                                      
1347   6                                                      zigbNwk_Tips.colorGray_G = pwmType_D / 3;
1348   6                                                      relay3_Tips.colorGray_G = pwmType_C / 3;
1349   6                                                      relay2_Tips.colorGray_G = pwmType_B / 3;
1350   6                                                      relay1_Tips.colorGray_G = pwmType_A / 3;
1351   6                                              }
1352   5                                              
1353   5                                      }break;
1354   4                                              
1355   4                                      default:break;
1356   4                              }
1357   3                              
1358   3                      }break;
1359   2                      
1360   2                      case 1:{
1361   3                      
1362   3                              switch(tipsStep){
1363   4                              
1364   4                                      case 0:{
1365   5                                              
1366   5                                              if(count_FLG){ 
1367   6                                                      
1368   6                                                      if(localTips_Count < 46){
1369   7                                                      
1370   7      //                                                      if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_B = 31;else zigbNwk_Tips.colorGray_B = 0;
1371   7                                                              if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_G = 31;else zigbNwk_Tips.colorGray_G = 0;
1372   7                                                      
1373   7                                                      }else{
1374   7                                                      
1375   7      //                                                      if(localTips_Count > 45)relay1_Tips.colorGray_B = 31;
1376   7      //                                                      if(localTips_Count > 50)relay2_Tips.colorGray_B = 31;
1377   7      //                                                      if(localTips_Count > 60)relay3_Tips.colorGray_B = 31;
1378   7      //                                                      if(localTips_Count > 70)zigbNwk_Tips.colorGray_B = 31;
1379   7                                                              
1380   7                                                              if(localTips_Count > 45)relay1_Tips.colorGray_G = 31;
1381   7                                                              if(localTips_Count > 50)relay2_Tips.colorGray_G = 31;
1382   7                                                              if(localTips_Count > 60)relay3_Tips.colorGray_G = 31;
1383   7                                                              if(localTips_Count > 70)zigbNwk_Tips.colorGray_G = 31;
1384   7                                                      }
1385   6                                                      
1386   6                                              }else{ 
1387   6                                                      
1388   6      //                                              relay1_Tips.colorGray_B = pwmType_D;
1389   6      //                                              relay2_Tips.colorGray_B = pwmType_C;
1390   6      //                                              relay3_Tips.colorGray_B = pwmType_B;
1391   6      //                                              zigbNwk_Tips.colorGray_B = pwmType_A;
1392   6                                                      
1393   6                                                      relay1_Tips.colorGray_G = pwmType_D;
1394   6                                                      relay2_Tips.colorGray_G = pwmType_C;
1395   6                                                      relay3_Tips.colorGray_G = pwmType_B;
1396   6                                                      zigbNwk_Tips.colorGray_G = pwmType_A;
1397   6                                              }
1398   5                                              
1399   5                                      }break;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 27  

1400   4                                              
1401   4                                      default:break;
1402   4                              }
1403   3                              
1404   3                      }break;
1405   2                      
1406   2                      default:break;
1407   2              }
1408   1      }
1409          
1410          void tips_sysTouchReset(void){
1411   1              
1412   1              static bit tipsStep = 0;
1413   1      
1414   1              if(counter_tipsAct){
1415   2              
1416   2                      if(tipsStep){
1417   3                      
1418   3                              zigbNwk_Tips.colorGray_R = 0;
1419   3                              relay1_Tips.colorGray_R = 0;
1420   3                              relay2_Tips.colorGray_R = 0;
1421   3                              relay3_Tips.colorGray_R = 0;
1422   3                              
1423   3                      }else{
1424   3                      
1425   3                              zigbNwk_Tips.colorGray_R = 31;
1426   3                              relay1_Tips.colorGray_R = 31;
1427   3                              relay2_Tips.colorGray_R = 31;
1428   3                              relay3_Tips.colorGray_R = 31;
1429   3                      }
1430   2                      
1431   2              }else{
1432   2              
1433   2                      counter_tipsAct = 400;
1434   2                      tipsStep = !tipsStep;
1435   2              }
1436   1      }
1437          
1438          void tips_sysStandBy(void){
1439   1      
1440   1              zigbNwk_Tips.colorGray_R = 31;
1441   1              relay1_Tips.colorGray_R = 31;
1442   1              relay2_Tips.colorGray_R = 31;
1443   1              relay3_Tips.colorGray_R = 31;
1444   1      }
1445          
1446          void tips_sysButtonReales(void){
1447   1      
1448   1      //      u8 code timUnit_period = 0;
1449   1      //      static u8 timUnit_count = 0;
1450   1              
1451   1              static u8 localTips_Count = 0;
1452   1              u8 code localTips_Period = 128;
1453   1              static u8 tipsStep = 0;
1454   1              static u8 pwmType_A = 0,
1455   1                            pwmType_B = 0,
1456   1                                pwmType_C = 0,
1457   1                                pwmType_D = 0;
1458   1              
1459   1              if(!counter_tipsAct){
1460   2                      
1461   2                      counter_tipsAct = 12; //更新单周期时间(@50us中断，中断频率为网关主机两倍)
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 28  

1462   2              
1463   2                      if(localTips_Count > localTips_Period){
1464   3                      
1465   3                              localTips_Count = 0;
1466   3                              (tipsStep > 7)?(tipsStep = 0):(tipsStep ++);
1467   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1468   3                      }
1469   2                      else{
1470   3                      
1471   3                              localTips_Count ++;
1472   3                              
1473   3                              if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1474   3                              if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1475   3                              if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1476   3                              if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1477   3                      }
1478   2              }
1479   1              
1480   1              switch(tipsStep){
1481   2                      
1482   2      //              case 0:{
1483   2      //              
1484   2      //                      zigbNwk_Tips.colorGray_R        = pwmType_A / 3;
1485   2      //                      relay3_Tips.colorGray_R         = pwmType_B / 3;
1486   2      //                      relay2_Tips.colorGray_R         = pwmType_C / 3;
1487   2      //                      relay1_Tips.colorGray_R         = pwmType_D / 3;
1488   2      //                      
1489   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1490   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
1491   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1492   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1493   2      //                      
1494   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 2;
1495   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 2;
1496   2      //                      relay2_Tips.colorGray_B         = pwmType_C / 2;
1497   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 2;
1498   2      //              
1499   2      //              }break;
1500   2      //              
1501   2      //              case 1:{
1502   2      //              
1503   2      //                      zigbNwk_Tips.colorGray_R        = 5 + (pwmType_A - 5);
1504   2      //                      relay3_Tips.colorGray_R         = 5 + (pwmType_B - 5);
1505   2      //                      relay2_Tips.colorGray_R         = 5 + (pwmType_C - 5);
1506   2      //                      relay1_Tips.colorGray_R         = 5 + (pwmType_D - 5);
1507   2      //                      
1508   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1509   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1510   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1511   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
1512   2      //                      
1513   2      //                      zigbNwk_Tips.colorGray_B        = 7 - pwmType_A / 2;
1514   2      //                      relay3_Tips.colorGray_B         = 7 - pwmType_B / 2;
1515   2      //                      relay2_Tips.colorGray_B         = 7 - pwmType_C / 2;
1516   2      //                      relay1_Tips.colorGray_B         = 7 - pwmType_D / 2;
1517   2      //              
1518   2      //              }break;
1519   2      //              
1520   2      //              case 2:{
1521   2      //                      
1522   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1523   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 29  

1524   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1525   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1526   2      //              
1527   2      //              }break;
1528   2      //                      
1529   2      //              case 3:{
1530   2      //              
1531   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1532   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1533   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1534   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
1535   2      //                      
1536   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 5;
1537   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 5;
1538   2      //                      relay2_Tips.colorGray_B         = pwmType_C /5;
1539   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 5;
1540   2      //              
1541   2      //              }break;
1542   2      //                      
1543   2      //              case 4:{
1544   2      //                      
1545   2      //                      zigbNwk_Tips.colorGray_R        = 15 - pwmType_A;
1546   2      //                      relay3_Tips.colorGray_R         = 15 - pwmType_B;
1547   2      //                      relay2_Tips.colorGray_R         = 15 - pwmType_C;
1548   2      //                      relay1_Tips.colorGray_R         = 15 - pwmType_D;
1549   2      
1550   2      //                      zigbNwk_Tips.colorGray_B        = 3 + (pwmType_A - 3);
1551   2      //                      relay3_Tips.colorGray_B         = 3 + (pwmType_B - 3);
1552   2      //                      relay2_Tips.colorGray_B         = 3 + (pwmType_C - 3);
1553   2      //                      relay1_Tips.colorGray_B         = 3 + (pwmType_D - 3);
1554   2      //                      
1555   2      //              }break;
1556   2      //                      
1557   2      //              case 5:{
1558   2      
1559   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1560   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1561   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1562   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1563   2      //                      
1564   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A;
1565   2      //                      relay3_Tips.colorGray_G         = pwmType_B;
1566   2      //                      relay2_Tips.colorGray_G         = pwmType_C;
1567   2      //                      relay1_Tips.colorGray_G         = pwmType_D;
1568   2      //                      
1569   2      //              }break;
1570   2      //                      
1571   2      //              case 6:{
1572   2      //              
1573   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A;
1574   2      //                      relay3_Tips.colorGray_B         = pwmType_B;
1575   2      //                      relay2_Tips.colorGray_B         = pwmType_C;
1576   2      //                      relay1_Tips.colorGray_B         = pwmType_D;
1577   2      //                      
1578   2      //                      zigbNwk_Tips.colorGray_G        = 15 - pwmType_A + 3;
1579   2      //                      relay3_Tips.colorGray_G         = 15 - pwmType_B + 3;
1580   2      //                      relay2_Tips.colorGray_G         = 15 - pwmType_C + 3;
1581   2      //                      relay1_Tips.colorGray_G         = 15 - pwmType_D + 3;
1582   2      //              
1583   2      //              }break;
1584   2      //              
1585   2      //              case 7:{
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 30  

1586   2      //              
1587   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1588   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1589   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1590   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1591   2      //                      
1592   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1593   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_A / 5;
1594   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_A / 5;
1595   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_A / 5;
1596   2      //                      
1597   2      //              }break;
1598   2              
1599   2                      case 0:{ /*绿*///绿起
1600   3                              
1601   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 5;
1602   3                              relay3_Tips.colorGray_G = pwmType_B / 5;
1603   3                              relay2_Tips.colorGray_G = pwmType_C / 5;
1604   3                              relay1_Tips.colorGray_G = pwmType_D / 5;
1605   3                              
1606   3                      }break;
1607   2                      
1608   2                      case 1:{ /*黄*///红起
1609   3                              
1610   3                              zigbNwk_Tips.colorGray_R = pwmType_A;
1611   3                              relay3_Tips.colorGray_R = pwmType_B;
1612   3                              relay2_Tips.colorGray_R = pwmType_C;
1613   3                              relay1_Tips.colorGray_R = pwmType_D;
1614   3                              
1615   3                      }break;
1616   2                      
1617   2                      case 2:{ /*红*///绿消
1618   3                              
1619   3                              zigbNwk_Tips.colorGray_G = 6 - pwmType_A / 5;
1620   3                              relay3_Tips.colorGray_G = 6 - pwmType_B / 5;
1621   3                              relay2_Tips.colorGray_G = 6 - pwmType_C / 5;
1622   3                              relay1_Tips.colorGray_G = 6 - pwmType_D / 5;
1623   3                              
1624   3                      }break;
1625   2                      
1626   2                      case 3:{ /*粉*///蓝起
1627   3                              
1628   3                              zigbNwk_Tips.colorGray_B = pwmType_A / 2;
1629   3                              relay3_Tips.colorGray_B = pwmType_B / 2;
1630   3                              relay2_Tips.colorGray_B = pwmType_C / 2;
1631   3                              relay1_Tips.colorGray_B = pwmType_D / 2;
1632   3                              
1633   3                      }break;
1634   2                      
1635   2                      case 4:{ /*蓝*///红消
1636   3                      
1637   3                              zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1638   3                              relay3_Tips.colorGray_R = 31 - pwmType_B;
1639   3                              relay2_Tips.colorGray_R = 31 - pwmType_C;
1640   3                              relay1_Tips.colorGray_R = 31 - pwmType_D;
1641   3                              
1642   3                      }break;
1643   2                      
1644   2                      case 5:{ /*白*///绿起红起
1645   3                      
1646   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 3;
1647   3                              relay3_Tips.colorGray_G = pwmType_B / 3;
C51 COMPILER V9.54   TIPS                                                                  01/11/2019 12:04:13 PAGE 31  

1648   3                              relay2_Tips.colorGray_G = pwmType_C / 3;
1649   3                              relay1_Tips.colorGray_G = pwmType_D / 3;
1650   3                              
1651   3                              zigbNwk_Tips.colorGray_R = pwmType_A / 2;
1652   3                              relay3_Tips.colorGray_R = pwmType_B / 2;
1653   3                              relay2_Tips.colorGray_R = pwmType_C / 2;
1654   3                              relay1_Tips.colorGray_R = pwmType_D / 2;
1655   3                              
1656   3                      }break;
1657   2                      
1658   2                      case 6:{ /*dark*///全消
1659   3                      
1660   3                              zigbNwk_Tips.colorGray_B = 15 - pwmType_A / 2;
1661   3                              relay3_Tips.colorGray_B = 15 - pwmType_B / 2;
1662   3                              relay2_Tips.colorGray_B = 15 - pwmType_C / 2;
1663   3                              relay1_Tips.colorGray_B = 15 - pwmType_D / 2;
1664   3                              
1665   3                              zigbNwk_Tips.colorGray_G = 10 - pwmType_A / 3;
1666   3                              relay3_Tips.colorGray_G = 10 - pwmType_B / 3;
1667   3                              relay2_Tips.colorGray_G = 10 - pwmType_C / 3;
1668   3                              relay1_Tips.colorGray_G = 10 - pwmType_D / 3;
1669   3                              
1670   3                              zigbNwk_Tips.colorGray_R = 15 - pwmType_A / 2;
1671   3                              relay3_Tips.colorGray_R = 15 - pwmType_B / 2;
1672   3                              relay2_Tips.colorGray_R = 15 - pwmType_C / 2;
1673   3                              relay1_Tips.colorGray_R = 15 - pwmType_D / 2;
1674   3                              
1675   3                      }break;
1676   2                      
1677   2                      default:{}break;
1678   2              }
1679   1      }
1680          
1681          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3460    ----
   CONSTANT SIZE    =     83    ----
   XDATA SIZE       =     25    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      7    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
