C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TIPS
OBJECT MODULE PLACED IN .\Output\Tips.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Usr\Tips.c OMF2 OPTIMIZE(9,SPEED) BROWSE INCDIR(.\Usr;.\Usr_lib;.\std_Li
                    -b;.\dataTrans;.\Actuator;.\Sensor;.\hwDriver) DEBUG PRINT(.\Listings\Tips.lst) OBJECT(.\Output\Tips.obj)

line level    source

   1          #include "Tips.h"
   2          
   3          #include "USART.h"
   4          
   5          #include "string.h"
   6          #include "stdio.h"
   7          
   8          #include "driver_I2C_HXD019D.h"
   9          
  10          #include "Relay.h"
  11          #include "dataManage.h"
  12          #include "timerAct.h"
  13          #include "appTimer.h"
  14          #include "usrKin.h"
  15          
  16          #include "eeprom.h"
  17          #include "delay.h"
  18          
  19          color_Attr code color_Tab[TIPS_SWBKCOLOR_TYPENUM] = { //选色表
  20          
  21                  { 0,  0,  0}, {20, 10, 31}, {31,  0,  0}, //黑0、白1、红2
  22                  {31,  0, 10}, { 8,  0, 16}, {0,  31,  0}, //粉3、紫4、绿5
  23                  {16, 31,  0}, {31, 10,  0}, {0,   0, 31}, //橙6、靛7、蓝8
  24                  { 0, 10, 31}, //冰蓝9
  25          };
  26          
  27          color_Attr xdata relay1_Tips    = {0};
  28          color_Attr xdata relay2_Tips    = {0};
  29          color_Attr xdata relay3_Tips    = {0};
  30          color_Attr xdata zigbNwk_Tips   = {0};
  31          
  32          bkLightColorInsert_paramAttr xdata devBackgroundLight_param = {0}; //背光灯索引参数缓存
  33          
  34          color_Attr code  tips_relayUnused= {0, 0, 0}; //无效继电器背景灯颜色
  35          
  36          bit     idata ifHorsingLight_running_FLAG = 1;  //跑马灯运行标志位  默认开
  37          
  38          tips_Status devTips_status              = status_Null; //系统状态指示
  39          tips_nwkZigbStatus devTips_nwkZigb = nwkZigb_Normal; //zigbee网络状态指示灯
  40          
  41          u16 xdata counter_tipsAct               = 0; //tips 调色灯调色单周期
  42          u8  xdata counter_ifTipsFree    = TIPS_SWFREELOOP_TIME; //触摸空闲释放计时变量
  43          bit idata countEN_ifTipsFree    = 0; //触摸空闲释放计时使能
  44          u8  xdata tipsTimeCount_zigNwkOpen      = 0; //zigb 网络开放tips时间计时变量
  45          u8      xdata tipsTimeCount_touchReset  = 0; //触摸IC复位tips计时变量
  46          u8      xdata tipsTimeCount_factoryRecover = 0; //恢复出厂tips倒计时变量
  47          
  48          sound_Attr xdata devTips_beep   = {0, 0, 0};
  49          enum_beeps xdata dev_statusBeeps= beepsMode_null; //状态机状态：蜂鸣器状态指示
  50          
  51          void tipLED_pinInit(void){
  52   1      
  53   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      P5M1 &= ~(0x10);
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 2   

                      P5M0 |= 0x10;
                      
                      P2M1 &= ~(0x20);
                      P2M0 |= 0x20;
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~(0x0C);
                      P2M0 |= 0x0C;
                      
              #else
  65   1              P2M1 &= ~0xF7;
  66   1              P2M0 |= 0xF7;
  67   1              
  68   1              P0M1 &= ~0x0B;
  69   1              P0M0 |= 0x0B;
  70   1              
  71   1              P5M1 &= ~0x30;
  72   1              P5M0 |= 0x30;
  73   1              
  74   1      #endif
  75   1              
  76   1              devTips_status = status_Normal;
  77   1              
  78   1              tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  79   1              tipsLED_colorSet(obj_Relay2, 0, 0, 0);
  80   1              tipsLED_colorSet(obj_Relay3, 0, 0, 0);
  81   1              tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
  82   1              
  83   1      //      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
  84   1      //      tipsLED_colorSet(obj_Relay2, 0, 0, 0);
  85   1      //      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
  86   1      //      tipsLED_colorSet(obj_zigbNwk,0, 0, 0);
  87   1      }
  88          
  89          void pinBeep_Init(void){
  90   1      
  91   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      P2M1 &= ~0x01;
                      P2M0 |= 0x01;
                      
              #else
  96   1              P3M1 &= ~(0x04);
  97   1              P3M0 |= 0x04;
  98   1              
  99   1      #endif
 100   1      }
 101          
 102          /*从内部eeprom更新tips背景灯色*/
 103          void ledBKGColorSw_Reales(void){
 104   1      
 105   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 106   1      //      EEPROM_read_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 107   1      //      
 108   1      //      if(tipsInsert_swLedBKG_ON > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_ON = TIPSBKCOLOR_DEFAULT_ON;
 109   1      //      if(tipsInsert_swLedBKG_OFF > TIPS_SWBKCOLOR_TYPENUM - 1)tipsInsert_swLedBKG_OFF = TIPSBKCOLOR_DEFAULT_O
             -FF;
 110   1      //      
 111   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround, &tipsInsert_swLedBKG_ON, 1);
 112   1      //      coverEEPROM_write_n(EEPROM_ADDR_ledSWBackGround + 1, &tipsInsert_swLedBKG_OFF, 1);
 113   1              
 114   1              EEPROM_read_n(EEPROM_ADDR_ledSWBackGround, (u8 *)&devBackgroundLight_param, sizeof(bkLightColorInsert_par
             -amAttr)); //参数读取
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 3   

 115   1              
 116   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS) //参数预处理
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0 = 0; //黑
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1 = 5; //绿
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2 = 8; //蓝
                      if(devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 > (TIPS_SWBKCOLOR_TYPENUM - 
             -1))devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3 = 2; //红
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER) //参数预处理
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press >                       (TIPS_SWBKCOLOR_TY
             -PENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_press = 0; //黑
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 >         (TIPS_SWBKCOLO
             -R_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness0 = 5; //绿
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 > (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness1to99 = 8; //蓝
                      if(devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 >       (TIPS_SWBKCO
             -LOR_TYPENUM - 1))devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_brightness100 = 2; //红
                      
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS) //参数预处理，无特殊，随默认
              //#elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED) //参数预处理，无特殊，随默认
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO) //参数预处理
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig > (TIPS_SWBKCOLOR_TYP
             -ENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig = 8; //蓝
                      if(devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig > (TIPS_SWBKCOLOR_T
             -YPENUM - 1))devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notrig = 5; //绿
              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER) //参数预处理，热水器为强制背光
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open = 2; //红
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close = 0; //黑
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay30 = 5; //绿
                      devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDelay60 = 8; //蓝
              
              #else
 141   1              switch(SWITCH_TYPE){
 142   2              
 143   2                      case SWITCH_TYPE_CURTAIN:{
 144   3                      
 145   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_press > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.c
             -uertain_BKlightColorInsert_press = 8; //蓝
 146   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuertain_BKlightColorIn
             -sert_bounce > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.
             -cuertain_BKlightColorInsert_bounce = 5; //绿
 147   3                      
 148   3                      }break;
 149   2                      
 150   2                      case SWITCH_TYPE_SWBIT1:
 151   2                      case SWITCH_TYPE_SWBIT2:
 152   2                      case SWITCH_TYPE_SWBIT3:{
 153   3                              
 154   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_open > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_B
             -KlightColorInsert_open = 8; //蓝
 155   3                              if(devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_BKlightColorInsert
             -_close > (TIPS_SWBKCOLOR_TYPENUM - 1))devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bit_
             -BKlightColorInsert_close = 5; //绿
 156   3                              
 157   3                      }break;
 158   2                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 4   

 159   2                      default:{}break;
 160   2              }
 161   1      
 162   1      #endif
 163   1      }
 164          
 165          /*触发非阻塞beeps_Tips*/
 166          void beeps_usrActive(u8 tons, u8 time, u8 loop){ //音调 时间 次数
 167   1      
 168   1              if(!ifNightMode_sw_running_FLAG){ //非夜间模式声音有效
 169   2              
 170   2                      devTips_beep.tips_Period = tons;
 171   2                      devTips_beep.tips_time = time;
 172   2                      devTips_beep.tips_loop = loop;
 173   2                      dev_statusBeeps = beepsMode_standBy;
 174   2              }
 175   1      }
 176          
 177          void thread_tipsGetDark(u8 funSet){ //占位清色值
 178   1      
 179   1              if((funSet & 0x01) >> 0)relay1_Tips.colorGray_R = relay1_Tips.colorGray_G = relay1_Tips.colorGray_B = 0;
 180   1              if((funSet & 0x02) >> 1)relay2_Tips.colorGray_R = relay2_Tips.colorGray_G = relay2_Tips.colorGray_B = 0;
 181   1              if((funSet & 0x04) >> 2)relay3_Tips.colorGray_R = relay3_Tips.colorGray_G = relay3_Tips.colorGray_B = 0;
 182   1              if((funSet & 0x08) >> 3)zigbNwk_Tips.colorGray_R = zigbNwk_Tips.colorGray_G = zigbNwk_Tips.colorGray_B = 
             -0;
 183   1      }
 184          
 185          /*led状态指示模式切换至正常模式*/
 186          void tips_statusChangeToNormal(void){
 187   1      
 188   1              counter_ifTipsFree = TIPS_SWFREELOOP_TIME;
 189   1              devTips_status = status_Normal;
 190   1              if(!countEN_ifTipsFree)countEN_ifTipsFree = 1; //触摸释放计时使能
 191   1              if(tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_nwkOpen;
 192   1      }
 193          
 194          /*led状态指示模式切换至zigb网络开放*/
 195          void tips_statusChangeToZigbNwkOpen(u8 timeopen){
 196   1      
 197   1              beeps_usrActive(3, 40, 2);
 198   1              tipsTimeCount_zigNwkOpen = timeopen;
 199   1              devTips_status = status_tipsNwkOpen;
 200   1              devTips_nwkZigb = nwkZigb_nwkOpen;
 201   1              thread_tipsGetDark(0x0F);
 202   1      }
 203          
 204          /*led状态指示模式切换至zigb网络加入请求*/
 205          void tips_statusChangeToZigbNwkFind(void){
 206   1      
 207   1              beeps_usrActive(3, 40, 2);
 208   1              devTips_status = status_tipsNwkFind;
 209   1              thread_tipsGetDark(0x0F);
 210   1      }
 211          
 212          /*led状态指示模式切换至触摸IC复位模式*/
 213          void tips_statusChangeToTouchReset(u8 timeHold){
 214   1      
 215   1              tipsTimeCount_touchReset = timeHold;
 216   1              devTips_status = status_touchReset;
 217   1              thread_tipsGetDark(0x0F);
 218   1              beeps_usrActive(3, 40, 2);
 219   1      }
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 5   

 220          
 221          /*led状态指示模式切换至恢复出厂模式*/
 222          void tips_statusChangeToFactoryRecover(u8 timeHold){
 223   1      
 224   1              tipsTimeCount_factoryRecover = timeHold;
 225   1              devTips_status = status_sysStandBy;
 226   1              thread_tipsGetDark(0x0F);
 227   1              beeps_usrActive(3, 255, 3);
 228   1      }
 229          
 230          /*tips主线程*///状态机
 231          void thread_Tips(void){
 232   1              
 233   1              if(ifNightMode_sw_running_FLAG){ //夜间模式，背景灯tips模式强制切换
 234   2              
 235   2                      if(devTips_status == status_Normal || //其它系统级tips不受夜间模式影响
 236   2                         devTips_status == status_keyFree){
 237   3                              
 238   3                              devTips_status = status_Night;
 239   3                      }
 240   2                      
 241   2              }else{ //非夜间模式，其它花样切换开启
 242   2                      
 243   2                      if(devTips_status == status_Night)tips_statusChangeToNormal(); //当前若为夜间模式则切回正常模式
 244   2                      
 245   2                      if(devTips_status == status_keyFree){
 246   3                      
 247   3                              if(!countEN_ifTipsFree)devTips_status = status_Normal; //中断正在运行的跑马灯
 248   3                      }
 249   2              
 250   2                      if( !counter_ifTipsFree &&  //指定时间没有硬件操作，led状态指示切换至空闲模式
 251   2                          (devTips_status == status_Normal) &&  //正常模式下才可以切，其他模式不能
 252   2                              countEN_ifTipsFree && //且空闲计时使能
 253   2                              ifHorsingLight_running_FLAG ){ //标志位置位才可以切
 254   3                          
 255   3                              thread_tipsGetDark(0x0F);
 256   3                              devTips_status = status_keyFree;
 257   3                      }
 258   2              }
 259   1              
 260   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      ifHorsingLight_running_FLAG = 0; //插座不存在跑马灯
                      
                      switch(devTips_status){
                      
                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
                                              (status_Relay)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 6   

                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                              
                                                                      counter_tipsAct = 1000;
                                                                      if(zigbNwk_exist_FLG)(tips_Type)?(socketTips_B = 5):(socketTips_B = 0); //重连 --本地有网络记录，重
             -连
                                                                      else socketTips_B = 0; //重连 --本地没有有网络记录，不存在重连
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 7   

                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
                                      }
                                      
                              }break;
                              
                              default:{ //插座没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                      ifHorsingLight_running_FLAG = 0; //红外不存在跑马灯
                      
                      switch(devTips_status){
                      
                              case status_Night:
                              case status_Normal:{
                                      
                                      /*zigb网络状态指示*/
                                      {
                                              static bit tips_Type = 0;
                                              static u8 tipsEn_Loop = 0;
                                              
                                              static u8 xdata socketTips_R = 0,
                                                                              socketTips_B = 0;
                                              
                                              (infraredStatus_GET() != infraredSMStatus_free)?(socketTips_R = 30):(socketTips_R = 0);
                                              
                                              if(!counter_tipsAct){
                                              
                                                      tips_Type = !tips_Type;
                                                      
                                                      switch(devTips_nwkZigb){
                                                      
                                                              case nwkZigb_Normal:{
                                                                      
                                                                      socketTips_B = 5;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_nwkOpen:{
                                                              
                                                                      if(tipsEn_Loop < (3 * 2)){ //周期闪3
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 8   

                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 150;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_outLine:{
                                                              
                                                                      socketTips_B = 0;
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_reConfig:{ //间接1000 常闪
                                                                      
                                                                      counter_tipsAct = 1000;
                                                                      if(zigbNwk_exist_FLG)(tips_Type)?(socketTips_B = 5):(socketTips_B = 0); //重连 --本地有网络记录，重
             -连
                                                                      else socketTips_B = 0; //重连 --本地没有有网络记录，不存在重连
                                                                      
                                                              }break;
                                                              
                                                              case nwkZigb_nwkREQ:{ //间接100 常闪
                                                              
                                                                      counter_tipsAct = 100;
                                                                      (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                              
                                                              }break;
                                                              
                                                              case nwkZigb_hold:{
                                                              
                                                                      if(tipsEn_Loop < (5 * 2)){ //周期闪5
                                                                      
                                                                              tipsEn_Loop ++;
                                                                              counter_tipsAct = 100;
                                                                              (tips_Type)?(socketTips_B = 5):(socketTips_B = 0);
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsEn_Loop = 0;
                                                                              counter_tipsAct = 2000;
                                                                              socketTips_B = 0;
                                                                      }
                                                                      
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      devTips_nwkZigb = nwkZigb_Normal;
                                                              
                                                              }break;
                                                      }
                                              }
                                              
                                              tipsLED_colorSet(obj_Relay1, socketTips_R, 0, socketTips_B);
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 9   

                                      }
                                      
                              }break;
                              
                              default:{ //红外没有前台tips
                              
                                      tips_statusChangeToNormal();
                                      
                              }break;
                      }
                      
                      /*过期tips处理*/
                      {
                      
                              if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal; /
             -/网络开放后台tips过期恢复
                      }
                      
              #else
 483   1              switch(devTips_status){
 484   2              
 485   2                      case status_sysStandBy:{
 486   3                      
 487   3                              tips_sysStandBy();
 488   3                              
 489   3                      }break;
 490   2                              
 491   2                      case status_keyFree:{
 492   3                      
 493   3                              tips_sysButtonReales();
 494   3                      
 495   3                      }break;
 496   2                      
 497   2                      case status_Night:
 498   2                      case status_Normal:{
 499   3                              
 500   3                              static u16 tipsNwk_Counter = 0;
 501   3                              u16 code tipsNwk_Period = 500;
 502   3                              u8 relayStatus_tipsTemp = status_Relay;
 503   3                              
 504   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT1){ //随继电器
 505   4                              
 506   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 507   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存1处理
 508   4      
 509   4                              }else
 510   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT2){ //随继电器
 511   4      
 512   4                                      relayStatus_tipsTemp |= status_Relay & 0x02; //显存2加载
 513   4                                      relayStatus_tipsTemp = relayStatus_tipsTemp << 1; //显存2处理
 514   4                                      relayStatus_tipsTemp |= status_Relay & 0x01; //显存1加载
 515   4      
 516   4                              }else
 517   3                              if(SWITCH_TYPE == SWITCH_TYPE_SWBIT3){ //随继电器
 518   4      
 519   4                                      relayStatus_tipsTemp = status_Relay; //直接加载，不处理
 520   4                                      
 521   4                              }else
 522   3                              if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN || SWITCH_TYPE == SWITCH_TYPE_FANS){ //随继电器
 523   4                                      
 524   4                                      relayStatus_tipsTemp = status_Relay;
 525   4                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 10  

 526   4                              }else
 527   3                              if(SWITCH_TYPE == SWITCH_TYPE_dIMMER){ //随触摸
 528   4                                      
 529   4                                      relayStatus_tipsTemp = touchPadScan_oneShoot();
 530   4                              }
 531   3      
 532   3                              /*继电器状态指示*/
 533   3                              switch(SWITCH_TYPE){
 534   4                                      
 535   4      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)                           
                                              case SWITCH_TYPE_FANS:{
                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                                      
                                                              case 0x01:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear1].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear1].colorG
             -ray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear2].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear2].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                                      
                                                              case 0x03:{
                                                              
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 11  

                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear3].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear3].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                              
                                                              case 0x00:
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColo
             -rInsert_gear0].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.fans_BKlight_Param.fans_BKlightColorInsert_gear0].colorG
             -ray_B);
                                                                      
                                                              }break;
                                                      }
                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)               
                                              case SWITCH_TYPE_dIMMER:{
                                                      
                                                      u8 idata TIPSBKCOLOR_USRDEF_PRESS       = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColo
             -rInsert_press; //按下色缓存
                                                      u8 idata TIPSBKCOLOR_USRDEF_UP          = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorI
             -nsert_brightness0; //弹起色缓存
                                                      
                                                      if(!status_Relay)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlight
             -ColorInsert_brightness0; //亮度为0时弹起色
                                                      else if(status_Relay == 100)TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dim
             -mer_BKlightColorInsert_brightness100; //亮度为100时弹起色
                                                      else TIPSBKCOLOR_USRDEF_UP = devBackgroundLight_param.dimmer_BKlight_Param.dimmer_BKlightColorInsert_
             -brightness1to99; //亮度为1-99时弹起色
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 12  

                                              
                                                      switch(relayStatus_tipsTemp){ //非占位指示
                                                      
                                                              case 0x01:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              case 0x02:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case 0x04:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_R, color_Tab[TIPSBKCOLOR
             -_USRDEF_PRESS].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_PRESS].colorGray_B);
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                      
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_R, color_Tab[TIPSBKCOLOR_US
             -RDEF_UP].colorGray_G, color_Tab[TIPSBKCOLOR_USRDEF_UP].colorGray_B);
                                                                      
                                                              }break;
                                                      }
                                              
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
                                              case SWITCH_TYPE_SCENARIO:{
                                              
                                                      u16 code tipsCounter_scenarioKeepTrigForce = 500; //场景触发强制间隔时，tips闪烁相关周期
                                                      static bit tipsFlash_flg = 0;
                                                      
                                                      if(!counter_tipsAct){
                                                      
                                                              counter_tipsAct = tipsCounter_scenarioKeepTrigForce;
                                                              tipsFlash_flg = !tipsFlash_flg;
                                                      }
                                              
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 13  

                                                      switch(scenario_ActParam.scenarioKey_currentTrig){
                                                      
                                                              case scenarioKey_current_S1:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                                      
                                                              case scenarioKey_current_S2:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 14  

             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
                                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              case scenarioKey_current_S3:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter && scenario_ActParam.scenarioKeepTrig_timeCounter
             - != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){
                                                                      
                                                                              (tipsFlash_flg)?\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_trig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_tr
             -ig].colorGray_B)):\
                                                                                      (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_
             -BKlightColorInsert_notrig].colorGray_R, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_G, 
                                                                                                                                                color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_no
             -trig].colorGray_B));
                                                                              
                                                                      }else{
                                                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 15  

                                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BK
             -lightColorInsert_trig].colorGray_R, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_G, 
                                                                                                                                       color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_trig
             -].colorGray_B);
                                                                      }
                                                              
                                                              }break;
                                                              
                                                              default:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKl
             -ightColorInsert_notrig].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.scenario_BKlight_Param.scenario_BKlightColorInsert_notri
             -g].colorGray_B);
                                                                      
                                                              }break;
                                                      }
                                                      
                                              }break;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)       
                                              case SWITCH_TYPE_HEATER:{
                                                      
                                                      tipsLED_colorSet(obj_Relay1, 0, 0, 0);
                                                      tipsLED_colorSet(obj_Relay3, 0, 0, 0);
                                              
                                                      switch(heater_ActParam.heater_currentActMode){
                                                      
                                                              case heaterActMode_swClose:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_close].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_close].co
             -lorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swKeepOpen:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_open].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
             -orGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_open].col
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 16  

             -orGray_B);
                                                                      
                                                              }break;
                                                                      
                                                              case heaterActMode_swCloseDelay30min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay30].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y30].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              case heaterActMode_swCloseDelay60min:{
                                                              
                                                                      tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlight
             -ColorInsert_closeDelay60].colorGray_R, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_G, 
                                                                                                                               color_Tab[devBackgroundLight_param.heater_BKlight_Param.heater_BKlightColorInsert_closeDela
             -y60].colorGray_B);
                                                              
                                                              }break;
                                                                      
                                                              default:{}break;
                                                      }
                                                              
                                              }break;
                                              
              #else                   
 808   4                                      case SWITCH_TYPE_CURTAIN:{
 809   5                                      
 810   5                                              switch(relayStatus_tipsTemp){ //非占位指示
 811   6                                              
 812   6                                                      case 0x01:{
 813   7                                                      
 814   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 815   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 816   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 817   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 818   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 819   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 820   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 821   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 822   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 823   7                                                      
 824   7                                                      }break;
 825   6                                                              
 826   6                                                      case 0x04:{
 827   7                                                      
 828   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 17  

             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 829   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 830   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 831   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 832   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 833   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 834   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 835   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 836   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 837   7                                                      
 838   7                                                      }break;
 839   6                                                      
 840   6                                                      default:{
 841   7                                                      
 842   7                                                              tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 843   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 844   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 845   7                                                              tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_press].colorGray_R, 
 846   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_G, 
 847   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_press].colorGray_B);
 848   7                                                              tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuerta
             -in_BKlight_Param.cuertain_BKlightColorInsert_bounce].colorGray_R, 
 849   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_G, 
 850   7                                                                                                                       color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.cuertain_BKlight_Param.cuer
             -tain_BKlightColorInsert_bounce].colorGray_B);
 851   7                                                      
 852   7                                                      }break;
 853   6                                              }
 854   5                                      
 855   5                                      }break;
 856   4                                      
 857   4                                      case SWITCH_TYPE_SWBIT1:
 858   4                                      case SWITCH_TYPE_SWBIT2:
 859   4                                      case SWITCH_TYPE_SWBIT3:
 860   4                                      default:{ //占位指示
 861   5                                              
 862   5                                              (DEV_actReserve & 0x01)?\
 863   5                                                      ((relayStatus_tipsTemp & 0x01)?\
 864   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 865   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 866   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 867   5                                                              (tipsLED_colorSet(obj_Relay1, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 868   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 18  

             -t_BKlightColorInsert_close].colorGray_G, 
 869   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 870   5                                                      (tipsLED_colorSet(obj_Relay1, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B));
 871   5                                              
 872   5                                              (DEV_actReserve & 0x02)?\
 873   5                                                      ((relayStatus_tipsTemp & 0x02)?\
 874   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 875   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 876   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 877   5                                                              (tipsLED_colorSet(obj_Relay2, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 878   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 879   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 880   5                                                      (tipsLED_colorSet(obj_Relay2, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 881   5                                              
 882   5                                              (DEV_actReserve & 0x04)?\
 883   5                                                      ((relayStatus_tipsTemp & 0x04)?\
 884   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_open].colorGray_R, 
 885   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_G, 
 886   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_open].colorGray_B)):\
 887   5                                                              (tipsLED_colorSet(obj_Relay3, color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bi
             -t_BKlight_Param.sw3bit_BKlightColorInsert_close].colorGray_R, 
 888   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_G, 
 889   5                                                                                                                        color_Tab[devBackgroundLight_param.sw3bitIcurtain_BKlight_Param.sw3bit_BKlight_Param.sw3bi
             -t_BKlightColorInsert_close].colorGray_B))):\
 890   5                                                      (tipsLED_colorSet(obj_Relay3, tips_relayUnused.colorGray_R, tips_relayUnused.colorGray_G, tips_relay
             -Unused.colorGray_B)); 
 891   5                                              
 892   5                                      }break;
 893   4                                      
 894   4      #endif
 895   4                              }
 896   3                              
 897   3                              /*过期tips处理*/
 898   3                              {
 899   4                              
 900   4                                      if((devTips_nwkZigb == nwkZigb_nwkOpen) && !tipsTimeCount_zigNwkOpen)devTips_nwkZigb = nwkZigb_Normal;
             - //网络开放后台tips过期恢复
 901   4                              }
 902   3                              
 903   3                              /*zigb网络状态指示*/
 904   3                              {
 905   4                                      static bit tips_Type = 0;
 906   4                                      
 907   4                                      if(tipsNwk_Counter < tipsNwk_Period)tipsNwk_Counter ++;
 908   4                                      else{
 909   5                                      
 910   5                                              tips_Type = !tips_Type;
 911   5                                              tipsNwk_Counter = 0;
 912   5                                              
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 19  

 913   5                                              switch(devTips_nwkZigb){
 914   6                                              
 915   6                                                      case nwkZigb_Normal:{
 916   7                                                      
 917   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)); //
             -常绿
 918   7                                                      
 919   7                                                      }break;
 920   6                                                      
 921   6                                                      case nwkZigb_nwkOpen:{
 922   7                                                      
 923   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 0, 30, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -躺
 924   7                                                              
 925   7                                                      }break;
 926   6                                                      
 927   6                                                      case nwkZigb_outLine:{
 928   7                                                      
 929   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)); //
             -常红
 930   7                                                      
 931   7                                                      }break;
 932   6                                                      
 933   6                                                      case nwkZigb_reConfig:{
 934   7                                                              
 935   7                                                              if(zigbNwk_exist_FLG){ //网络存在
 936   8                                                              
 937   8                                                                      if(devZigbNwk_startUp_delayCounter)(tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_
             -colorSet(obj_zigbNwk, 0, 0, 0)); //红闪
 938   8                                                                      else tipsLED_colorSet(obj_zigbNwk, 30, 10, 0); //常黄 --有网络记录，重连中
 939   8                                                              
 940   8                                                              }else{ //网络不存在
 941   8                                                                      
 942   8                                                                      tipsLED_colorSet(obj_zigbNwk, 0, 0, 0); //常黑 --本身没有网络记录
 943   8                                                              }
 944   7                                                              
 945   7                                                      }break;
 946   6                                                      
 947   6                                                      case nwkZigb_nwkREQ:{
 948   7                                                      
 949   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 10, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -黄闪
 950   7                                                      
 951   7                                                      }break;
 952   6                                                      
 953   6                                                      case nwkZigb_hold:{
 954   7                                                      
 955   7                                                              (tips_Type)?(tipsLED_colorSet(obj_zigbNwk, 30, 0, 0)):(tipsLED_colorSet(obj_zigbNwk, 0, 0, 0)); //
             -焐
 956   7                                                              
 957   7                                                      }break;
 958   6                                                      
 959   6                                                      default:{
 960   7                                                      
 961   7                                                              devTips_nwkZigb = nwkZigb_Normal;
 962   7                                                      
 963   7                                                      }break;
 964   6                                              }
 965   5                                      }
 966   4                              }
 967   3                              
 968   3                      }break;
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 20  

 969   2                      
 970   2                      case status_tipsNwkOpen:{
 971   3                              
 972   3                              if(tipsTimeCount_zigNwkOpen)tips_specified(1);
 973   3                              else{
 974   4      
 975   4                                      tips_statusChangeToNormal();
 976   4      #if(DEBUG_LOGOUT_EN == 1)
 977   4                                      { //输出打印，谨记 用后注释，否则占用大量代码空间
 978   5                                              memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
 979   5                                              sprintf(log_buf, "zigbNwk Close.\n");
 980   5                                              PrintString1_logOut(log_buf);
 981   5                                      }                       
 982   4      #endif  
 983   4                              }
 984   3                              
 985   3                      }break;
 986   2                      
 987   2                      case status_tipsNwkFind:{
 988   3                      
 989   3                              tips_specified(0);
 990   3                      
 991   3                      }break;
 992   2                      
 993   2                      case status_devHold:{
 994   3                      
 995   3                              tips_warning();
 996   3                              
 997   3                      }break;
 998   2                      
 999   2                      case status_touchReset:{
1000   3                      
1001   3                              if(tipsTimeCount_touchReset)tips_sysTouchReset();
1002   3                              else{
1003   4                              
1004   4                                      tips_statusChangeToNormal();
1005   4      #if(DEBUG_LOGOUT_EN == 1)
1006   4                                      { //输出打印，谨记 用后注释，否则占用大量代码空间
1007   5                                              memset(log_buf, 0, LOGBUFF_LEN * sizeof(u8));
1008   5                                              sprintf(log_buf, "touch reset complete.\n");
1009   5                                              PrintString1_logOut(log_buf);
1010   5                                      }                       
1011   4      #endif  
1012   4                              }
1013   3                              
1014   3                      }break;
1015   2                              
1016   2                      default:{
1017   3                      
1018   3                              devTips_status = status_Normal;
1019   3                              
1020   3                      }break;
1021   2              }
1022   1      #endif
1023   1      }
1024          
1025          void tipsLED_colorSet(tipsLED_Obj obj, u8 gray_R, u8 gray_G, u8 gray_B){
1026   1      
1027   1              if((devTips_status == status_Normal) ||
1028   1                 (devTips_status == status_Night)){
1029   2                         
1030   2                      if(devTips_status == status_Night){     //夜间模式，背光亮度调整
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 21  

1031   3                              
1032   3                              u8 code bright_coef = 4;
1033   3                      
1034   3                              gray_R /= bright_coef;
1035   3                              gray_G /= bright_coef;
1036   3                              gray_B /= bright_coef;
1037   3                      }
1038   2              
1039   2                      switch(obj){
1040   3                      
1041   3                              case obj_Relay1:{
1042   4                              
1043   4                                      relay1_Tips.colorGray_R = gray_R;
1044   4                                      relay1_Tips.colorGray_G = gray_G;
1045   4                                      relay1_Tips.colorGray_B = gray_B;
1046   4                                      
1047   4                              }break;
1048   3                              
1049   3                              case obj_Relay2:{
1050   4                              
1051   4                                      relay2_Tips.colorGray_R = gray_R;
1052   4                                      relay2_Tips.colorGray_G = gray_G;
1053   4                                      relay2_Tips.colorGray_B = gray_B;
1054   4                                      
1055   4                              }break;
1056   3                              
1057   3                              case obj_Relay3:{
1058   4                              
1059   4                                      relay3_Tips.colorGray_R = gray_R;
1060   4                                      relay3_Tips.colorGray_G = gray_G;
1061   4                                      relay3_Tips.colorGray_B = gray_B;
1062   4                                      
1063   4                              }break;
1064   3                                              
1065   3                              case obj_zigbNwk:{
1066   4                              
1067   4                                      zigbNwk_Tips.colorGray_R = gray_R;
1068   4                                      zigbNwk_Tips.colorGray_G = gray_G;
1069   4                                      zigbNwk_Tips.colorGray_B = gray_B;
1070   4                                      
1071   4                              }break;
1072   3                              
1073   3                              default:break;
1074   3                      }
1075   2              }
1076   1      }
1077          
1078          void tips_warning(void){
1079   1      
1080   1              static u8 xdata tipsStep = 0;
1081   1              
1082   1              switch(tipsStep){
1083   2              
1084   2                      case 0:{
1085   3                      
1086   3                              counter_tipsAct = 1000;
1087   3                              tipsStep = 1;
1088   3                      
1089   3                      }break;
1090   2                      
1091   2                      case 1:{
1092   3                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 22  

1093   3                              if(counter_tipsAct){
1094   4                                      
1095   4                                      if(counter_tipsAct % 199 > 99){
1096   5                                      
1097   5                                              zigbNwk_Tips.colorGray_R = \
1098   5                                              relay3_Tips.colorGray_R = \
1099   5                                              relay2_Tips.colorGray_R = \
1100   5                                              relay1_Tips.colorGray_R = 31;
1101   5                                      
1102   5                                      }else{
1103   5                                      
1104   5                                              zigbNwk_Tips.colorGray_R = \
1105   5                                              relay3_Tips.colorGray_R = \
1106   5                                              relay2_Tips.colorGray_R = \
1107   5                                              relay1_Tips.colorGray_R = 0;
1108   5                                      }
1109   4                              
1110   4                              }else{
1111   4                              
1112   4                                      counter_tipsAct = 600;
1113   4                                      thread_tipsGetDark(0x0F);
1114   4                                      tipsStep = 2;
1115   4                              }
1116   3                      
1117   3                      }break;
1118   2                      
1119   2                      
1120   2                      case 2:{
1121   3                      
1122   3                              if(!counter_tipsAct)tipsStep = 0;
1123   3                              
1124   3                      }break;
1125   2                      
1126   2                      default:{
1127   3                      
1128   3                              tipsStep = 0;
1129   3                      
1130   3                      }break;
1131   2              }
1132   1      }
1133          
1134          void tips_breath(void){
1135   1      
1136   1              static u8       localTips_Count = COLORGRAY_MAX - 1; //步骤中期切换初始值
1137   1              static bit      count_FLG = 1;
1138   1              static u8       tipsStep = 0;
1139   1      
1140   1              u8 code speed = 3;
1141   1              u8 code step_period = 3;
1142   1              
1143   1      //      if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期
             - 切换到下一步骤
1144   1              if(!localTips_Count)count_FLG = 1;
1145   1              else 
1146   1              if(localTips_Count >= (COLORGRAY_MAX - 1)){
1147   2                      
1148   2                      count_FLG = 0;
1149   2                      
1150   2                      localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1151   2                      (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1152   2              }
1153   1              
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 23  

1154   1              if(!counter_tipsAct){
1155   2              
1156   2                      (!count_FLG)?(counter_tipsAct = speed * (localTips_Count --)):(counter_tipsAct = speed * (localTips_Coun
             -t ++)); //更新单周期时间
1157   2              }       
1158   1              
1159   1              switch(tipsStep){
1160   2              
1161   2                      case 0:{
1162   3                      
1163   3                              zigbNwk_Tips.colorGray_G = 31 - localTips_Count;
1164   3                              
1165   3                      }break;
1166   2                      
1167   2                      case 2:{
1168   3                      
1169   3                              relay3_Tips.colorGray_R = 31 - localTips_Count;
1170   3                              
1171   3                      }break;
1172   2                      
1173   2                      default:break;
1174   2              }
1175   1      }
1176          
1177          void tips_fadeOut(void){
1178   1      
1179   1              static u8       localTips_Count = 0; //步骤初期切换初始值
1180   1              static bit      count_FLG = 1;
1181   1              static u8       tipsStep = 0;
1182   1              static u8       pwmType_A = 0,
1183   1                                      pwmType_B = 0,
1184   1                                      pwmType_C = 0,
1185   1                                      pwmType_D = 0;
1186   1              
1187   1              u8 code speed = 3;
1188   1              u8 code step_period = 1;
1189   1              
1190   1              if(!localTips_Count && !count_FLG)(tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++); //步骤初始期期 
             -切换到下一步骤
1191   1              if(!localTips_Count)count_FLG = 1;
1192   1              else 
1193   1              if(localTips_Count > (COLORGRAY_MAX * 4)){
1194   2              
1195   2                      count_FLG = 0;
1196   2                      
1197   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1198   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1199   2              }
1200   1              
1201   1              if(!counter_tipsAct){
1202   2              
1203   2                      (!count_FLG)?(counter_tipsAct = speed * ((localTips_Count --) % COLORGRAY_MAX)):(counter_tipsAct = speed
             - * ((localTips_Count ++) % COLORGRAY_MAX)); //更新单周期时间
1204   2                      
1205   2                      if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1206   2                      if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1207   2                      if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1208   2                      if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1209   2              }
1210   1              
1211   1              switch(tipsStep){
1212   2              
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 24  

1213   2                      case 0:{
1214   3                              
1215   3                              if(count_FLG){ 
1216   4                                      
1217   4                                      zigbNwk_Tips.colorGray_B = pwmType_A;
1218   4                                      relay3_Tips.colorGray_B = pwmType_B;
1219   4                                      relay2_Tips.colorGray_B = pwmType_C;
1220   4                                      relay1_Tips.colorGray_B = pwmType_D;
1221   4                                      
1222   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1223   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1224   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
1225   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1226   4                                      
1227   4                              }else{ 
1228   4                                      
1229   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1230   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1231   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1232   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1233   4                                      
1234   4                                      zigbNwk_Tips.colorGray_B = pwmType_D;
1235   4                                      relay3_Tips.colorGray_B = pwmType_C;
1236   4                                      relay2_Tips.colorGray_B = pwmType_B;
1237   4                                      relay1_Tips.colorGray_B = pwmType_A;
1238   4                              }
1239   3                              
1240   3                      }break;
1241   2                              
1242   2                      case 1:{
1243   3                              
1244   3                              if(count_FLG){ 
1245   4                                      
1246   4                                      zigbNwk_Tips.colorGray_G = pwmType_A / 4;
1247   4                                      relay3_Tips.colorGray_G = pwmType_B / 4;
1248   4                                      relay2_Tips.colorGray_G = pwmType_C / 4;
1249   4                                      relay1_Tips.colorGray_G = pwmType_D / 4;
1250   4                                      
1251   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1252   4                                      relay3_Tips.colorGray_R = 31 - pwmType_B;
1253   4                                      relay2_Tips.colorGray_R = 31 - pwmType_C;
1254   4                                      relay1_Tips.colorGray_R = 31 - pwmType_D;
1255   4                                      
1256   4                              }else{ 
1257   4                                      
1258   4                                      zigbNwk_Tips.colorGray_R = 31 - pwmType_D;
1259   4                                      relay3_Tips.colorGray_R = 31 - pwmType_C;
1260   4                                      relay2_Tips.colorGray_R = 31 - pwmType_B;
1261   4                                      relay1_Tips.colorGray_R = 31 - pwmType_A;
1262   4                                      
1263   4                                      zigbNwk_Tips.colorGray_G = pwmType_D / 4;
1264   4                                      relay3_Tips.colorGray_G = pwmType_C / 4;
1265   4                                      relay2_Tips.colorGray_G = pwmType_B / 4;
1266   4                                      relay1_Tips.colorGray_G = pwmType_A / 4;
1267   4                              }
1268   3                              
1269   3                      }break;
1270   2                              
1271   2                      default:break;
1272   2              }
1273   1      }
1274          
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 25  

1275          void tips_specified(u8 tips_Type){ //tips类别
1276   1      
1277   1              static u8       localTips_Count = 0; //步骤初期切换初始值
1278   1              static bit      count_FLG = 1;
1279   1              static u8       tipsStep = 0;
1280   1              static u8       pwmType_A = 0,
1281   1                                      pwmType_B = 0,
1282   1                                      pwmType_C = 0,
1283   1                                      pwmType_D = 0;
1284   1              
1285   1              u8 code speed_Mol = 5,
1286   1                      speed_Den = 4;
1287   1              u8 code step_period = 0;
1288   1              
1289   1              if(!localTips_Count && !count_FLG){
1290   2              
1291   2                      if(tipsStep < step_period)tipsStep ++; //步骤初始期期 切换到下一步骤
1292   2                      else{
1293   3                      
1294   3                              tipsStep = 0;
1295   3                              
1296   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1297   3                      }
1298   2              }
1299   1              if(!localTips_Count)count_FLG = 1;
1300   1              else 
1301   1              if(localTips_Count > 80){
1302   2              
1303   2                      count_FLG = 0;
1304   2                      
1305   2      //              localTips_Count = COLORGRAY_MAX - 2; //快速脱离当前状态
1306   2      //              (tipsStep >= step_period)?(tipsStep = 0):(tipsStep ++);  //步骤中期 切换到下一步骤
1307   2              }
1308   1              
1309   1              if(!counter_tipsAct){
1310   2              
1311   2                      (!count_FLG)?(counter_tipsAct = ((localTips_Count --) % COLORGRAY_MAX) / speed_Mol * speed_Den):(counter
             -_tipsAct = ((localTips_Count ++) % COLORGRAY_MAX) / speed_Mol * speed_Den); //更新单周期时间
1312   2                      
1313   2                      if(localTips_Count >= 00 && localTips_Count < 32)pwmType_A = localTips_Count - 0; 
1314   2                      if(localTips_Count >= 16 && localTips_Count < 48)pwmType_B = localTips_Count - 16;
1315   2                      if(localTips_Count >= 32 && localTips_Count < 64)pwmType_C = localTips_Count - 32;
1316   2                      if(localTips_Count >= 48 && localTips_Count < 80)pwmType_D = localTips_Count - 48;
1317   2              }
1318   1              
1319   1              switch(tips_Type){
1320   2              
1321   2                      case 0:{
1322   3                      
1323   3                              switch(tipsStep){
1324   4                              
1325   4                                      case 0:{
1326   5                                              
1327   5                                              if(count_FLG){ 
1328   6                                                      
1329   6                                                      if(localTips_Count < 46){
1330   7                                                      
1331   7                                                              if(localTips_Count % 15 > 10){
1332   8                                                              
1333   8                                                                      zigbNwk_Tips.colorGray_R = 31;
1334   8                                                                      zigbNwk_Tips.colorGray_G = 10;
1335   8                                                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 26  

1336   8                                                              }else{
1337   8                                                              
1338   8                                                                      zigbNwk_Tips.colorGray_R = 0;
1339   8                                                                      zigbNwk_Tips.colorGray_G = 0;
1340   8                                                              }
1341   7                                                      
1342   7                                                      }else{
1343   7                                                      
1344   7                                                              if(localTips_Count > 45){zigbNwk_Tips.colorGray_R = 31; zigbNwk_Tips.colorGray_G = 10;}
1345   7                                                              if(localTips_Count > 50){relay3_Tips.colorGray_R = 31; relay3_Tips.colorGray_G = 10;}
1346   7                                                              if(localTips_Count > 60){relay2_Tips.colorGray_R = 31; relay2_Tips.colorGray_G = 10;}
1347   7                                                              if(localTips_Count > 70){relay1_Tips.colorGray_R = 31; relay1_Tips.colorGray_G = 10;}
1348   7                                                      }
1349   6                                                      
1350   6                                              }else{ 
1351   6                                                      
1352   6                                                      zigbNwk_Tips.colorGray_R = pwmType_D;
1353   6                                                      relay3_Tips.colorGray_R = pwmType_C;
1354   6                                                      relay2_Tips.colorGray_R = pwmType_B;
1355   6                                                      relay1_Tips.colorGray_R = pwmType_A;
1356   6                                                      
1357   6                                                      zigbNwk_Tips.colorGray_G = pwmType_D / 3;
1358   6                                                      relay3_Tips.colorGray_G = pwmType_C / 3;
1359   6                                                      relay2_Tips.colorGray_G = pwmType_B / 3;
1360   6                                                      relay1_Tips.colorGray_G = pwmType_A / 3;
1361   6                                              }
1362   5                                              
1363   5                                      }break;
1364   4                                              
1365   4                                      default:break;
1366   4                              }
1367   3                              
1368   3                      }break;
1369   2                      
1370   2                      case 1:{
1371   3                      
1372   3                              switch(tipsStep){
1373   4                              
1374   4                                      case 0:{
1375   5                                              
1376   5                                              if(count_FLG){ 
1377   6                                                      
1378   6                                                      if(localTips_Count < 46){
1379   7                                                      
1380   7      //                                                      if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_B = 31;else zigbNwk_Tips.colorGray_B = 0;
1381   7                                                              if(localTips_Count % 15 > 10)zigbNwk_Tips.colorGray_G = 31;else zigbNwk_Tips.colorGray_G = 0;
1382   7                                                      
1383   7                                                      }else{
1384   7                                                      
1385   7      //                                                      if(localTips_Count > 45)relay1_Tips.colorGray_B = 31;
1386   7      //                                                      if(localTips_Count > 50)relay2_Tips.colorGray_B = 31;
1387   7      //                                                      if(localTips_Count > 60)relay3_Tips.colorGray_B = 31;
1388   7      //                                                      if(localTips_Count > 70)zigbNwk_Tips.colorGray_B = 31;
1389   7                                                              
1390   7                                                              if(localTips_Count > 45)relay1_Tips.colorGray_G = 31;
1391   7                                                              if(localTips_Count > 50)relay2_Tips.colorGray_G = 31;
1392   7                                                              if(localTips_Count > 60)relay3_Tips.colorGray_G = 31;
1393   7                                                              if(localTips_Count > 70)zigbNwk_Tips.colorGray_G = 31;
1394   7                                                      }
1395   6                                                      
1396   6                                              }else{ 
1397   6                                                      
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 27  

1398   6      //                                              relay1_Tips.colorGray_B = pwmType_D;
1399   6      //                                              relay2_Tips.colorGray_B = pwmType_C;
1400   6      //                                              relay3_Tips.colorGray_B = pwmType_B;
1401   6      //                                              zigbNwk_Tips.colorGray_B = pwmType_A;
1402   6                                                      
1403   6                                                      relay1_Tips.colorGray_G = pwmType_D;
1404   6                                                      relay2_Tips.colorGray_G = pwmType_C;
1405   6                                                      relay3_Tips.colorGray_G = pwmType_B;
1406   6                                                      zigbNwk_Tips.colorGray_G = pwmType_A;
1407   6                                              }
1408   5                                              
1409   5                                      }break;
1410   4                                              
1411   4                                      default:break;
1412   4                              }
1413   3                              
1414   3                      }break;
1415   2                      
1416   2                      default:break;
1417   2              }
1418   1      }
1419          
1420          void tips_sysTouchReset(void){
1421   1              
1422   1              static bit tipsStep = 0;
1423   1      
1424   1              if(counter_tipsAct){
1425   2              
1426   2                      if(tipsStep){
1427   3                      
1428   3                              zigbNwk_Tips.colorGray_R = 0;
1429   3                              relay1_Tips.colorGray_R = 0;
1430   3                              relay2_Tips.colorGray_R = 0;
1431   3                              relay3_Tips.colorGray_R = 0;
1432   3                              
1433   3                      }else{
1434   3                      
1435   3                              zigbNwk_Tips.colorGray_R = 31;
1436   3                              relay1_Tips.colorGray_R = 31;
1437   3                              relay2_Tips.colorGray_R = 31;
1438   3                              relay3_Tips.colorGray_R = 31;
1439   3                      }
1440   2                      
1441   2              }else{
1442   2              
1443   2                      counter_tipsAct = 400;
1444   2                      tipsStep = !tipsStep;
1445   2              }
1446   1      }
1447          
1448          void tips_sysStandBy(void){
1449   1      
1450   1              zigbNwk_Tips.colorGray_R = 31;
1451   1              relay1_Tips.colorGray_R = 31;
1452   1              relay2_Tips.colorGray_R = 31;
1453   1              relay3_Tips.colorGray_R = 31;
1454   1      }
1455          
1456          void tips_sysButtonReales(void){
1457   1      
1458   1      //      u8 code timUnit_period = 0;
1459   1      //      static u8 timUnit_count = 0;
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 28  

1460   1              
1461   1              static u8 localTips_Count = 0;
1462   1              u8 code localTips_Period = 128;
1463   1              static u8 tipsStep = 0;
1464   1              static u8 pwmType_A = 0,
1465   1                            pwmType_B = 0,
1466   1                                pwmType_C = 0,
1467   1                                pwmType_D = 0;
1468   1              
1469   1              if(!counter_tipsAct){
1470   2                      
1471   2                      counter_tipsAct = 12; //更新单周期时间(@50us中断，中断频率为网关主机两倍)
1472   2              
1473   2                      if(localTips_Count > localTips_Period){
1474   3                      
1475   3                              localTips_Count = 0;
1476   3                              (tipsStep > 7)?(tipsStep = 0):(tipsStep ++);
1477   3                              pwmType_A = pwmType_B = pwmType_C = pwmType_D = 0;
1478   3                      }
1479   2                      else{
1480   3                      
1481   3                              localTips_Count ++;
1482   3                              
1483   3                              if(localTips_Count >= 00 && localTips_Count< 32)pwmType_A = localTips_Count - 0;
1484   3                              if(localTips_Count >= 32 && localTips_Count< 64)pwmType_B = localTips_Count - 32;
1485   3                              if(localTips_Count >= 64 && localTips_Count< 96)pwmType_C = localTips_Count - 64;
1486   3                              if(localTips_Count >= 96 && localTips_Count< 128)pwmType_D = localTips_Count - 96;
1487   3                      }
1488   2              }
1489   1              
1490   1              switch(tipsStep){
1491   2                      
1492   2      //              case 0:{
1493   2      //              
1494   2      //                      zigbNwk_Tips.colorGray_R        = pwmType_A / 3;
1495   2      //                      relay3_Tips.colorGray_R         = pwmType_B / 3;
1496   2      //                      relay2_Tips.colorGray_R         = pwmType_C / 3;
1497   2      //                      relay1_Tips.colorGray_R         = pwmType_D / 3;
1498   2      //                      
1499   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1500   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
1501   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1502   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1503   2      //                      
1504   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 2;
1505   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 2;
1506   2      //                      relay2_Tips.colorGray_B         = pwmType_C / 2;
1507   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 2;
1508   2      //              
1509   2      //              }break;
1510   2      //              
1511   2      //              case 1:{
1512   2      //              
1513   2      //                      zigbNwk_Tips.colorGray_R        = 5 + (pwmType_A - 5);
1514   2      //                      relay3_Tips.colorGray_R         = 5 + (pwmType_B - 5);
1515   2      //                      relay2_Tips.colorGray_R         = 5 + (pwmType_C - 5);
1516   2      //                      relay1_Tips.colorGray_R         = 5 + (pwmType_D - 5);
1517   2      //                      
1518   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1519   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1520   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1521   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 29  

1522   2      //                      
1523   2      //                      zigbNwk_Tips.colorGray_B        = 7 - pwmType_A / 2;
1524   2      //                      relay3_Tips.colorGray_B         = 7 - pwmType_B / 2;
1525   2      //                      relay2_Tips.colorGray_B         = 7 - pwmType_C / 2;
1526   2      //                      relay1_Tips.colorGray_B         = 7 - pwmType_D / 2;
1527   2      //              
1528   2      //              }break;
1529   2      //              
1530   2      //              case 2:{
1531   2      //                      
1532   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A / 5;
1533   2      //                      relay3_Tips.colorGray_G         = pwmType_B / 5;
1534   2      //                      relay2_Tips.colorGray_G         = pwmType_C / 5;
1535   2      //                      relay1_Tips.colorGray_G         = pwmType_D / 5;
1536   2      //              
1537   2      //              }break;
1538   2      //                      
1539   2      //              case 3:{
1540   2      //              
1541   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1542   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_B / 5;
1543   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_C / 5;
1544   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_D / 5;
1545   2      //                      
1546   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A / 5;
1547   2      //                      relay3_Tips.colorGray_B         = pwmType_B / 5;
1548   2      //                      relay2_Tips.colorGray_B         = pwmType_C /5;
1549   2      //                      relay1_Tips.colorGray_B         = pwmType_D / 5;
1550   2      //              
1551   2      //              }break;
1552   2      //                      
1553   2      //              case 4:{
1554   2      //                      
1555   2      //                      zigbNwk_Tips.colorGray_R        = 15 - pwmType_A;
1556   2      //                      relay3_Tips.colorGray_R         = 15 - pwmType_B;
1557   2      //                      relay2_Tips.colorGray_R         = 15 - pwmType_C;
1558   2      //                      relay1_Tips.colorGray_R         = 15 - pwmType_D;
1559   2      
1560   2      //                      zigbNwk_Tips.colorGray_B        = 3 + (pwmType_A - 3);
1561   2      //                      relay3_Tips.colorGray_B         = 3 + (pwmType_B - 3);
1562   2      //                      relay2_Tips.colorGray_B         = 3 + (pwmType_C - 3);
1563   2      //                      relay1_Tips.colorGray_B         = 3 + (pwmType_D - 3);
1564   2      //                      
1565   2      //              }break;
1566   2      //                      
1567   2      //              case 5:{
1568   2      
1569   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1570   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1571   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1572   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1573   2      //                      
1574   2      //                      zigbNwk_Tips.colorGray_G        = pwmType_A;
1575   2      //                      relay3_Tips.colorGray_G         = pwmType_B;
1576   2      //                      relay2_Tips.colorGray_G         = pwmType_C;
1577   2      //                      relay1_Tips.colorGray_G         = pwmType_D;
1578   2      //                      
1579   2      //              }break;
1580   2      //                      
1581   2      //              case 6:{
1582   2      //              
1583   2      //                      zigbNwk_Tips.colorGray_B        = pwmType_A;
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 30  

1584   2      //                      relay3_Tips.colorGray_B         = pwmType_B;
1585   2      //                      relay2_Tips.colorGray_B         = pwmType_C;
1586   2      //                      relay1_Tips.colorGray_B         = pwmType_D;
1587   2      //                      
1588   2      //                      zigbNwk_Tips.colorGray_G        = 15 - pwmType_A + 3;
1589   2      //                      relay3_Tips.colorGray_G         = 15 - pwmType_B + 3;
1590   2      //                      relay2_Tips.colorGray_G         = 15 - pwmType_C + 3;
1591   2      //                      relay1_Tips.colorGray_G         = 15 - pwmType_D + 3;
1592   2      //              
1593   2      //              }break;
1594   2      //              
1595   2      //              case 7:{
1596   2      //              
1597   2      //                      zigbNwk_Tips.colorGray_B        = 15 - pwmType_A;
1598   2      //                      relay3_Tips.colorGray_B         = 15 - pwmType_B;
1599   2      //                      relay2_Tips.colorGray_B         = 15 - pwmType_C;
1600   2      //                      relay1_Tips.colorGray_B         = 15 - pwmType_D;
1601   2      //                      
1602   2      //                      zigbNwk_Tips.colorGray_G        = 3 - pwmType_A / 5;
1603   2      //                      relay3_Tips.colorGray_G         = 3 - pwmType_A / 5;
1604   2      //                      relay2_Tips.colorGray_G         = 3 - pwmType_A / 5;
1605   2      //                      relay1_Tips.colorGray_G         = 3 - pwmType_A / 5;
1606   2      //                      
1607   2      //              }break;
1608   2              
1609   2                      case 0:{ /*绿*///绿起
1610   3                              
1611   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 5;
1612   3                              relay3_Tips.colorGray_G = pwmType_B / 5;
1613   3                              relay2_Tips.colorGray_G = pwmType_C / 5;
1614   3                              relay1_Tips.colorGray_G = pwmType_D / 5;
1615   3                              
1616   3                      }break;
1617   2                      
1618   2                      case 1:{ /*黄*///红起
1619   3                              
1620   3                              zigbNwk_Tips.colorGray_R = pwmType_A;
1621   3                              relay3_Tips.colorGray_R = pwmType_B;
1622   3                              relay2_Tips.colorGray_R = pwmType_C;
1623   3                              relay1_Tips.colorGray_R = pwmType_D;
1624   3                              
1625   3                      }break;
1626   2                      
1627   2                      case 2:{ /*红*///绿消
1628   3                              
1629   3                              zigbNwk_Tips.colorGray_G = 6 - pwmType_A / 5;
1630   3                              relay3_Tips.colorGray_G = 6 - pwmType_B / 5;
1631   3                              relay2_Tips.colorGray_G = 6 - pwmType_C / 5;
1632   3                              relay1_Tips.colorGray_G = 6 - pwmType_D / 5;
1633   3                              
1634   3                      }break;
1635   2                      
1636   2                      case 3:{ /*粉*///蓝起
1637   3                              
1638   3                              zigbNwk_Tips.colorGray_B = pwmType_A / 2;
1639   3                              relay3_Tips.colorGray_B = pwmType_B / 2;
1640   3                              relay2_Tips.colorGray_B = pwmType_C / 2;
1641   3                              relay1_Tips.colorGray_B = pwmType_D / 2;
1642   3                              
1643   3                      }break;
1644   2                      
1645   2                      case 4:{ /*蓝*///红消
C51 COMPILER V9.54   TIPS                                                                  01/23/2019 16:32:39 PAGE 31  

1646   3                      
1647   3                              zigbNwk_Tips.colorGray_R = 31 - pwmType_A;
1648   3                              relay3_Tips.colorGray_R = 31 - pwmType_B;
1649   3                              relay2_Tips.colorGray_R = 31 - pwmType_C;
1650   3                              relay1_Tips.colorGray_R = 31 - pwmType_D;
1651   3                              
1652   3                      }break;
1653   2                      
1654   2                      case 5:{ /*白*///绿起红起
1655   3                      
1656   3                              zigbNwk_Tips.colorGray_G = pwmType_A / 3;
1657   3                              relay3_Tips.colorGray_G = pwmType_B / 3;
1658   3                              relay2_Tips.colorGray_G = pwmType_C / 3;
1659   3                              relay1_Tips.colorGray_G = pwmType_D / 3;
1660   3                              
1661   3                              zigbNwk_Tips.colorGray_R = pwmType_A / 2;
1662   3                              relay3_Tips.colorGray_R = pwmType_B / 2;
1663   3                              relay2_Tips.colorGray_R = pwmType_C / 2;
1664   3                              relay1_Tips.colorGray_R = pwmType_D / 2;
1665   3                              
1666   3                      }break;
1667   2                      
1668   2                      case 6:{ /*dark*///全消
1669   3                      
1670   3                              zigbNwk_Tips.colorGray_B = 15 - pwmType_A / 2;
1671   3                              relay3_Tips.colorGray_B = 15 - pwmType_B / 2;
1672   3                              relay2_Tips.colorGray_B = 15 - pwmType_C / 2;
1673   3                              relay1_Tips.colorGray_B = 15 - pwmType_D / 2;
1674   3                              
1675   3                              zigbNwk_Tips.colorGray_G = 10 - pwmType_A / 3;
1676   3                              relay3_Tips.colorGray_G = 10 - pwmType_B / 3;
1677   3                              relay2_Tips.colorGray_G = 10 - pwmType_C / 3;
1678   3                              relay1_Tips.colorGray_G = 10 - pwmType_D / 3;
1679   3                              
1680   3                              zigbNwk_Tips.colorGray_R = 15 - pwmType_A / 2;
1681   3                              relay3_Tips.colorGray_R = 15 - pwmType_B / 2;
1682   3                              relay2_Tips.colorGray_R = 15 - pwmType_C / 2;
1683   3                              relay1_Tips.colorGray_R = 15 - pwmType_D / 2;
1684   3                              
1685   3                      }break;
1686   2                      
1687   2                      default:{}break;
1688   2              }
1689   1      }
1690          
1691          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3491    ----
   CONSTANT SIZE    =     83    ----
   XDATA SIZE       =     25    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      7    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
