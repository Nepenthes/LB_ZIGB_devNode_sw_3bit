C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE APPTIMER
OBJECT MODULE PLACED IN .\Output\appTimer.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Usr\appTimer.c OMF2 OPTIMIZE(9,SIZE) BROWSE INCDIR(.\Usr;.\Usr_lib;.\std
                    -_Lib;.\dataTrans;.\Actuator;.\Sensor;.\hwDriver) DEBUG PRINT(.\Listings\appTimer.lst) OBJECT(.\Output\appTimer.obj)

line level    source

   1          #include "appTimer.h"
   2          
   3          #include "STC15Fxxxx.H"
   4          
   5          #include "stdio.h"
   6          #include "string.h"
   7          
   8          #include "USART.h"
   9          
  10          #include "dataManage.h"
  11          #include "devlopeDebug.h"
  12          
  13          #include "Relay.h"
  14          #include "timerAct.h"
  15          #include "touchPad.h"
  16          #include "dataTrans.h"
  17          #include "Tips.h"
  18          #include "usrKin.h"
  19          #include "driver_I2C_HXD019D.h"
  20          #include "DS18B20.h"
  21          
  22          //***************Êý¾Ý´«Êä±äÁ¿ÒýÓÃÇø***************************/
  23          extern bit                              rxTout_count_EN;        
  24          extern u8                               rxTout_count;   //´®¿Ú½ÓÊÕ³¬Ê±¼ÆÊý
  25          extern bit                              uartRX_toutFLG;
  26          extern u8                               datsRcv_length;
  27          extern uartTout_datsRcv xdata datsRcv_ZIGB;
  28          
  29          extern u16 xdata                zigbNwkAction_counter; //zigbÍøÂçÖØÁ¬×¨ÓÃ¶¯×÷Ê±¼ä¼ÆÊý
  30          
  31          extern u16 xdata                dtReqEx_counter; //À©Õ¹ÐÍÊý¾Ý·¢ËÍ¼ä¸ô¼ÆÊ±Öµ
  32          
  33          extern bit                              heartBeatCycle_FLG;     //ÐÄÌøÖÜÆÚ´¥·¢±êÖ¾
  34          extern u8 xdata                 heartBeatCount; //ÐÄÌø¼ÆÊý
  35          extern u8 xdata                 heartBeatPeriod; //ÐÄÌøÖÜÆÚ
  36          extern u8 xdata                 heartBeatHang_timeCnt;
  37          
  38          extern u8 xdata                 dnCounter_mutualAddrPeriodPingOut;
  39          extern u16 xdata                dnCounter_mutAddrsPingLoopPeriod;
  40          extern bit idata                cycleFlg_mutualAddrPeriodPingOut;
  41          
  42          extern u8 xdata                 colonyCtrlGet_queryCounter; 
  43          extern u8 xdata                 colonyCtrlGetHang_timeCnt;
  44          
  45          //***************°´¼üÊäÈë±äÁ¿ÒýÓÃÇø***************************/
  46          extern bit                              usrKeyCount_EN;
  47          extern u16 idata                usrKeyCount;
  48          
  49          extern u16 xdata                touchPadActCounter;
  50          extern u16 xdata                touchPadContinueCnt;
  51          
  52          extern u16 xdata                combinationFunFLG_3S5S_cancel_counter;
  53          
  54          //***************Tips±äÁ¿ÒýÓÃÇø***************************/
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 2   

  55          extern u16 xdata                counter_tipsAct;
  56          
  57          /*-----------------------------------------------------------------------------------------------*/
  58          void appTimer0_Init(void){      //50us ÖÐ¶Ï@24.000M
  59   1      
  60   1              AUXR |= 0x80;           
  61   1              TMOD &= 0xF0;           
  62   1              TL0   = 0x50;           
  63   1              TH0   = 0xFB;   
  64   1              TF0   = 0;      
  65   1              ET0       = 1;  //¿ªÖÐ¶Ï
  66   1              PT0   = 1;      
  67   1              
  68   1              TR0   = 1;              
  69   1      }
  70          
  71          void appTimer4_Init(void){      //50us ÖÐ¶Ï@24.000M
  72   1              
  73   1              T4T3M   |= 0x20;                
  74   1              T4L     = 0x50;         
  75   1              T4H     = 0xFB;         
  76   1              T4T3M   |= 0x80;        
  77   1      
  78   1              IE2     |= 0x40;
  79   1      }
  80          
  81          void timer0_Rountine (void) interrupt TIMER0_VECTOR{
  82   1              
  83   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
                      {
                              
                              u8 xdata freq_periodBeatHalf = dimmer_freqParam.periodBeat_cfm / 2;
              
                              dimmer_freqParam.periodBeat_counter ++; //µçÔ´ÆµÂÊµ¥ÖÜÆÚ½ÚÅÄÊý¸üÐÂ
                              
                              if(dimmer_freqParam.pwm_actEN){         
                              
                                      dimmer_freqParam.pwm_actCounter ++;
                                      
                                      if(dimmer_freqParam.pwm_actCounter <= status_Relay && dimmer_freqParam.pwm_actCounter < freq_periodBeat
             -Half){ //Ç°°ëÖÜ
                                              
                                              PIN_PWM_OUT = 1;
                                              
                                      }else{
                                      
                                              dimmer_freqParam.pwm_actCounter = 0;
                                              dimmer_freqParam.pwm_actEN = 0;
                                              PIN_PWM_OUT = 0;
                                      }
                                      
              //                      if(dimmer_freqParam.pwm_actCounter <= freq_periodBeatHalf){
              //                      
              //                              if(dimmer_freqParam.pwm_actCounter < status_Relay){
              //                                      
              //                                      PIN_PWM_OUT = 1;
              //                                      
              //                              }else{
              //                              
              //                                      PIN_PWM_OUT = 0;
              //                              }
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 3   

              //                              
              ////                            PIN_PWM_OUT = 0;
              //                      
              //                      }else
              //                      if(dimmer_freqParam.pwm_actCounter > freq_periodBeatHalf && dimmer_freqParam.pwm_actCounter <= dimmer
             -_freqParam.periodBeat_cfm){
              //                              
              ////                            if((dimmer_freqParam.pwm_actCounter - freq_periodBeatHalf) < status_Relay){
              ////                                    
              ////                                    PIN_PWM_OUT = 1;
              ////                                    
              ////                            }else{
              ////                            
              ////                                    PIN_PWM_OUT = 0;
              ////                            }
              //                              
              //                              PIN_PWM_OUT = 0;
              
              //                      }else{
              //                      
              //                              dimmer_freqParam.pwm_actCounter = 0;
              //                              dimmer_freqParam.pwm_actEN = 0;
              //                              PIN_PWM_OUT = 0;
              //                      }
                                      
                              }else{
                              
                                      PIN_PWM_OUT = 0;
                              }
                      }
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
                      u16 code period_1second = 20000;
                      static u16 counter_1second = 0; 
                      u8 code period_1second_x5 = 5;
                      static u8 counter_1second_x5 = 0; 
                      
                      if(counter_1second < period_1second)counter_1second ++; //1s
                      else{
                      
                              counter_1second = 0;
                              
                              if(counter_1second_x5 < period_1second_x5)counter_1second_x5 ++; //5s
                              else{
                              
                                      counter_1second_x5 = 0;
                                      
              //                      /*¸¡µãÊý´«Êä²âÊÔ*/
              //                      socket_eleDetParam.eleParamFun_powerFreqVal     = 111.12345F;
              //                      socket_eleDetParam.eleParam_power                               = 122.12345F;
              //                      socket_eleDetParam.ele_Consum                                   = 253.11111F;
                                      
                                      socket_eleDetParam.eleParamFun_powerFreqVal = socket_eleDetParam.eleParamFun_powerPulseCount / 5.0F; //
             -ÆµÂÊ
                                      socket_eleDetParam.eleParam_power = socket_eleDetParam.eleParamFun_powerFreqVal * (COEFFICIENT_POW - (C
             -OEFFICIENT_COMPENSATION_POW * socket_eleDetParam.eleParamFun_powerFreqVal)); //¹¦ÂÊ
                                      
                                      if(socket_eleDetParam.eleParamFun_powerFreqVal < 0.00001F)socket_eleDetParam.eleParamFun_powerFreqVal =
             - 0.00001F; //×îÐ¡ÖµÏÞ¶¨
                                      socket_eleDetParam.ele_Consum   += 1.00F * (socket_eleDetParam.eleParamFun_powerPulseCount * socket_eleDe
             -tParam.eleParam_power / (1000.00F * 3600.00F * socket_eleDetParam.eleParamFun_powerFreqVal)); //ÓÃµçÁ¿
                                      
                                      socket_eleDetParam.eleParamFun_powerPulseCount = 0.0F; //Âö³å¼ÆÊýÇåÁã
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 4   

                              }
                      }
              #else
 176   1      #endif
 177   1      }
 178          
 179          void timer4_Rountine (void) interrupt TIMER4_VECTOR{
 180   1              
 181   1              u16 code period_1second = 20000;
 182   1              static u16 counter_1second = 0; 
 183   1              
 184   1              u8 code period_1ms              = 20;
 185   1              static u8 counter_1ms   = 0; 
 186   1              
 187   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
                      extern u16 xdata fansInpactTimeCounter;
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
               #if(SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFICATION_BRITISH)
                      u16 code tipsInit_Period                = 1000;         //ÑÓÊ±¼ì²â¼ÆÊýÖÜÆÚ
                      static xdata u16 tipsInit_Cnt   = 0;    
                      
                      u16 code  fpDetectPeriod_stdBy  = 1000;         //¸ºÔØ¼ì²âtips_standBy
                      static xdata u16 fpDetectCount_stdBy = 0;
               #endif
                      
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
              #else
 203   1              u16 code period_200ms   = 4000; //counter_200ms¼ÆÊ±ÆµÂÊ µþ¼Ó counter5_200ms¼ÆÊ±ÆµÂÊ ¶ÔÓ¦µÄ1s¼ÆÊýÖÜÆÚ  4000
             - * 5 * 50 us = 1s
 204   1              static u16 counter_200ms = 0; 
 205   1              u8 code period5_200ms   = 5; //counter_200ms¼ÆÊ±ÆµÂÊ µþ¼Ó counter5_200ms¼ÆÊ±ÆµÂÊ ¶ÔÓ¦µÄ1s¼ÆÊýÖÜÆÚ  4000 * 
             -5 * 50 us = 1s
 206   1              static u8 counter5_200ms = 0; 
 207   1              
 208   1      #endif
 209   1              
 210   1              u8 code period_tipsColor = COLORGRAY_MAX * 3;
 211   1              static u8 counter_tipsColor = 0; 
 212   1              static color_Attr xdata cnt_relay1_Tips = {0};
 213   1              static color_Attr xdata cnt_relay2_Tips = {0};
 214   1              static color_Attr xdata cnt_relay3_Tips = {0};
 215   1              static color_Attr xdata cnt_zigbNwk_Tips = {0};
 216   1              
 217   1              static u8 xdata period_beep = 3;                //beep×¨ÓÃ
 218   1              static u8 xdata count_beep      = 0;
 219   1               
 220   1      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
               #if(SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFICATION_BRITISH)
                      //*******************tipsÊýÂë¹ÜÁ÷Ë®µÆ¼ÆÊ±¼ÆÊýÒµÎñ**************************/
                      if(tipsInit_Cnt < tipsInit_Period)tipsInit_Cnt ++;
                      else{
                      
                              tipsInit_Cnt  = 0;
                              
                              switch(dev_segTips){ //×´Ì¬»ú
                              
                                      case segMode_init:{
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 5   

                                      
                                              segTips_Init();
                                              
                                      }break;
                                      
                                      case segMode_initCmp:{
                                      
                                              segTips_InitCmp();
                                              
                                      }break;
                                      
                                      case segMode_touchOpen:{
                                      
                                              segTips_touchOpen();
                                              
                                      }break;
                                      
                                      case segMode_touchClose:{
                                      
                                              segTips_touchClose();
                                              
                                      }break;
                                      
                                      case segMode_elecDetectStandby:{
                                      
                                              segTips_detectStandBy();
                                              
                                      }break;
                                      
                                      case segMode_elecDetect:{
                                      
                                              powerTips(socket_eleDetParam.eleParam_power);   //¹¦ÂÊTipsÏÔÊ¾
                                              
                                      }break;
                                              
                                      default:{
                                      
                                              segTips_allDark();
                                              
                                      }break;
                              }
                      }
                      
               #endif
              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
              #else
 282   1              //****************100msÌØÊâ**********************************************/
 283   1              if(counter_200ms < period_200ms)counter_200ms ++;
 284   1              else{
 285   2                      
 286   2                      counter_200ms = 0;
 287   2                      counter5_200ms ++;
 288   2              
 289   2                      /*´°Á±Âß¼­ÒµÎñ£¬°´ÕÕ¹ìµÀÊ±¼ä¶¯×÷*/
 290   2                      if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN){
 291   3                      
 292   3                              switch(curtainAct_Param.act){
 293   4                              
 294   4                                      case cTact_open:{
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 6   

 295   5                                              
 296   5                                              if(curtainAct_Param.act_period){ //¹ìµÀÖÜÆÚÊ±¼ä·ÇÁãÊ±²Å½øÐÐÓÐÐ§¹ìµÀÊ±¼ä¼ÆÊ±ÒµÎñ
 297   6                                              
 298   6                                                      if(curtainAct_Param.act_counter < curtainAct_Param.act_period){
 299   7                                                      
 300   7                                                              if(counter5_200ms >= period5_200ms)curtainAct_Param.act_counter ++;
 301   7                                                              
 302   7                                                      }else{
 303   7                                                      
 304   7                                                              curtainAct_Param.act = cTact_stop;
 305   7                                                      }       
 306   6                                              }
 307   5                                              
 308   5                                      }break;
 309   4                                              
 310   4                                      case cTact_close:{
 311   5                                              
 312   5                                              if(curtainAct_Param.act_period){ //¹ìµÀÖÜÆÚÊ±¼ä·ÇÁãÊ±²Å½øÐÐÓÐÐ§¹ìµÀÊ±¼ä¼ÆÊ±ÒµÎñ
 313   6                                              
 314   6                                                      if(curtainAct_Param.act_counter > 0){
 315   7                                                      
 316   7                                                              if(counter5_200ms >= period5_200ms)curtainAct_Param.act_counter --;
 317   7                                                              
 318   7                                                      }else{
 319   7                                                      
 320   7                                                              curtainAct_Param.act = cTact_stop;
 321   7                                                      }                                               
 322   6                                              }
 323   5                                      
 324   5                                      }break;
 325   4                                              
 326   4                                      case cTact_stop:{
 327   5                                      
 328   5                                              if((status_Relay & (1 << 1)) != 2){
 329   6                                              
 330   6                                                      swCommand_fromUsr.objRelay = 2;
 331   6                                                      swCommand_fromUsr.actMethod = relay_OnOff;
 332   6                                                      devActionPush_IF.push_IF = 1; //ÍÆËÍÊ¹ÄÜ
 333   6                                                      
 334   6                                                      (specialFlg_curtainEachctrlEn)?(EACHCTRL_realesFLG = 1):(specialFlg_curtainEachctrlEn = 1); //ÓÐÐ§»¥
             -¿Ø´¥·¢
 335   6                                                      
 336   6                                              }
 337   5                                              
 338   5                                      }break;
 339   4                                              
 340   4                                      default:{}break;
 341   4                              }
 342   3                      }
 343   2                      
 344   2                      if(counter5_200ms >= period5_200ms)counter5_200ms = 0;
 345   2              }
 346   1      #endif
 347   1              
 348   1              //****************1ms×¨ÓÃ**********************************************/
 349   1              if(counter_1ms < period_1ms)counter_1ms ++;
 350   1              else{
 351   2              
 352   2                      counter_1ms = 0;
 353   2                      
 354   2      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
               #if(SWITCHFANS_SPECIAL_VERSION_IMPACT == 1)    
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 7   

                              if(fansInpactTimeCounter != COUNTER_DISENABLE_MASK_SPECIALVAL_U16){
                              
                                      if(fansInpactTimeCounter)fansInpactTimeCounter --;
                                      else{
                                      
                                              fansInpactTimeCounter = COUNTER_DISENABLE_MASK_SPECIALVAL_U16;
                                              PIN_RELAY_1 = 0;
                                      }
                              }
               #endif
                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                              /*ºìÍâ×ª·¢×´Ì¬»ú×¨ÓÃ¶¯×÷Ê±¼ä¼ÆÊý*/
                              if(infraredAct_timeCounter)infraredAct_timeCounter --;
                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
               #if(SWITCH_TYPE_SOCKETS_SPECIFICATION == SOCKETS_SPECIFICATION_BRITISH)
                              /*HLW8012²âÆµTips-standBy*///Ô¤¼ì²â
                              if(fpDetectCount_stdBy < fpDetectPeriod_stdBy)fpDetectCount_stdBy ++;
                              else{
                                      
                                      fpDetectCount_stdBy = 0;
                                      
                                      pinFP_powerStdby = pinFP_stdby_powerCNT / 1.0F;
                                      pinFP_stdby_powerCNT = 0.0F;
                                      if(status_Relay == actRelay_ON){
                                              
                                              if((pinFP_powerStdby - socket_eleDetParam.eleParamFun_powerFreqVal) > 15.0F){ //Éý²î ---Ô¤²â¶Ô±È²îÖµÌá
             -¸ß£¬¶Ô±ÈÈ·ÈÏ¶Á¶ÈÌá¸ß
                                              
                                                      dev_segTips = segMode_elecDetectStandby;
                                                      tipsSeg_INTFLG = 1;
                                              }
                                              else
                                              if((socket_eleDetParam.eleParamFun_powerFreqVal - pinFP_powerStdby) > 15.0F){ //Âä²î
                                              
                                                      dev_segTips = segMode_elecDetect;
                                                      tipsSeg_INTFLG = 1;
                                              }else
                                              if((pinFP_powerStdby - socket_eleDetParam.eleParamFun_powerFreqVal) < 10.0F && (pinFP_powerStdby - soc
             -ket_eleDetParam.eleParamFun_powerFreqVal) > -10.0F){ //ÎÞ²î
                                              
                                                      dev_segTips = segMode_elecDetect;
                                                      tipsSeg_INTFLG = 1;
                                              }
                                      }
                              }
               #endif 
                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
                              /*ÈÈË®Æ÷¼ÌµçÆ÷ÖÍºóÍ¬²½¼ÆÊ±¼ÆÊý*/
                              if(heater_ActParam.relayActDelay_counter != COUNTER_DISENABLE_MASK_SPECIALVAL_U16){ //ÅÐ¶Ï¼ÆÊ±ÊÇ·ñ¿ÉÓÃ£¬
             -ÊÇ·ñÎª¼ÆÊ±Ê§Ð§ÑÚÂë
                              
                                      if(heater_ActParam.relayActDelay_counter)heater_ActParam.relayActDelay_counter --; //¼ÌµçÆ÷¶¯×÷ÖÍºóÍ¬²½
             -¼ÆÊ±ÒµÎñÂß¼­
                                      else{
                                      
                                              heater_ActParam.relayActDelay_counter = COUNTER_DISENABLE_MASK_SPECIALVAL_U16;
                                              heater_ActParam.relayActDelay_actEn = 1;
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 8   

                                      }
                              }
                              
              #else
 418   2      #endif
 419   2                      
 420   2                      /*zigb×¨ÓÃ¶¯×÷Ê±¼ä¼ÆÊý*/
 421   2                      if(zigbNwkAction_counter)zigbNwkAction_counter --;
 422   2                      
 423   2                      /*ÓÃ»§°´¼ü¶¯×÷×¨ÓÃÊ±¼ä¼ÆÊý*/
 424   2                      if(usrKeyCount_EN)usrKeyCount ++;
 425   2                      else usrKeyCount = 0;
 426   2                      
 427   2                      /*´¥Ãþ°´¼ü¶¯×÷×¨ÓÃÊ±¼ä¼ÆÊý*/
 428   2                      if(touchPadActCounter)touchPadActCounter --;
 429   2                      
 430   2                      /*´¥Ãþ°´¼üÁ¬°´×¨ÓÃÊ±¼ä¼ÆÊý*/
 431   2                      if(touchPadContinueCnt)touchPadContinueCnt --;
 432   2                      
 433   2                      /*Tips¶¯×÷×¨ÓÃÊ±¼ä¼ÆÊý*/
 434   2                      if(counter_tipsAct)counter_tipsAct --;
 435   2                      
 436   2                      /*À©Õ¹ÐÔ(³ÖÐøÐÔ)Êý¾Ý·¢ËÍ¶¯×÷¼ä¸ôÊ±¼ä¼ÆÊý*/
 437   2                      if(dtReqEx_counter)dtReqEx_counter --;
 438   2                      
 439   2                      /*»¥¿Ø×éÄÚµØÖ·ÏòÍâ¹ã²¥Í¨Öª²»Í¬×éÁ¬ÐøÍ¨Öª¼ä¸ô*/
 440   2                      if(dnCounter_mutAddrsPingLoopPeriod)dnCounter_mutAddrsPingLoopPeriod --;
 441   2                      
 442   2                      /*ÌØÊâ×éºÏ¶¯×÷°´¼ü´¥·¢ Ô¤±êÖ¾ÏÎ½ÓÊ±¼ä¼ÆÊý*/
 443   2                      if(combinationFunFLG_3S5S_cancel_counter)combinationFunFLG_3S5S_cancel_counter --;
 444   2              }
 445   1              
 446   1              //****************1s×¨ÓÃ**********************************************/
 447   1              if(counter_1second < period_1second)counter_1second ++;
 448   1              else{
 449   2              
 450   2                      counter_1second = 0;
 451   2                      
 452   2      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
              //              /*µçÔ´ÆµÂÊµ¥ÖÜÆÚ½ÚÅÄÊýÍ³¼Æ*/
              //              /*>>>usr_debug<<<*/
              //              //usr_debugÊý¾ÝÌî×°
              //              dev_debugInfoLog.debugInfoData.dimmerInfo.soureFreq = dimmer_freqParam.periodBeat_cfm;
              //              //usr_debug´òÓ¡ÀàÐÍÌî×°Ìî×°
              //              dev_debugInfoLog.debugInfoType = infoType_dimmerFreq;
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                              /*ds18b20ÎÂ¶È¶ÁÈ¡ÖÜÆÚ¼ÆÊ±¼ÆÊýÒµÎñ*/
                              if(couter_ds18b20Temperature_dtPeriod)couter_ds18b20Temperature_dtPeriod --;
                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
                              /*²»Í¬³¡¾°´¥·¢°´¼üÇ¿ÖÆ¼ä¸ôÊ±¼ä¼ÆÊý*/
                              if(scenario_ActParam.scenarioKeepTrig_timeCounter != COUNTER_DISENABLE_MASK_SPECIALVAL_U8){ //ÅÐ¶Ï¼ÆÊ±ÊÇ
             -·ñ¿ÉÓÃ£¬ÊÇ·ñÎª¼ÆÊ±Ê§Ð§ÑÚÂë
                              
                                      if(scenario_ActParam.scenarioKeepTrig_timeCounter)scenario_ActParam.scenarioKeepTrig_timeCounter --;
                                      else{
                                      
                                              scenario_ActParam.scenarioKeepTrig_timeCounter = COUNTER_DISENABLE_MASK_SPECIALVAL_U8;
              //                              scenario_ActParam.scenarioKey_currentTrig = scenarioKey_current_null; //ÔÝÊ±È¡Ïû×Ô»Ö¸´
                                      }
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 9   

                              }
                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
                              /*ÈÈË®Æ÷¼ÌµçÆ÷×Ô¶¯¹Ø±ÕÄ£Ê½ÏÂ¼ÆÊ±¼ÆÊý*/
                              if(heater_ActParam.timerClose_counter != COUNTER_DISENABLE_MASK_SPECIALVAL_U16){ //ÅÐ¶Ï¼ÆÊ±ÊÇ·ñ¿ÉÓÃ£¬ÊÇ·
             -ñÎª¼ÆÊ±Ê§Ð§ÑÚÂë
                              
                                      if(heater_ActParam.timerClose_counter)heater_ActParam.timerClose_counter --; //ÈÈË®Æ÷ÑÓÊ±¹Ø±Õ¼ÆÊ±ÒµÎñÂß
             -¼­
                                      else{
                                      
                                              heater_ActParam.timerClose_counter = COUNTER_DISENABLE_MASK_SPECIALVAL_U16;
                                              
                                              if((heater_ActParam.heater_currentActMode == heaterActMode_swCloseDelay30min) || //ÑÓÊ±¹Ø±ÕÄ£Ê½ÏÂ ÒµÎñ
             -²ÅÓÐÐ§
                                                 (heater_ActParam.heater_currentActMode == heaterActMode_swCloseDelay60min)){
                                                 
                                                      swCommand_fromUsr.objRelay = 0;
                                                      swCommand_fromUsr.actMethod = relay_OnOff; //¿ª¹Ø¶¯×÷
                                                         
                                                      devActionPush_IF.push_IF = 1; //ÍÆËÍÊ¹ÄÜ
                                                      
                                                      heater_ActParam.heater_currentActMode = heaterActMode_swClose;  
                                              }
                                      }
                              }
                              
              #else
 500   2      #endif
 501   2                      /*ÐÄÌø°ü¼ÆÊ±¼ÆÊýÒµÎñ*/
 502   2                      if(!heartBeatCycle_FLG){
 503   3                      
 504   3                              if(heartBeatCount < heartBeatPeriod)heartBeatCount ++;
 505   3                              else{
 506   4                              
 507   4                                      heartBeatCount = 0;
 508   4                                      heartBeatCycle_FLG = 1;
 509   4                              }
 510   3                      }
 511   2                      
 512   2                      /*»¥¿Ø×é¶¨Ê±²ÎÊýÖÜÆÚÏòÍâÍ¨ÖªÒµÎñ*/
 513   2                      if(!cycleFlg_mutualAddrPeriodPingOut){
 514   3                      
 515   3                              if(dnCounter_mutualAddrPeriodPingOut)dnCounter_mutualAddrPeriodPingOut --;
 516   3                              else{
 517   4                              
 518   4                                      dnCounter_mutualAddrPeriodPingOut = PERIOD_HEARTBEAT_ASR * 2;
 519   4                                      
 520   4                                      cycleFlg_mutualAddrPeriodPingOut = 1;
 521   4                              }
 522   3                      }
 523   2                      
 524   2                      /*ÑÓÊ±¼ÆÊ±ÒµÎñ£¬µ½µã¶¯×÷*/
 525   2                      if(ifDelay_sw_running_FLAG & (1 << 1)){
 526   3                      
 527   3                              if(delayCnt_onoff < ((u16)delayPeriod_onoff * 60))delayCnt_onoff ++;
 528   3                              else{
 529   4                              
 530   4                                      delayPeriod_onoff = delayCnt_onoff = 0; 
 531   4                                      
 532   4                                      ifDelay_sw_running_FLAG &= ~(1 << 1);   //Ò»´ÎÐÔ±êÖ¾Çå³ý
 533   4                                      
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 10  

 534   4                                      swCommand_fromUsr.actMethod = relay_OnOff; //¿ª¹Ø¶¯×÷
 535   4                                      swCommand_fromUsr.objRelay = delayUp_act;
 536   4                                      devActionPush_IF.push_IF = 1; //ÍÆËÍÊ¹ÄÜ -Ö÷¶¯ÉÏ´«
 537   4                                      dev_agingCmd_sndInitative.agingCmd_delaySetOpreat = 1; //¶ÔÓ¦Ö÷¶¯ÉÏ´«Ê±Ð§Õ¼Î»ÖÃÒ»
 538   4                                      
 539   4      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
                                              if(swCommand_fromUsr.objRelay == 4)swCommand_fromUsr.objRelay = 3; //·çÉÈÏìÓ¦ÖµÎª1¡¢2¡¢4£»Êµ¼ÊÖµÎª1¡¢2
             -¡¢3 --×ª»»
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
                                              EACHCTRL_realesFLG = 1;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SCENARIO)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
                                              (swCommand_fromUsr.objRelay == 0x01)?(heater_ActParam.heater_currentActMode = heaterActMode_swKeepOpen
             -):(heater_ActParam.heater_currentActMode = heaterActMode_swClose); //°´¼ü×´Ì¬Á¢Âí¸üÐÂ
                                              devHeater_actOpeartionExecute(heater_ActParam.heater_currentActMode); //¶¯×÷Ö´ÐÐ
              
              #else
 553   4                                      if(SWITCH_TYPE == SWITCH_TYPE_SWBIT1 || SWITCH_TYPE == SWITCH_TYPE_SWBIT2 || SWITCH_TYPE == SWITCH_TYP
             -E_SWBIT3)EACHCTRL_realesFLG |= (status_Relay ^ swCommand_fromUsr.objRelay); //ÓÐÐ§»¥¿Ø´¥·¢
 554   4                                      else
 555   4                                      if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN)EACHCTRL_realesFLG = 1; //ÓÐÐ§»¥¿Ø´¥·¢
 556   4                                      
 557   4      #endif          
 558   4                                      /*>>>usr_debug<<<*/
 559   4                                      //usr_debugÊý¾ÝÌî×°
 560   4                                      dev_debugInfoLog.debugInfoData.delayActInfo.delayAct_Up = 1;
 561   4                                      //usr_debug´òÓ¡ÀàÐÍÌî×°Ìî×°
 562   4                                      dev_debugInfoLog.debugInfoType = infoType_delayUp;
 563   4                              }
 564   3                      }
 565   2                      
 566   2                      /*ÂÌÉ«Ä£Ê½¼ÆÊ±ÒµÎñ£¬Ñ­»·¹Ø±Õ*/
 567   2                      if((ifDelay_sw_running_FLAG & (1 << 0)) && status_Relay){
 568   3                      
 569   3                              if(delayCnt_closeLoop < ((u16)delayPeriod_closeLoop * 60))delayCnt_closeLoop ++;
 570   3                              else{
 571   4                                      
 572   4                                      delayCnt_closeLoop = 0;
 573   4                              
 574   4                                      swCommand_fromUsr.actMethod = relay_OnOff; //¿ª¹Ø¶¯×÷
 575   4                                      swCommand_fromUsr.objRelay = 0;
 576   4                                      devActionPush_IF.push_IF = 1; //ÍÆËÍÊ¹ÄÜ -Ö÷¶¯ÉÏ´«
 577   4                                      dev_agingCmd_sndInitative.agingCmd_greenModeSetOpreat = 1; //¶ÔÓ¦Ö÷¶¯ÉÏ´«Ê±Ð§Õ¼Î»ÖÃÒ»
 578   4                              
 579   4      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_FANS)
                                              if(swCommand_fromUsr.objRelay == 4)swCommand_fromUsr.objRelay = 3; //·çÉÈÏìÓ¦ÖµÎª1¡¢2¡¢4£»Êµ¼ÊÖµÎª1¡¢2
             -¡¢3 --×ª»»
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_dIMMER)
                                              EACHCTRL_realesFLG = 1;
                                              
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
              #elif(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_HEATER)
                                              (swCommand_fromUsr.objRelay == 0x01)?(heater_ActParam.heater_currentActMode = heaterActMode_swKeepOpen
             -):(heater_ActParam.heater_currentActMode = heaterActMode_swClose); //°´¼ü×´Ì¬Á¢Âí¸üÐÂ
                                              devHeater_actOpeartionExecute(heater_ActParam.heater_currentActMode); //¶¯×÷Ö´ÐÐ
                                              
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 11  

              #else
 592   4                                      if(SWITCH_TYPE == SWITCH_TYPE_SWBIT1 || SWITCH_TYPE == SWITCH_TYPE_SWBIT2 || SWITCH_TYPE == SWITCH_TYP
             -E_SWBIT3)EACHCTRL_realesFLG |= (status_Relay ^ swCommand_fromUsr.objRelay); //ÓÐÐ§»¥¿Ø´¥·¢
 593   4                                      else
 594   4                                      if(SWITCH_TYPE == SWITCH_TYPE_CURTAIN)EACHCTRL_realesFLG = 1; //ÓÐÐ§»¥¿Ø´¥·¢
 595   4                                      
 596   4      #endif  
 597   4                              }
 598   3                      }
 599   2                      
 600   2                      /*zigbÓ²¼þÆ÷¼þÑÓ³ÙÆô¶¯¼ÆÊ±±äÁ¿¸üÐÂ*///ÑÓ³ÙÆô¶¯
 601   2                      if(devZigbNwk_startUp_delayCounter)devZigbNwk_startUp_delayCounter --;
 602   2                      
 603   2                      /*³¡¾°ÖÜÆÚÑ¯²é¹ÒÆð¼ÆÊ±Öµ¸üÐÂ*///¹ÒÆð×÷ÓÃ<<
 604   2                      if(heartBeatHang_timeCnt)heartBeatHang_timeCnt --;
 605   2                      
 606   2                      /*ÐÄÌø¹ÒÆð¼ÆÊ±Öµ¸üÐÂ*///¹ÒÆð×÷ÓÃ<<
 607   2                      if(colonyCtrlGetHang_timeCnt)colonyCtrlGetHang_timeCnt --;
 608   2                      
 609   2                      /*ÏµÍ³Ê±¼ä±¾µØÎ¬³Ö¼ÆÊýÖµ¸üÐÂ*/
 610   2                      sysTimeKeep_counter ++;
 611   2                      
 612   2                      /*tips¿ÕÏÐÊÍ·Å¼ÆÊ±¼ÆÊýÒµÎñ*/
 613   2                      if(counter_ifTipsFree && countEN_ifTipsFree)counter_ifTipsFree --;
 614   2                      
 615   2                      /*ÏµÍ³Ê±¼äÖÜÆÚÐÂ¸üÐÂ¼ÆÊ±¼ÆÊýÒµÎñ*/
 616   2                      if(sysTimeReales_counter)sysTimeReales_counter --;
 617   2                      
 618   2                      /*zigbÍøÂç¿ª·Åµ¹¼ÆÊ±*/
 619   2                      if(tipsTimeCount_zigNwkOpen)tipsTimeCount_zigNwkOpen --;
 620   2                      
 621   2                      /*Éè±¸ÍøÂç¹ÒÆðÊ±¼äµ¹¼ÆÊ±*///¹ÒÆð×÷ÓÃ<<
 622   2                      if(devNwkHoldTime_Param.devHoldTime_counter)devNwkHoldTime_Param.devHoldTime_counter --;
 623   2                      
 624   2                      /*¼¯ÈºÊÜ¿Ø×´Ì¬ÖÜÆÚÐÔÂÖÑ¯ÖÜÆÚ¼ÆÊ±*/
 625   2                      if(colonyCtrlGet_queryCounter)colonyCtrlGet_queryCounter --;
 626   2                      
 627   2                      /*´¥ÃþIC¸´Î»Ê±¼äµ¹¼ÆÊ±*/
 628   2                      if(touchPad_resetTimeCount)touchPad_resetTimeCount --;
 629   2                      
 630   2                      /*´¥ÃþIC¸´Î»Tipsµ¹¼ÆÊ±*/
 631   2                      if(tipsTimeCount_touchReset)tipsTimeCount_touchReset --;
 632   2                      
 633   2                      /*»Ö¸´Ô¤ÖÃ¶¯×÷µ¹¼ÆÊ±*/
 634   2                      if(factoryRecover_HoldTimeCount)factoryRecover_HoldTimeCount --;
 635   2                      
 636   2                      /*»Ö¸´³ö³§Tipsµ¹¼ÆÊ±*/
 637   2                      if(tipsTimeCount_factoryRecover)tipsTimeCount_factoryRecover --;
 638   2                      
 639   2                      /*Ð­µ÷Æ÷Ê§Áª/¶ªÊ§ È·ÈÏµ¹¼ÆÊ±*/
 640   2                      if(timeCounter_coordinatorLost_detecting)timeCounter_coordinatorLost_detecting --; 
 641   2                      else{
 642   3                      
 643   3                              timeCounter_coordinatorLost_keeping ++; //Íø¹ØÊ§ÁªÀÛ¼ÆÊ±¼ä¼ÆÊ±
 644   3                      }
 645   2              }
 646   1      
 647   1              //***************´®¿Ú½ÓÊÕ³¬Ê±Ê±³¤¼ÆÊý*******************************//
 648   1              if(rxTout_count_EN){ //½ÓÊÕ³¬Ê±¼ÆÊ±Ê¹ÄÜÅÐ¶Ï
 649   2              
 650   2                      if(rxTout_count < TimeOutSet1)rxTout_count ++;
 651   2                      else{
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 12  

 652   3                              
 653   3                              if(!uartRX_toutFLG && datsRcv_length >= 5){ //³¬Ê±Ê±¼äÅÐ¶Ï¼°×îÐ¡Ö¡³¤ÅÐ¶Ï
 654   4                              
 655   4                                      uartRX_toutFLG = 1;
 656   4                              
 657   4                                      memset(datsRcv_ZIGB.rcvDats, 0xff, sizeof(char) * COM_RX1_Lenth);
 658   4                                      memcpy(datsRcv_ZIGB.rcvDats, RX1_Buffer, COM_RX1_Lenth);
 659   4                                      datsRcv_ZIGB.rcvDatsLen = datsRcv_length;
 660   4                                      
 661   4                                      /*>>>usr_debug<<<*/
 662   4                                      if(datsRcv_length != (datsRcv_ZIGB.rcvDats[1] + 5)){  //±êµÄÖ¡³¤ÅÐ¶Ï£¬ÊÇ·ñ³¬³¤
 663   5                                      
 664   5                                              //usr_debugÊý¾ÝÌî×°
 665   5                                              dev_debugInfoLog.debugInfoData.frameInfo.frameIllegal_FLG = 1;
 666   5                                              dev_debugInfoLog.debugInfoData.frameInfo.frame_aLength = RX1_Buffer[1];
 667   5                                              dev_debugInfoLog.debugInfoData.frameInfo.frame_rLength = datsRcv_length;
 668   5                                              //usr_debug´òÓ¡ÀàÐÍÌî×°Ìî×°
 669   5                                              dev_debugInfoLog.debugInfoType = infoType_frameUart;
 670   5                                              
 671   5                                      }else{
 672   5                                      
 673   5      
 674   5                                      }
 675   4                              }
 676   3                              rxTout_count_EN = 0;
 677   3                      }
 678   2              }
 679   1              
 680   1              //*******************beep¼ÆÊ±¼ÆÊýÒµÎñ**************************/
 681   1              if(count_beep < period_beep)count_beep ++;
 682   1              else{
 683   2                      
 684   2                      static u16 xdata        tips_Period = 20 * 50 / 2;
 685   2                      static u16 xdata        tips_Count      = 0;
 686   2                      static u8 xdata         tips_Loop       = 2 * 4;
 687   2                      static bit                      beeps_en        = 1;
 688   2              
 689   2                      count_beep = 0;
 690   2      
 691   2                      switch(dev_statusBeeps){ //×´Ì¬»ú
 692   3                              
 693   3                              case beepsMode_standBy:{
 694   4                                      
 695   4                                      period_beep = devTips_beep.tips_Period;
 696   4                                      tips_Period = 20 * devTips_beep.tips_time / period_beep;
 697   4                                      tips_Loop       = 2 * devTips_beep.tips_loop;
 698   4                                      tips_Count      = 0;
 699   4                                      beeps_en        = 1;
 700   4                                      dev_statusBeeps = beepsWorking;
 701   4              
 702   4                              }break;
 703   3                              
 704   3                              case beepsWorking:{
 705   4                              
 706   4                                      if(tips_Loop){
 707   5                                      
 708   5                                              if(tips_Count < tips_Period){
 709   6                                              
 710   6                                                      tips_Count ++;
 711   6                                                      (beeps_en)?(PIN_BEEP = !PIN_BEEP):(PIN_BEEP = !BEEP_OPEN_LEVEL);
 712   6                                                      
 713   6                                              }else{
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 13  

 714   6                                              
 715   6                                                      tips_Count = 0;
 716   6                                                      beeps_en = !beeps_en;
 717   6                                                      tips_Loop --;
 718   6                                              }
 719   5                                              
 720   5                                      }else{
 721   5                                      
 722   5                                              dev_statusBeeps = beepsComplete;
 723   5                                      }
 724   4                              
 725   4                              }break;
 726   3                              
 727   3                              case beepsComplete:{
 728   4                              
 729   4                                      tips_Count = 0;
 730   4                                      beeps_en = 1;
 731   4                                      PIN_BEEP = !BEEP_OPEN_LEVEL;
 732   4                                      dev_statusBeeps = beepsMode_null;
 733   4                                      
 734   4                              }break;
 735   3                      
 736   3                              default:{
 737   4                              
 738   4                                      PIN_BEEP = !BEEP_OPEN_LEVEL;
 739   4                                      
 740   4                              }break;
 741   3                      }
 742   2              }
 743   1              
 744   1              //***************tips_Led Ë¢ÐÂÒµÎñ*******************************//
 745   1              if(counter_tipsColor > period_tipsColor){       //»Ò¶ÈÖµÖµ¼ÓÔØ
 746   2              
 747   2                      counter_tipsColor = 0;
 748   2                      
 749   2                      cnt_relay1_Tips.colorGray_R = relay1_Tips.colorGray_R;
 750   2                      cnt_relay1_Tips.colorGray_G = relay1_Tips.colorGray_G;
 751   2                      cnt_relay1_Tips.colorGray_B = relay1_Tips.colorGray_B;
 752   2                      
 753   2                      cnt_relay2_Tips.colorGray_R = relay2_Tips.colorGray_R;
 754   2                      cnt_relay2_Tips.colorGray_G = relay2_Tips.colorGray_G;
 755   2                      cnt_relay2_Tips.colorGray_B = relay2_Tips.colorGray_B;
 756   2                      
 757   2                      cnt_relay3_Tips.colorGray_R = relay3_Tips.colorGray_R;
 758   2                      cnt_relay3_Tips.colorGray_G = relay3_Tips.colorGray_G;
 759   2                      cnt_relay3_Tips.colorGray_B = relay3_Tips.colorGray_B;
 760   2                      
 761   2                      cnt_zigbNwk_Tips.colorGray_R = zigbNwk_Tips.colorGray_R;
 762   2                      cnt_zigbNwk_Tips.colorGray_G = zigbNwk_Tips.colorGray_G;
 763   2                      cnt_zigbNwk_Tips.colorGray_B = zigbNwk_Tips.colorGray_B;
 764   2              }
 765   1              else{ //pwmÖ´ÐÐ
 766   2              
 767   2                      counter_tipsColor ++;
 768   2                      
 769   2      #if(SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_SOCKETS || SWITCH_TYPE_FORCEDEF == SWITCH_TYPE_INFRARED)
                              
                              if((counter_tipsColor > 0) && (counter_tipsColor <= (COLORGRAY_MAX * 1))){
                                      
                                       //Ö¸Ê¾¿ÉÓÃºË×¼
                                      if(cnt_relay1_Tips.colorGray_R && (DEV_actReserve & 0x01)){cnt_relay1_Tips.colorGray_R --; PIN_TIPS_REL
             -AY1_R = 0;}
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 14  

                                      else PIN_TIPS_RELAY1_R = 1;
                                      
                              }else
                              if((counter_tipsColor > (COLORGRAY_MAX * 2)) && (counter_tipsColor <= (COLORGRAY_MAX * 3))){
                              
                                       //Ö¸Ê¾¿ÉÓÃºË×¼
                                      if(cnt_relay1_Tips.colorGray_B && (DEV_actReserve & 0x01)){cnt_relay1_Tips.colorGray_B --; PIN_TIPS_REL
             -AY1_B = 0;}
                                      else PIN_TIPS_RELAY1_B = 1;
                              }               
              #else
 785   2                      
 786   2                      if((counter_tipsColor > 0) && (counter_tipsColor <= (COLORGRAY_MAX * 1))){
 787   3                              
 788   3                               //Ö¸Ê¾¿ÉÓÃºË×¼
 789   3                              if(cnt_relay1_Tips.colorGray_R && (DEV_actReserve & 0x01)){cnt_relay1_Tips.colorGray_R --; PIN_TIPS_REL
             -AY1_R = 0;}
 790   3                              else PIN_TIPS_RELAY1_R = 1;
 791   3                              if(cnt_relay2_Tips.colorGray_R && (DEV_actReserve & 0x02)){cnt_relay2_Tips.colorGray_R --; PIN_TIPS_REL
             -AY2_R = 0;}
 792   3                              else PIN_TIPS_RELAY2_R = 1;
 793   3                              if(cnt_relay3_Tips.colorGray_R && (DEV_actReserve & 0x04)){cnt_relay3_Tips.colorGray_R --; PIN_TIPS_REL
             -AY3_R = 0;}
 794   3                              else PIN_TIPS_RELAY3_R = 1;
 795   3                              if(cnt_zigbNwk_Tips.colorGray_R){cnt_zigbNwk_Tips.colorGray_R --; PIN_TIPS_ZIGBNWK_R = 0;}
 796   3                              else PIN_TIPS_ZIGBNWK_R = 1;
 797   3                              
 798   3                      }else
 799   2                      if((counter_tipsColor > (COLORGRAY_MAX * 1)) && (counter_tipsColor <= (COLORGRAY_MAX * 2))){
 800   3                      
 801   3                               //Ö¸Ê¾¿ÉÓÃºË×¼
 802   3                              if(cnt_relay1_Tips.colorGray_G && (DEV_actReserve & 0x01)){cnt_relay1_Tips.colorGray_G --; PIN_TIPS_REL
             -AY1_G = 0;}
 803   3                              else PIN_TIPS_RELAY1_G = 1;
 804   3                              if(cnt_relay2_Tips.colorGray_G && (DEV_actReserve & 0x02)){cnt_relay2_Tips.colorGray_G --; PIN_TIPS_REL
             -AY2_G = 0;}
 805   3                              else PIN_TIPS_RELAY2_G = 1;
 806   3                              if(cnt_relay3_Tips.colorGray_G && (DEV_actReserve & 0x04)){cnt_relay3_Tips.colorGray_G --; PIN_TIPS_REL
             -AY3_G = 0;}
 807   3                              else PIN_TIPS_RELAY3_G = 1;
 808   3                              if(cnt_zigbNwk_Tips.colorGray_G){cnt_zigbNwk_Tips.colorGray_G --; PIN_TIPS_ZIGBNWK_G = 0;}
 809   3                              else PIN_TIPS_ZIGBNWK_G = 1;
 810   3                              
 811   3                      }else
 812   2                      if((counter_tipsColor > (COLORGRAY_MAX * 2)) && (counter_tipsColor <= (COLORGRAY_MAX * 3))){
 813   3                      
 814   3                               //Ö¸Ê¾¿ÉÓÃºË×¼
 815   3                              if(cnt_relay1_Tips.colorGray_B && (DEV_actReserve & 0x01)){cnt_relay1_Tips.colorGray_B --; PIN_TIPS_REL
             -AY1_B = 0;}
 816   3                              else PIN_TIPS_RELAY1_B = 1;
 817   3                              if(cnt_relay2_Tips.colorGray_B && (DEV_actReserve & 0x02)){cnt_relay2_Tips.colorGray_B --; PIN_TIPS_REL
             -AY2_B = 0;}
 818   3                              else PIN_TIPS_RELAY2_B = 1;
 819   3                              if(cnt_relay3_Tips.colorGray_B && (DEV_actReserve & 0x04)){cnt_relay3_Tips.colorGray_B --; PIN_TIPS_REL
             -AY3_B = 0;}
 820   3                              else PIN_TIPS_RELAY3_B = 1;
 821   3                              if(cnt_zigbNwk_Tips.colorGray_B){cnt_zigbNwk_Tips.colorGray_B --; PIN_TIPS_ZIGBNWK_B = 0;}
 822   3                              else PIN_TIPS_ZIGBNWK_B = 1;
 823   3                      }
 824   2      #endif
 825   2              }
 826   1      }
C51 COMPILER V9.54   APPTIMER                                                              05/13/2019 08:24:10 PAGE 15  



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1715    ----
   CONSTANT SIZE    =      7    ----
   XDATA SIZE       =     19    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
